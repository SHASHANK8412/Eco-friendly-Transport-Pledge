(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function Jx(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var af={exports:{}},rl={},lf={exports:{}},ke={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ny;function Zx(){if(Ny)return ke;Ny=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),x=Symbol.iterator;function T(U){return U===null||typeof U!="object"?null:(U=x&&U[x]||U["@@iterator"],typeof U=="function"?U:null)}var P={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},N=Object.assign,j={};function L(U,Y,Se){this.props=U,this.context=Y,this.refs=j,this.updater=Se||P}L.prototype.isReactComponent={},L.prototype.setState=function(U,Y){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,Y,"setState")},L.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function W(){}W.prototype=L.prototype;function G(U,Y,Se){this.props=U,this.context=Y,this.refs=j,this.updater=Se||P}var Z=G.prototype=new W;Z.constructor=G,N(Z,L.prototype),Z.isPureReactComponent=!0;var ne=Array.isArray,ee=Object.prototype.hasOwnProperty,se={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function S(U,Y,Se){var Ce,Re={},Ae=null,Ue=null;if(Y!=null)for(Ce in Y.ref!==void 0&&(Ue=Y.ref),Y.key!==void 0&&(Ae=""+Y.key),Y)ee.call(Y,Ce)&&!k.hasOwnProperty(Ce)&&(Re[Ce]=Y[Ce]);var Ve=arguments.length-2;if(Ve===1)Re.children=Se;else if(1<Ve){for(var qe=Array(Ve),Qt=0;Qt<Ve;Qt++)qe[Qt]=arguments[Qt+2];Re.children=qe}if(U&&U.defaultProps)for(Ce in Ve=U.defaultProps,Ve)Re[Ce]===void 0&&(Re[Ce]=Ve[Ce]);return{$$typeof:n,type:U,key:Ae,ref:Ue,props:Re,_owner:se.current}}function C(U,Y){return{$$typeof:n,type:U.type,key:Y,ref:U.ref,props:U.props,_owner:U._owner}}function b(U){return typeof U=="object"&&U!==null&&U.$$typeof===n}function D(U){var Y={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(Se){return Y[Se]})}var F=/\/+/g;function R(U,Y){return typeof U=="object"&&U!==null&&U.key!=null?D(""+U.key):Y.toString(36)}function Oe(U,Y,Se,Ce,Re){var Ae=typeof U;(Ae==="undefined"||Ae==="boolean")&&(U=null);var Ue=!1;if(U===null)Ue=!0;else switch(Ae){case"string":case"number":Ue=!0;break;case"object":switch(U.$$typeof){case n:case e:Ue=!0}}if(Ue)return Ue=U,Re=Re(Ue),U=Ce===""?"."+R(Ue,0):Ce,ne(Re)?(Se="",U!=null&&(Se=U.replace(F,"$&/")+"/"),Oe(Re,Y,Se,"",function(Qt){return Qt})):Re!=null&&(b(Re)&&(Re=C(Re,Se+(!Re.key||Ue&&Ue.key===Re.key?"":(""+Re.key).replace(F,"$&/")+"/")+U)),Y.push(Re)),1;if(Ue=0,Ce=Ce===""?".":Ce+":",ne(U))for(var Ve=0;Ve<U.length;Ve++){Ae=U[Ve];var qe=Ce+R(Ae,Ve);Ue+=Oe(Ae,Y,Se,qe,Re)}else if(qe=T(U),typeof qe=="function")for(U=qe.call(U),Ve=0;!(Ae=U.next()).done;)Ae=Ae.value,qe=Ce+R(Ae,Ve++),Ue+=Oe(Ae,Y,Se,qe,Re);else if(Ae==="object")throw Y=String(U),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.");return Ue}function _t(U,Y,Se){if(U==null)return U;var Ce=[],Re=0;return Oe(U,Ce,"","",function(Ae){return Y.call(Se,Ae,Re++)}),Ce}function wt(U){if(U._status===-1){var Y=U._result;Y=Y(),Y.then(function(Se){(U._status===0||U._status===-1)&&(U._status=1,U._result=Se)},function(Se){(U._status===0||U._status===-1)&&(U._status=2,U._result=Se)}),U._status===-1&&(U._status=0,U._result=Y)}if(U._status===1)return U._result.default;throw U._result}var Be={current:null},oe={transition:null},ge={ReactCurrentDispatcher:Be,ReactCurrentBatchConfig:oe,ReactCurrentOwner:se};function ce(){throw Error("act(...) is not supported in production builds of React.")}return ke.Children={map:_t,forEach:function(U,Y,Se){_t(U,function(){Y.apply(this,arguments)},Se)},count:function(U){var Y=0;return _t(U,function(){Y++}),Y},toArray:function(U){return _t(U,function(Y){return Y})||[]},only:function(U){if(!b(U))throw Error("React.Children.only expected to receive a single React element child.");return U}},ke.Component=L,ke.Fragment=t,ke.Profiler=o,ke.PureComponent=G,ke.StrictMode=s,ke.Suspense=f,ke.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ge,ke.act=ce,ke.cloneElement=function(U,Y,Se){if(U==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+U+".");var Ce=N({},U.props),Re=U.key,Ae=U.ref,Ue=U._owner;if(Y!=null){if(Y.ref!==void 0&&(Ae=Y.ref,Ue=se.current),Y.key!==void 0&&(Re=""+Y.key),U.type&&U.type.defaultProps)var Ve=U.type.defaultProps;for(qe in Y)ee.call(Y,qe)&&!k.hasOwnProperty(qe)&&(Ce[qe]=Y[qe]===void 0&&Ve!==void 0?Ve[qe]:Y[qe])}var qe=arguments.length-2;if(qe===1)Ce.children=Se;else if(1<qe){Ve=Array(qe);for(var Qt=0;Qt<qe;Qt++)Ve[Qt]=arguments[Qt+2];Ce.children=Ve}return{$$typeof:n,type:U.type,key:Re,ref:Ae,props:Ce,_owner:Ue}},ke.createContext=function(U){return U={$$typeof:c,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},U.Provider={$$typeof:l,_context:U},U.Consumer=U},ke.createElement=S,ke.createFactory=function(U){var Y=S.bind(null,U);return Y.type=U,Y},ke.createRef=function(){return{current:null}},ke.forwardRef=function(U){return{$$typeof:d,render:U}},ke.isValidElement=b,ke.lazy=function(U){return{$$typeof:_,_payload:{_status:-1,_result:U},_init:wt}},ke.memo=function(U,Y){return{$$typeof:m,type:U,compare:Y===void 0?null:Y}},ke.startTransition=function(U){var Y=oe.transition;oe.transition={};try{U()}finally{oe.transition=Y}},ke.unstable_act=ce,ke.useCallback=function(U,Y){return Be.current.useCallback(U,Y)},ke.useContext=function(U){return Be.current.useContext(U)},ke.useDebugValue=function(){},ke.useDeferredValue=function(U){return Be.current.useDeferredValue(U)},ke.useEffect=function(U,Y){return Be.current.useEffect(U,Y)},ke.useId=function(){return Be.current.useId()},ke.useImperativeHandle=function(U,Y,Se){return Be.current.useImperativeHandle(U,Y,Se)},ke.useInsertionEffect=function(U,Y){return Be.current.useInsertionEffect(U,Y)},ke.useLayoutEffect=function(U,Y){return Be.current.useLayoutEffect(U,Y)},ke.useMemo=function(U,Y){return Be.current.useMemo(U,Y)},ke.useReducer=function(U,Y,Se){return Be.current.useReducer(U,Y,Se)},ke.useRef=function(U){return Be.current.useRef(U)},ke.useState=function(U){return Be.current.useState(U)},ke.useSyncExternalStore=function(U,Y,Se){return Be.current.useSyncExternalStore(U,Y,Se)},ke.useTransition=function(){return Be.current.useTransition()},ke.version="18.3.1",ke}var Dy;function hp(){return Dy||(Dy=1,lf.exports=Zx()),lf.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Oy;function eT(){if(Oy)return rl;Oy=1;var n=hp(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(d,f,m){var _,x={},T=null,P=null;m!==void 0&&(T=""+m),f.key!==void 0&&(T=""+f.key),f.ref!==void 0&&(P=f.ref);for(_ in f)s.call(f,_)&&!l.hasOwnProperty(_)&&(x[_]=f[_]);if(d&&d.defaultProps)for(_ in f=d.defaultProps,f)x[_]===void 0&&(x[_]=f[_]);return{$$typeof:e,type:d,key:T,ref:P,props:x,_owner:o.current}}return rl.Fragment=t,rl.jsx=c,rl.jsxs=c,rl}var Ly;function tT(){return Ly||(Ly=1,af.exports=eT()),af.exports}var y=tT(),V=hp();const nT=Jx(V);var yc={},uf={exports:{}},on={},cf={exports:{}},hf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vy;function rT(){return Vy||(Vy=1,(function(n){function e(oe,ge){var ce=oe.length;oe.push(ge);e:for(;0<ce;){var U=ce-1>>>1,Y=oe[U];if(0<o(Y,ge))oe[U]=ge,oe[ce]=Y,ce=U;else break e}}function t(oe){return oe.length===0?null:oe[0]}function s(oe){if(oe.length===0)return null;var ge=oe[0],ce=oe.pop();if(ce!==ge){oe[0]=ce;e:for(var U=0,Y=oe.length,Se=Y>>>1;U<Se;){var Ce=2*(U+1)-1,Re=oe[Ce],Ae=Ce+1,Ue=oe[Ae];if(0>o(Re,ce))Ae<Y&&0>o(Ue,Re)?(oe[U]=Ue,oe[Ae]=ce,U=Ae):(oe[U]=Re,oe[Ce]=ce,U=Ce);else if(Ae<Y&&0>o(Ue,ce))oe[U]=Ue,oe[Ae]=ce,U=Ae;else break e}}return ge}function o(oe,ge){var ce=oe.sortIndex-ge.sortIndex;return ce!==0?ce:oe.id-ge.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();n.unstable_now=function(){return c.now()-d}}var f=[],m=[],_=1,x=null,T=3,P=!1,N=!1,j=!1,L=typeof setTimeout=="function"?setTimeout:null,W=typeof clearTimeout=="function"?clearTimeout:null,G=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Z(oe){for(var ge=t(m);ge!==null;){if(ge.callback===null)s(m);else if(ge.startTime<=oe)s(m),ge.sortIndex=ge.expirationTime,e(f,ge);else break;ge=t(m)}}function ne(oe){if(j=!1,Z(oe),!N)if(t(f)!==null)N=!0,wt(ee);else{var ge=t(m);ge!==null&&Be(ne,ge.startTime-oe)}}function ee(oe,ge){N=!1,j&&(j=!1,W(S),S=-1),P=!0;var ce=T;try{for(Z(ge),x=t(f);x!==null&&(!(x.expirationTime>ge)||oe&&!D());){var U=x.callback;if(typeof U=="function"){x.callback=null,T=x.priorityLevel;var Y=U(x.expirationTime<=ge);ge=n.unstable_now(),typeof Y=="function"?x.callback=Y:x===t(f)&&s(f),Z(ge)}else s(f);x=t(f)}if(x!==null)var Se=!0;else{var Ce=t(m);Ce!==null&&Be(ne,Ce.startTime-ge),Se=!1}return Se}finally{x=null,T=ce,P=!1}}var se=!1,k=null,S=-1,C=5,b=-1;function D(){return!(n.unstable_now()-b<C)}function F(){if(k!==null){var oe=n.unstable_now();b=oe;var ge=!0;try{ge=k(!0,oe)}finally{ge?R():(se=!1,k=null)}}else se=!1}var R;if(typeof G=="function")R=function(){G(F)};else if(typeof MessageChannel<"u"){var Oe=new MessageChannel,_t=Oe.port2;Oe.port1.onmessage=F,R=function(){_t.postMessage(null)}}else R=function(){L(F,0)};function wt(oe){k=oe,se||(se=!0,R())}function Be(oe,ge){S=L(function(){oe(n.unstable_now())},ge)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(oe){oe.callback=null},n.unstable_continueExecution=function(){N||P||(N=!0,wt(ee))},n.unstable_forceFrameRate=function(oe){0>oe||125<oe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<oe?Math.floor(1e3/oe):5},n.unstable_getCurrentPriorityLevel=function(){return T},n.unstable_getFirstCallbackNode=function(){return t(f)},n.unstable_next=function(oe){switch(T){case 1:case 2:case 3:var ge=3;break;default:ge=T}var ce=T;T=ge;try{return oe()}finally{T=ce}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(oe,ge){switch(oe){case 1:case 2:case 3:case 4:case 5:break;default:oe=3}var ce=T;T=oe;try{return ge()}finally{T=ce}},n.unstable_scheduleCallback=function(oe,ge,ce){var U=n.unstable_now();switch(typeof ce=="object"&&ce!==null?(ce=ce.delay,ce=typeof ce=="number"&&0<ce?U+ce:U):ce=U,oe){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=ce+Y,oe={id:_++,callback:ge,priorityLevel:oe,startTime:ce,expirationTime:Y,sortIndex:-1},ce>U?(oe.sortIndex=ce,e(m,oe),t(f)===null&&oe===t(m)&&(j?(W(S),S=-1):j=!0,Be(ne,ce-U))):(oe.sortIndex=Y,e(f,oe),N||P||(N=!0,wt(ee))),oe},n.unstable_shouldYield=D,n.unstable_wrapCallback=function(oe){var ge=T;return function(){var ce=T;T=ge;try{return oe.apply(this,arguments)}finally{T=ce}}}})(hf)),hf}var My;function sT(){return My||(My=1,cf.exports=rT()),cf.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jy;function iT(){if(jy)return on;jy=1;var n=hp(),e=sT();function t(r){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+r,a=1;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+r+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,o={};function l(r,i){c(r,i),c(r+"Capture",i)}function c(r,i){for(o[r]=i,r=0;r<i.length;r++)s.add(i[r])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_={},x={};function T(r){return f.call(x,r)?!0:f.call(_,r)?!1:m.test(r)?x[r]=!0:(_[r]=!0,!1)}function P(r,i,a,h){if(a!==null&&a.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return h?!1:a!==null?!a.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function N(r,i,a,h){if(i===null||typeof i>"u"||P(r,i,a,h))return!0;if(h)return!1;if(a!==null)switch(a.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function j(r,i,a,h,p,g,E){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=h,this.attributeNamespace=p,this.mustUseProperty=a,this.propertyName=r,this.type=i,this.sanitizeURL=g,this.removeEmptyString=E}var L={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){L[r]=new j(r,0,!1,r,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var i=r[0];L[i]=new j(i,1,!1,r[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(r){L[r]=new j(r,2,!1,r.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){L[r]=new j(r,2,!1,r,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){L[r]=new j(r,3,!1,r.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(r){L[r]=new j(r,3,!0,r,null,!1,!1)}),["capture","download"].forEach(function(r){L[r]=new j(r,4,!1,r,null,!1,!1)}),["cols","rows","size","span"].forEach(function(r){L[r]=new j(r,6,!1,r,null,!1,!1)}),["rowSpan","start"].forEach(function(r){L[r]=new j(r,5,!1,r.toLowerCase(),null,!1,!1)});var W=/[\-:]([a-z])/g;function G(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var i=r.replace(W,G);L[i]=new j(i,1,!1,r,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var i=r.replace(W,G);L[i]=new j(i,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(r){var i=r.replace(W,G);L[i]=new j(i,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(r){L[r]=new j(r,1,!1,r.toLowerCase(),null,!1,!1)}),L.xlinkHref=new j("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(r){L[r]=new j(r,1,!1,r.toLowerCase(),null,!0,!0)});function Z(r,i,a,h){var p=L.hasOwnProperty(i)?L[i]:null;(p!==null?p.type!==0:h||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(N(i,a,p,h)&&(a=null),h||p===null?T(i)&&(a===null?r.removeAttribute(i):r.setAttribute(i,""+a)):p.mustUseProperty?r[p.propertyName]=a===null?p.type===3?!1:"":a:(i=p.attributeName,h=p.attributeNamespace,a===null?r.removeAttribute(i):(p=p.type,a=p===3||p===4&&a===!0?"":""+a,h?r.setAttributeNS(h,i,a):r.setAttribute(i,a))))}var ne=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ee=Symbol.for("react.element"),se=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),b=Symbol.for("react.provider"),D=Symbol.for("react.context"),F=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),Oe=Symbol.for("react.suspense_list"),_t=Symbol.for("react.memo"),wt=Symbol.for("react.lazy"),Be=Symbol.for("react.offscreen"),oe=Symbol.iterator;function ge(r){return r===null||typeof r!="object"?null:(r=oe&&r[oe]||r["@@iterator"],typeof r=="function"?r:null)}var ce=Object.assign,U;function Y(r){if(U===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);U=i&&i[1]||""}return`
`+U+r}var Se=!1;function Ce(r,i){if(!r||Se)return"";Se=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(q){var h=q}Reflect.construct(r,[],i)}else{try{i.call()}catch(q){h=q}r.call(i.prototype)}else{try{throw Error()}catch(q){h=q}r()}}catch(q){if(q&&h&&typeof q.stack=="string"){for(var p=q.stack.split(`
`),g=h.stack.split(`
`),E=p.length-1,A=g.length-1;1<=E&&0<=A&&p[E]!==g[A];)A--;for(;1<=E&&0<=A;E--,A--)if(p[E]!==g[A]){if(E!==1||A!==1)do if(E--,A--,0>A||p[E]!==g[A]){var O=`
`+p[E].replace(" at new "," at ");return r.displayName&&O.includes("<anonymous>")&&(O=O.replace("<anonymous>",r.displayName)),O}while(1<=E&&0<=A);break}}}finally{Se=!1,Error.prepareStackTrace=a}return(r=r?r.displayName||r.name:"")?Y(r):""}function Re(r){switch(r.tag){case 5:return Y(r.type);case 16:return Y("Lazy");case 13:return Y("Suspense");case 19:return Y("SuspenseList");case 0:case 2:case 15:return r=Ce(r.type,!1),r;case 11:return r=Ce(r.type.render,!1),r;case 1:return r=Ce(r.type,!0),r;default:return""}}function Ae(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case k:return"Fragment";case se:return"Portal";case C:return"Profiler";case S:return"StrictMode";case R:return"Suspense";case Oe:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case D:return(r.displayName||"Context")+".Consumer";case b:return(r._context.displayName||"Context")+".Provider";case F:var i=r.render;return r=r.displayName,r||(r=i.displayName||i.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case _t:return i=r.displayName||null,i!==null?i:Ae(r.type)||"Memo";case wt:i=r._payload,r=r._init;try{return Ae(r(i))}catch{}}return null}function Ue(r){var i=r.type;switch(r.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=i.render,r=r.displayName||r.name||"",i.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ae(i);case 8:return i===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function Ve(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function qe(r){var i=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Qt(r){var i=qe(r)?"checked":"value",a=Object.getOwnPropertyDescriptor(r.constructor.prototype,i),h=""+r[i];if(!r.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var p=a.get,g=a.set;return Object.defineProperty(r,i,{configurable:!0,get:function(){return p.call(this)},set:function(E){h=""+E,g.call(this,E)}}),Object.defineProperty(r,i,{enumerable:a.enumerable}),{getValue:function(){return h},setValue:function(E){h=""+E},stopTracking:function(){r._valueTracker=null,delete r[i]}}}}function Qi(r){r._valueTracker||(r._valueTracker=Qt(r))}function ua(r){if(!r)return!1;var i=r._valueTracker;if(!i)return!0;var a=i.getValue(),h="";return r&&(h=qe(r)?r.checked?"true":"false":r.value),r=h,r!==a?(i.setValue(r),!0):!1}function rs(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function Yi(r,i){var a=i.checked;return ce({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??r._wrapperState.initialChecked})}function nu(r,i){var a=i.defaultValue==null?"":i.defaultValue,h=i.checked!=null?i.checked:i.defaultChecked;a=Ve(i.value!=null?i.value:a),r._wrapperState={initialChecked:h,initialValue:a,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function Xi(r,i){i=i.checked,i!=null&&Z(r,"checked",i,!1)}function si(r,i){Xi(r,i);var a=Ve(i.value),h=i.type;if(a!=null)h==="number"?(a===0&&r.value===""||r.value!=a)&&(r.value=""+a):r.value!==""+a&&(r.value=""+a);else if(h==="submit"||h==="reset"){r.removeAttribute("value");return}i.hasOwnProperty("value")?ft(r,i.type,a):i.hasOwnProperty("defaultValue")&&ft(r,i.type,Ve(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(r.defaultChecked=!!i.defaultChecked)}function ca(r,i,a){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var h=i.type;if(!(h!=="submit"&&h!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+r._wrapperState.initialValue,a||i===r.value||(r.value=i),r.defaultValue=i}a=r.name,a!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,a!==""&&(r.name=a)}function ft(r,i,a){(i!=="number"||rs(r.ownerDocument)!==r)&&(a==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+a&&(r.defaultValue=""+a))}var at=Array.isArray;function On(r,i,a,h){if(r=r.options,i){i={};for(var p=0;p<a.length;p++)i["$"+a[p]]=!0;for(a=0;a<r.length;a++)p=i.hasOwnProperty("$"+r[a].value),r[a].selected!==p&&(r[a].selected=p),p&&h&&(r[a].defaultSelected=!0)}else{for(a=""+Ve(a),i=null,p=0;p<r.length;p++){if(r[p].value===a){r[p].selected=!0,h&&(r[p].defaultSelected=!0);return}i!==null||r[p].disabled||(i=r[p])}i!==null&&(i.selected=!0)}}function ha(r,i){if(i.dangerouslySetInnerHTML!=null)throw Error(t(91));return ce({},i,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function da(r,i){var a=i.value;if(a==null){if(a=i.children,i=i.defaultValue,a!=null){if(i!=null)throw Error(t(92));if(at(a)){if(1<a.length)throw Error(t(93));a=a[0]}i=a}i==null&&(i=""),a=i}r._wrapperState={initialValue:Ve(a)}}function ru(r,i){var a=Ve(i.value),h=Ve(i.defaultValue);a!=null&&(a=""+a,a!==r.value&&(r.value=a),i.defaultValue==null&&r.defaultValue!==a&&(r.defaultValue=a)),h!=null&&(r.defaultValue=""+h)}function ss(r){var i=r.textContent;i===r._wrapperState.initialValue&&i!==""&&i!==null&&(r.value=i)}function fa(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ji(r,i){return r==null||r==="http://www.w3.org/1999/xhtml"?fa(i):r==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var is,su=(function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,a,h,p){MSApp.execUnsafeLocalFunction(function(){return r(i,a,h,p)})}:r})(function(r,i){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=i;else{for(is=is||document.createElement("div"),is.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=is.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;i.firstChild;)r.appendChild(i.firstChild)}});function ii(r,i){if(i){var a=r.firstChild;if(a&&a===r.lastChild&&a.nodeType===3){a.nodeValue=i;return}}r.textContent=i}var os={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},iu=["Webkit","ms","Moz","O"];Object.keys(os).forEach(function(r){iu.forEach(function(i){i=i+r.charAt(0).toUpperCase()+r.substring(1),os[i]=os[r]})});function as(r,i,a){return i==null||typeof i=="boolean"||i===""?"":a||typeof i!="number"||i===0||os.hasOwnProperty(r)&&os[r]?(""+i).trim():i+"px"}function Zi(r,i){r=r.style;for(var a in i)if(i.hasOwnProperty(a)){var h=a.indexOf("--")===0,p=as(a,i[a],h);a==="float"&&(a="cssFloat"),h?r.setProperty(a,p):r[a]=p}}var pa=ce({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ln(r,i){if(i){if(pa[r]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(t(137,r));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(t(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(t(61))}if(i.style!=null&&typeof i.style!="object")throw Error(t(62))}}function eo(r,i){if(r.indexOf("-")===-1)return typeof i.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ls=null;function to(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Rr=null,Ar=null,it=null;function ma(r){if(r=Ba(r)){if(typeof Rr!="function")throw Error(t(280));var i=r.stateNode;i&&(i=Nu(i),Rr(r.stateNode,r.type,i))}}function us(r){Ar?it?it.push(r):it=[r]:Ar=r}function cs(){if(Ar){var r=Ar,i=it;if(it=Ar=null,ma(r),i)for(r=0;r<i.length;r++)ma(i[r])}}function ou(r,i){return r(i)}function au(){}var Xn=!1;function lu(r,i,a){if(Xn)return r(i,a);Xn=!0;try{return ou(r,i,a)}finally{Xn=!1,(Ar!==null||it!==null)&&(au(),cs())}}function oi(r,i){var a=r.stateNode;if(a===null)return null;var h=Nu(a);if(h===null)return null;a=h[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(r=r.type,h=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!h;break e;default:r=!1}if(r)return null;if(a&&typeof a!="function")throw Error(t(231,i,typeof a));return a}var hs=!1;if(d)try{var ds={};Object.defineProperty(ds,"passive",{get:function(){hs=!0}}),window.addEventListener("test",ds,ds),window.removeEventListener("test",ds,ds)}catch{hs=!1}function uu(r,i,a,h,p,g,E,A,O){var q=Array.prototype.slice.call(arguments,3);try{i.apply(a,q)}catch(J){this.onError(J)}}var Pr=!1,Jn=null,no=!1,En=null,cu={onError:function(r){Pr=!0,Jn=r}};function hu(r,i,a,h,p,g,E,A,O){Pr=!1,Jn=null,uu.apply(cu,arguments)}function ga(r,i,a,h,p,g,E,A,O){if(hu.apply(this,arguments),Pr){if(Pr){var q=Jn;Pr=!1,Jn=null}else throw Error(t(198));no||(no=!0,En=q)}}function Vn(r){var i=r,a=r;if(r.alternate)for(;i.return;)i=i.return;else{r=i;do i=r,(i.flags&4098)!==0&&(a=i.return),r=i.return;while(r)}return i.tag===3?a:null}function ya(r){if(r.tag===13){var i=r.memoizedState;if(i===null&&(r=r.alternate,r!==null&&(i=r.memoizedState)),i!==null)return i.dehydrated}return null}function du(r){if(Vn(r)!==r)throw Error(t(188))}function fu(r){var i=r.alternate;if(!i){if(i=Vn(r),i===null)throw Error(t(188));return i!==r?null:r}for(var a=r,h=i;;){var p=a.return;if(p===null)break;var g=p.alternate;if(g===null){if(h=p.return,h!==null){a=h;continue}break}if(p.child===g.child){for(g=p.child;g;){if(g===a)return du(p),r;if(g===h)return du(p),i;g=g.sibling}throw Error(t(188))}if(a.return!==h.return)a=p,h=g;else{for(var E=!1,A=p.child;A;){if(A===a){E=!0,a=p,h=g;break}if(A===h){E=!0,h=p,a=g;break}A=A.sibling}if(!E){for(A=g.child;A;){if(A===a){E=!0,a=g,h=p;break}if(A===h){E=!0,h=g,a=p;break}A=A.sibling}if(!E)throw Error(t(189))}}if(a.alternate!==h)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?r:i}function pu(r){return r=fu(r),r!==null?ai(r):null}function ai(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var i=ai(r);if(i!==null)return i;r=r.sibling}return null}var va=e.unstable_scheduleCallback,ro=e.unstable_cancelCallback,li=e.unstable_shouldYield,br=e.unstable_requestPaint,Ke=e.unstable_now,Mh=e.unstable_getCurrentPriorityLevel,so=e.unstable_ImmediatePriority,_a=e.unstable_UserBlockingPriority,ui=e.unstable_NormalPriority,wa=e.unstable_LowPriority,io=e.unstable_IdlePriority,ci=null,hn=null;function mu(r){if(hn&&typeof hn.onCommitFiberRoot=="function")try{hn.onCommitFiberRoot(ci,r,void 0,(r.current.flags&128)===128)}catch{}}var dn=Math.clz32?Math.clz32:hi,Zn=Math.log,xn=Math.LN2;function hi(r){return r>>>=0,r===0?32:31-(Zn(r)/xn|0)|0}var er=64,fs=4194304;function Fe(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function Nr(r,i){var a=r.pendingLanes;if(a===0)return 0;var h=0,p=r.suspendedLanes,g=r.pingedLanes,E=a&268435455;if(E!==0){var A=E&~p;A!==0?h=Fe(A):(g&=E,g!==0&&(h=Fe(g)))}else E=a&~p,E!==0?h=Fe(E):g!==0&&(h=Fe(g));if(h===0)return 0;if(i!==0&&i!==h&&(i&p)===0&&(p=h&-h,g=i&-i,p>=g||p===16&&(g&4194240)!==0))return i;if((h&4)!==0&&(h|=a&16),i=r.entangledLanes,i!==0)for(r=r.entanglements,i&=h;0<i;)a=31-dn(i),p=1<<a,h|=r[a],i&=~p;return h}function di(r,i){switch(r){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function fi(r,i){for(var a=r.suspendedLanes,h=r.pingedLanes,p=r.expirationTimes,g=r.pendingLanes;0<g;){var E=31-dn(g),A=1<<E,O=p[E];O===-1?((A&a)===0||(A&h)!==0)&&(p[E]=di(A,i)):O<=i&&(r.expiredLanes|=A),g&=~A}}function Ea(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function xa(){var r=er;return er<<=1,(er&4194240)===0&&(er=64),r}function Ta(r){for(var i=[],a=0;31>a;a++)i.push(r);return i}function pi(r,i,a){r.pendingLanes|=i,i!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,i=31-dn(i),r[i]=a}function jh(r,i){var a=r.pendingLanes&~i;r.pendingLanes=i,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=i,r.mutableReadLanes&=i,r.entangledLanes&=i,i=r.entanglements;var h=r.eventTimes;for(r=r.expirationTimes;0<a;){var p=31-dn(a),g=1<<p;i[p]=0,h[p]=-1,r[p]=-1,a&=~g}}function Ia(r,i){var a=r.entangledLanes|=i;for(r=r.entanglements;a;){var h=31-dn(a),p=1<<h;p&i|r[h]&i&&(r[h]|=i),a&=~p}}var De=0;function tr(r){return r&=-r,1<r?4<r?(r&268435455)!==0?16:536870912:4:1}var Sa,oo,Ca,ka,Ra,nr=!1,ao=[],rr=null,sr=null,At=null,mi=new Map,Dr=new Map,fn=[],gu="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ps(r,i){switch(r){case"focusin":case"focusout":rr=null;break;case"dragenter":case"dragleave":sr=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":mi.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dr.delete(i.pointerId)}}function Mn(r,i,a,h,p,g){return r===null||r.nativeEvent!==g?(r={blockedOn:i,domEventName:a,eventSystemFlags:h,nativeEvent:g,targetContainers:[p]},i!==null&&(i=Ba(i),i!==null&&oo(i)),r):(r.eventSystemFlags|=h,i=r.targetContainers,p!==null&&i.indexOf(p)===-1&&i.push(p),r)}function yu(r,i,a,h,p){switch(i){case"focusin":return rr=Mn(rr,r,i,a,h,p),!0;case"dragenter":return sr=Mn(sr,r,i,a,h,p),!0;case"mouseover":return At=Mn(At,r,i,a,h,p),!0;case"pointerover":var g=p.pointerId;return mi.set(g,Mn(mi.get(g)||null,r,i,a,h,p)),!0;case"gotpointercapture":return g=p.pointerId,Dr.set(g,Mn(Dr.get(g)||null,r,i,a,h,p)),!0}return!1}function lo(r){var i=_i(r.target);if(i!==null){var a=Vn(i);if(a!==null){if(i=a.tag,i===13){if(i=ya(a),i!==null){r.blockedOn=i,Ra(r.priority,function(){Ca(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){r.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}r.blockedOn=null}function He(r){if(r.blockedOn!==null)return!1;for(var i=r.targetContainers;0<i.length;){var a=uo(r.domEventName,r.eventSystemFlags,i[0],r.nativeEvent);if(a===null){a=r.nativeEvent;var h=new a.constructor(a.type,a);ls=h,a.target.dispatchEvent(h),ls=null}else return i=Ba(a),i!==null&&oo(i),r.blockedOn=a,!1;i.shift()}return!0}function vu(r,i,a){He(r)&&a.delete(i)}function Fh(){nr=!1,rr!==null&&He(rr)&&(rr=null),sr!==null&&He(sr)&&(sr=null),At!==null&&He(At)&&(At=null),mi.forEach(vu),Dr.forEach(vu)}function ms(r,i){r.blockedOn===i&&(r.blockedOn=null,nr||(nr=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Fh)))}function gs(r){function i(p){return ms(p,r)}if(0<ao.length){ms(ao[0],r);for(var a=1;a<ao.length;a++){var h=ao[a];h.blockedOn===r&&(h.blockedOn=null)}}for(rr!==null&&ms(rr,r),sr!==null&&ms(sr,r),At!==null&&ms(At,r),mi.forEach(i),Dr.forEach(i),a=0;a<fn.length;a++)h=fn[a],h.blockedOn===r&&(h.blockedOn=null);for(;0<fn.length&&(a=fn[0],a.blockedOn===null);)lo(a),a.blockedOn===null&&fn.shift()}var Or=ne.ReactCurrentBatchConfig,Lr=!0;function ir(r,i,a,h){var p=De,g=Or.transition;Or.transition=null;try{De=1,Aa(r,i,a,h)}finally{De=p,Or.transition=g}}function _u(r,i,a,h){var p=De,g=Or.transition;Or.transition=null;try{De=4,Aa(r,i,a,h)}finally{De=p,Or.transition=g}}function Aa(r,i,a,h){if(Lr){var p=uo(r,i,a,h);if(p===null)Yh(r,i,h,or,a),ps(r,h);else if(yu(p,r,i,a,h))h.stopPropagation();else if(ps(r,h),i&4&&-1<gu.indexOf(r)){for(;p!==null;){var g=Ba(p);if(g!==null&&Sa(g),g=uo(r,i,a,h),g===null&&Yh(r,i,h,or,a),g===p)break;p=g}p!==null&&h.stopPropagation()}else Yh(r,i,h,null,a)}}var or=null;function uo(r,i,a,h){if(or=null,r=to(h),r=_i(r),r!==null)if(i=Vn(r),i===null)r=null;else if(a=i.tag,a===13){if(r=ya(i),r!==null)return r;r=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;r=null}else i!==r&&(r=null);return or=r,null}function co(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Mh()){case so:return 1;case _a:return 4;case ui:case wa:return 16;case io:return 536870912;default:return 16}default:return 16}}var pn=null,ho=null,Vr=null;function wu(){if(Vr)return Vr;var r,i=ho,a=i.length,h,p="value"in pn?pn.value:pn.textContent,g=p.length;for(r=0;r<a&&i[r]===p[r];r++);var E=a-r;for(h=1;h<=E&&i[a-h]===p[g-h];h++);return Vr=p.slice(r,1<h?1-h:void 0)}function gi(r){var i=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&i===13&&(r=13)):r=i,r===10&&(r=13),32<=r||r===13?r:0}function ar(){return!0}function Pa(){return!1}function Ft(r){function i(a,h,p,g,E){this._reactName=a,this._targetInst=p,this.type=h,this.nativeEvent=g,this.target=E,this.currentTarget=null;for(var A in r)r.hasOwnProperty(A)&&(a=r[A],this[A]=a?a(g):g[A]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?ar:Pa,this.isPropagationStopped=Pa,this}return ce(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=ar)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=ar)},persist:function(){},isPersistent:ar}),i}var lr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},yi=Ft(lr),ys=ce({},lr,{view:0,detail:0}),fo=Ft(ys),po,mo,mn,vi=ce({},ys,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Te,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==mn&&(mn&&r.type==="mousemove"?(po=r.screenX-mn.screenX,mo=r.screenY-mn.screenY):mo=po=0,mn=r),po)},movementY:function(r){return"movementY"in r?r.movementY:mo}}),ba=Ft(vi),Eu=ce({},vi,{dataTransfer:0}),xu=Ft(Eu),go=ce({},ys,{relatedTarget:0}),Pt=Ft(go),Tu=ce({},lr,{animationName:0,elapsedTime:0,pseudoElement:0}),Iu=Ft(Tu),vs=ce({},lr,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),u=Ft(vs),v=ce({},lr,{data:0}),w=Ft(v),I={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},B={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},H={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ie(r){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(r):(r=H[r])?!!i[r]:!1}function Te(){return ie}var lt=ce({},ys,{key:function(r){if(r.key){var i=I[r.key]||r.key;if(i!=="Unidentified")return i}return r.type==="keypress"?(r=gi(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?B[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Te,charCode:function(r){return r.type==="keypress"?gi(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?gi(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),ze=Ft(lt),pt=ce({},vi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),gn=Ft(pt),Mr=ce({},ys,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Te}),ur=Ft(Mr),cr=ce({},lr,{propertyName:0,elapsedTime:0,pseudoElement:0}),yo=Ft(cr),Na=ce({},vi,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),WE=Ft(Na),GE=[9,13,27,32],Uh=d&&"CompositionEvent"in window,Da=null;d&&"documentMode"in document&&(Da=document.documentMode);var KE=d&&"TextEvent"in window&&!Da,Im=d&&(!Uh||Da&&8<Da&&11>=Da),Sm=" ",Cm=!1;function km(r,i){switch(r){case"keyup":return GE.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Rm(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var vo=!1;function QE(r,i){switch(r){case"compositionend":return Rm(i);case"keypress":return i.which!==32?null:(Cm=!0,Sm);case"textInput":return r=i.data,r===Sm&&Cm?null:r;default:return null}}function YE(r,i){if(vo)return r==="compositionend"||!Uh&&km(r,i)?(r=wu(),Vr=ho=pn=null,vo=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Im&&i.locale!=="ko"?null:i.data;default:return null}}var XE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Am(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i==="input"?!!XE[r.type]:i==="textarea"}function Pm(r,i,a,h){us(h),i=Au(i,"onChange"),0<i.length&&(a=new yi("onChange","change",null,a,h),r.push({event:a,listeners:i}))}var Oa=null,La=null;function JE(r){Km(r,0)}function Su(r){var i=To(r);if(ua(i))return r}function ZE(r,i){if(r==="change")return i}var bm=!1;if(d){var $h;if(d){var Bh="oninput"in document;if(!Bh){var Nm=document.createElement("div");Nm.setAttribute("oninput","return;"),Bh=typeof Nm.oninput=="function"}$h=Bh}else $h=!1;bm=$h&&(!document.documentMode||9<document.documentMode)}function Dm(){Oa&&(Oa.detachEvent("onpropertychange",Om),La=Oa=null)}function Om(r){if(r.propertyName==="value"&&Su(La)){var i=[];Pm(i,La,r,to(r)),lu(JE,i)}}function ex(r,i,a){r==="focusin"?(Dm(),Oa=i,La=a,Oa.attachEvent("onpropertychange",Om)):r==="focusout"&&Dm()}function tx(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Su(La)}function nx(r,i){if(r==="click")return Su(i)}function rx(r,i){if(r==="input"||r==="change")return Su(i)}function sx(r,i){return r===i&&(r!==0||1/r===1/i)||r!==r&&i!==i}var jn=typeof Object.is=="function"?Object.is:sx;function Va(r,i){if(jn(r,i))return!0;if(typeof r!="object"||r===null||typeof i!="object"||i===null)return!1;var a=Object.keys(r),h=Object.keys(i);if(a.length!==h.length)return!1;for(h=0;h<a.length;h++){var p=a[h];if(!f.call(i,p)||!jn(r[p],i[p]))return!1}return!0}function Lm(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Vm(r,i){var a=Lm(r);r=0;for(var h;a;){if(a.nodeType===3){if(h=r+a.textContent.length,r<=i&&h>=i)return{node:a,offset:i-r};r=h}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Lm(a)}}function Mm(r,i){return r&&i?r===i?!0:r&&r.nodeType===3?!1:i&&i.nodeType===3?Mm(r,i.parentNode):"contains"in r?r.contains(i):r.compareDocumentPosition?!!(r.compareDocumentPosition(i)&16):!1:!1}function jm(){for(var r=window,i=rs();i instanceof r.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)r=i.contentWindow;else break;i=rs(r.document)}return i}function zh(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i&&(i==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||i==="textarea"||r.contentEditable==="true")}function ix(r){var i=jm(),a=r.focusedElem,h=r.selectionRange;if(i!==a&&a&&a.ownerDocument&&Mm(a.ownerDocument.documentElement,a)){if(h!==null&&zh(a)){if(i=h.start,r=h.end,r===void 0&&(r=i),"selectionStart"in a)a.selectionStart=i,a.selectionEnd=Math.min(r,a.value.length);else if(r=(i=a.ownerDocument||document)&&i.defaultView||window,r.getSelection){r=r.getSelection();var p=a.textContent.length,g=Math.min(h.start,p);h=h.end===void 0?g:Math.min(h.end,p),!r.extend&&g>h&&(p=h,h=g,g=p),p=Vm(a,g);var E=Vm(a,h);p&&E&&(r.rangeCount!==1||r.anchorNode!==p.node||r.anchorOffset!==p.offset||r.focusNode!==E.node||r.focusOffset!==E.offset)&&(i=i.createRange(),i.setStart(p.node,p.offset),r.removeAllRanges(),g>h?(r.addRange(i),r.extend(E.node,E.offset)):(i.setEnd(E.node,E.offset),r.addRange(i)))}}for(i=[],r=a;r=r.parentNode;)r.nodeType===1&&i.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<i.length;a++)r=i[a],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var ox=d&&"documentMode"in document&&11>=document.documentMode,_o=null,qh=null,Ma=null,Hh=!1;function Fm(r,i,a){var h=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Hh||_o==null||_o!==rs(h)||(h=_o,"selectionStart"in h&&zh(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),Ma&&Va(Ma,h)||(Ma=h,h=Au(qh,"onSelect"),0<h.length&&(i=new yi("onSelect","select",null,i,a),r.push({event:i,listeners:h}),i.target=_o)))}function Cu(r,i){var a={};return a[r.toLowerCase()]=i.toLowerCase(),a["Webkit"+r]="webkit"+i,a["Moz"+r]="moz"+i,a}var wo={animationend:Cu("Animation","AnimationEnd"),animationiteration:Cu("Animation","AnimationIteration"),animationstart:Cu("Animation","AnimationStart"),transitionend:Cu("Transition","TransitionEnd")},Wh={},Um={};d&&(Um=document.createElement("div").style,"AnimationEvent"in window||(delete wo.animationend.animation,delete wo.animationiteration.animation,delete wo.animationstart.animation),"TransitionEvent"in window||delete wo.transitionend.transition);function ku(r){if(Wh[r])return Wh[r];if(!wo[r])return r;var i=wo[r],a;for(a in i)if(i.hasOwnProperty(a)&&a in Um)return Wh[r]=i[a];return r}var $m=ku("animationend"),Bm=ku("animationiteration"),zm=ku("animationstart"),qm=ku("transitionend"),Hm=new Map,Wm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function _s(r,i){Hm.set(r,i),l(i,[r])}for(var Gh=0;Gh<Wm.length;Gh++){var Kh=Wm[Gh],ax=Kh.toLowerCase(),lx=Kh[0].toUpperCase()+Kh.slice(1);_s(ax,"on"+lx)}_s($m,"onAnimationEnd"),_s(Bm,"onAnimationIteration"),_s(zm,"onAnimationStart"),_s("dblclick","onDoubleClick"),_s("focusin","onFocus"),_s("focusout","onBlur"),_s(qm,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ja="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ux=new Set("cancel close invalid load scroll toggle".split(" ").concat(ja));function Gm(r,i,a){var h=r.type||"unknown-event";r.currentTarget=a,ga(h,i,void 0,r),r.currentTarget=null}function Km(r,i){i=(i&4)!==0;for(var a=0;a<r.length;a++){var h=r[a],p=h.event;h=h.listeners;e:{var g=void 0;if(i)for(var E=h.length-1;0<=E;E--){var A=h[E],O=A.instance,q=A.currentTarget;if(A=A.listener,O!==g&&p.isPropagationStopped())break e;Gm(p,A,q),g=O}else for(E=0;E<h.length;E++){if(A=h[E],O=A.instance,q=A.currentTarget,A=A.listener,O!==g&&p.isPropagationStopped())break e;Gm(p,A,q),g=O}}}if(no)throw r=En,no=!1,En=null,r}function Qe(r,i){var a=i[nd];a===void 0&&(a=i[nd]=new Set);var h=r+"__bubble";a.has(h)||(Qm(i,r,2,!1),a.add(h))}function Qh(r,i,a){var h=0;i&&(h|=4),Qm(a,r,h,i)}var Ru="_reactListening"+Math.random().toString(36).slice(2);function Fa(r){if(!r[Ru]){r[Ru]=!0,s.forEach(function(a){a!=="selectionchange"&&(ux.has(a)||Qh(a,!1,r),Qh(a,!0,r))});var i=r.nodeType===9?r:r.ownerDocument;i===null||i[Ru]||(i[Ru]=!0,Qh("selectionchange",!1,i))}}function Qm(r,i,a,h){switch(co(i)){case 1:var p=ir;break;case 4:p=_u;break;default:p=Aa}a=p.bind(null,i,a,r),p=void 0,!hs||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(p=!0),h?p!==void 0?r.addEventListener(i,a,{capture:!0,passive:p}):r.addEventListener(i,a,!0):p!==void 0?r.addEventListener(i,a,{passive:p}):r.addEventListener(i,a,!1)}function Yh(r,i,a,h,p){var g=h;if((i&1)===0&&(i&2)===0&&h!==null)e:for(;;){if(h===null)return;var E=h.tag;if(E===3||E===4){var A=h.stateNode.containerInfo;if(A===p||A.nodeType===8&&A.parentNode===p)break;if(E===4)for(E=h.return;E!==null;){var O=E.tag;if((O===3||O===4)&&(O=E.stateNode.containerInfo,O===p||O.nodeType===8&&O.parentNode===p))return;E=E.return}for(;A!==null;){if(E=_i(A),E===null)return;if(O=E.tag,O===5||O===6){h=g=E;continue e}A=A.parentNode}}h=h.return}lu(function(){var q=g,J=to(a),te=[];e:{var X=Hm.get(r);if(X!==void 0){var le=yi,de=r;switch(r){case"keypress":if(gi(a)===0)break e;case"keydown":case"keyup":le=ze;break;case"focusin":de="focus",le=Pt;break;case"focusout":de="blur",le=Pt;break;case"beforeblur":case"afterblur":le=Pt;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":le=ba;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":le=xu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":le=ur;break;case $m:case Bm:case zm:le=Iu;break;case qm:le=yo;break;case"scroll":le=fo;break;case"wheel":le=WE;break;case"copy":case"cut":case"paste":le=u;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":le=gn}var fe=(i&4)!==0,ut=!fe&&r==="scroll",$=fe?X!==null?X+"Capture":null:X;fe=[];for(var M=q,z;M!==null;){z=M;var re=z.stateNode;if(z.tag===5&&re!==null&&(z=re,$!==null&&(re=oi(M,$),re!=null&&fe.push(Ua(M,re,z)))),ut)break;M=M.return}0<fe.length&&(X=new le(X,de,null,a,J),te.push({event:X,listeners:fe}))}}if((i&7)===0){e:{if(X=r==="mouseover"||r==="pointerover",le=r==="mouseout"||r==="pointerout",X&&a!==ls&&(de=a.relatedTarget||a.fromElement)&&(_i(de)||de[jr]))break e;if((le||X)&&(X=J.window===J?J:(X=J.ownerDocument)?X.defaultView||X.parentWindow:window,le?(de=a.relatedTarget||a.toElement,le=q,de=de?_i(de):null,de!==null&&(ut=Vn(de),de!==ut||de.tag!==5&&de.tag!==6)&&(de=null)):(le=null,de=q),le!==de)){if(fe=ba,re="onMouseLeave",$="onMouseEnter",M="mouse",(r==="pointerout"||r==="pointerover")&&(fe=gn,re="onPointerLeave",$="onPointerEnter",M="pointer"),ut=le==null?X:To(le),z=de==null?X:To(de),X=new fe(re,M+"leave",le,a,J),X.target=ut,X.relatedTarget=z,re=null,_i(J)===q&&(fe=new fe($,M+"enter",de,a,J),fe.target=z,fe.relatedTarget=ut,re=fe),ut=re,le&&de)t:{for(fe=le,$=de,M=0,z=fe;z;z=Eo(z))M++;for(z=0,re=$;re;re=Eo(re))z++;for(;0<M-z;)fe=Eo(fe),M--;for(;0<z-M;)$=Eo($),z--;for(;M--;){if(fe===$||$!==null&&fe===$.alternate)break t;fe=Eo(fe),$=Eo($)}fe=null}else fe=null;le!==null&&Ym(te,X,le,fe,!1),de!==null&&ut!==null&&Ym(te,ut,de,fe,!0)}}e:{if(X=q?To(q):window,le=X.nodeName&&X.nodeName.toLowerCase(),le==="select"||le==="input"&&X.type==="file")var pe=ZE;else if(Am(X))if(bm)pe=rx;else{pe=tx;var ye=ex}else(le=X.nodeName)&&le.toLowerCase()==="input"&&(X.type==="checkbox"||X.type==="radio")&&(pe=nx);if(pe&&(pe=pe(r,q))){Pm(te,pe,a,J);break e}ye&&ye(r,X,q),r==="focusout"&&(ye=X._wrapperState)&&ye.controlled&&X.type==="number"&&ft(X,"number",X.value)}switch(ye=q?To(q):window,r){case"focusin":(Am(ye)||ye.contentEditable==="true")&&(_o=ye,qh=q,Ma=null);break;case"focusout":Ma=qh=_o=null;break;case"mousedown":Hh=!0;break;case"contextmenu":case"mouseup":case"dragend":Hh=!1,Fm(te,a,J);break;case"selectionchange":if(ox)break;case"keydown":case"keyup":Fm(te,a,J)}var ve;if(Uh)e:{switch(r){case"compositionstart":var Ee="onCompositionStart";break e;case"compositionend":Ee="onCompositionEnd";break e;case"compositionupdate":Ee="onCompositionUpdate";break e}Ee=void 0}else vo?km(r,a)&&(Ee="onCompositionEnd"):r==="keydown"&&a.keyCode===229&&(Ee="onCompositionStart");Ee&&(Im&&a.locale!=="ko"&&(vo||Ee!=="onCompositionStart"?Ee==="onCompositionEnd"&&vo&&(ve=wu()):(pn=J,ho="value"in pn?pn.value:pn.textContent,vo=!0)),ye=Au(q,Ee),0<ye.length&&(Ee=new w(Ee,r,null,a,J),te.push({event:Ee,listeners:ye}),ve?Ee.data=ve:(ve=Rm(a),ve!==null&&(Ee.data=ve)))),(ve=KE?QE(r,a):YE(r,a))&&(q=Au(q,"onBeforeInput"),0<q.length&&(J=new w("onBeforeInput","beforeinput",null,a,J),te.push({event:J,listeners:q}),J.data=ve))}Km(te,i)})}function Ua(r,i,a){return{instance:r,listener:i,currentTarget:a}}function Au(r,i){for(var a=i+"Capture",h=[];r!==null;){var p=r,g=p.stateNode;p.tag===5&&g!==null&&(p=g,g=oi(r,a),g!=null&&h.unshift(Ua(r,g,p)),g=oi(r,i),g!=null&&h.push(Ua(r,g,p))),r=r.return}return h}function Eo(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function Ym(r,i,a,h,p){for(var g=i._reactName,E=[];a!==null&&a!==h;){var A=a,O=A.alternate,q=A.stateNode;if(O!==null&&O===h)break;A.tag===5&&q!==null&&(A=q,p?(O=oi(a,g),O!=null&&E.unshift(Ua(a,O,A))):p||(O=oi(a,g),O!=null&&E.push(Ua(a,O,A)))),a=a.return}E.length!==0&&r.push({event:i,listeners:E})}var cx=/\r\n?/g,hx=/\u0000|\uFFFD/g;function Xm(r){return(typeof r=="string"?r:""+r).replace(cx,`
`).replace(hx,"")}function Pu(r,i,a){if(i=Xm(i),Xm(r)!==i&&a)throw Error(t(425))}function bu(){}var Xh=null,Jh=null;function Zh(r,i){return r==="textarea"||r==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var ed=typeof setTimeout=="function"?setTimeout:void 0,dx=typeof clearTimeout=="function"?clearTimeout:void 0,Jm=typeof Promise=="function"?Promise:void 0,fx=typeof queueMicrotask=="function"?queueMicrotask:typeof Jm<"u"?function(r){return Jm.resolve(null).then(r).catch(px)}:ed;function px(r){setTimeout(function(){throw r})}function td(r,i){var a=i,h=0;do{var p=a.nextSibling;if(r.removeChild(a),p&&p.nodeType===8)if(a=p.data,a==="/$"){if(h===0){r.removeChild(p),gs(i);return}h--}else a!=="$"&&a!=="$?"&&a!=="$!"||h++;a=p}while(a);gs(i)}function ws(r){for(;r!=null;r=r.nextSibling){var i=r.nodeType;if(i===1||i===3)break;if(i===8){if(i=r.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return r}function Zm(r){r=r.previousSibling;for(var i=0;r;){if(r.nodeType===8){var a=r.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return r;i--}else a==="/$"&&i++}r=r.previousSibling}return null}var xo=Math.random().toString(36).slice(2),hr="__reactFiber$"+xo,$a="__reactProps$"+xo,jr="__reactContainer$"+xo,nd="__reactEvents$"+xo,mx="__reactListeners$"+xo,gx="__reactHandles$"+xo;function _i(r){var i=r[hr];if(i)return i;for(var a=r.parentNode;a;){if(i=a[jr]||a[hr]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(r=Zm(r);r!==null;){if(a=r[hr])return a;r=Zm(r)}return i}r=a,a=r.parentNode}return null}function Ba(r){return r=r[hr]||r[jr],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function To(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(t(33))}function Nu(r){return r[$a]||null}var rd=[],Io=-1;function Es(r){return{current:r}}function Ye(r){0>Io||(r.current=rd[Io],rd[Io]=null,Io--)}function We(r,i){Io++,rd[Io]=r.current,r.current=i}var xs={},Ut=Es(xs),en=Es(!1),wi=xs;function So(r,i){var a=r.type.contextTypes;if(!a)return xs;var h=r.stateNode;if(h&&h.__reactInternalMemoizedUnmaskedChildContext===i)return h.__reactInternalMemoizedMaskedChildContext;var p={},g;for(g in a)p[g]=i[g];return h&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=i,r.__reactInternalMemoizedMaskedChildContext=p),p}function tn(r){return r=r.childContextTypes,r!=null}function Du(){Ye(en),Ye(Ut)}function eg(r,i,a){if(Ut.current!==xs)throw Error(t(168));We(Ut,i),We(en,a)}function tg(r,i,a){var h=r.stateNode;if(i=i.childContextTypes,typeof h.getChildContext!="function")return a;h=h.getChildContext();for(var p in h)if(!(p in i))throw Error(t(108,Ue(r)||"Unknown",p));return ce({},a,h)}function Ou(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||xs,wi=Ut.current,We(Ut,r),We(en,en.current),!0}function ng(r,i,a){var h=r.stateNode;if(!h)throw Error(t(169));a?(r=tg(r,i,wi),h.__reactInternalMemoizedMergedChildContext=r,Ye(en),Ye(Ut),We(Ut,r)):Ye(en),We(en,a)}var Fr=null,Lu=!1,sd=!1;function rg(r){Fr===null?Fr=[r]:Fr.push(r)}function yx(r){Lu=!0,rg(r)}function Ts(){if(!sd&&Fr!==null){sd=!0;var r=0,i=De;try{var a=Fr;for(De=1;r<a.length;r++){var h=a[r];do h=h(!0);while(h!==null)}Fr=null,Lu=!1}catch(p){throw Fr!==null&&(Fr=Fr.slice(r+1)),va(so,Ts),p}finally{De=i,sd=!1}}return null}var Co=[],ko=0,Vu=null,Mu=0,Tn=[],In=0,Ei=null,Ur=1,$r="";function xi(r,i){Co[ko++]=Mu,Co[ko++]=Vu,Vu=r,Mu=i}function sg(r,i,a){Tn[In++]=Ur,Tn[In++]=$r,Tn[In++]=Ei,Ei=r;var h=Ur;r=$r;var p=32-dn(h)-1;h&=~(1<<p),a+=1;var g=32-dn(i)+p;if(30<g){var E=p-p%5;g=(h&(1<<E)-1).toString(32),h>>=E,p-=E,Ur=1<<32-dn(i)+p|a<<p|h,$r=g+r}else Ur=1<<g|a<<p|h,$r=r}function id(r){r.return!==null&&(xi(r,1),sg(r,1,0))}function od(r){for(;r===Vu;)Vu=Co[--ko],Co[ko]=null,Mu=Co[--ko],Co[ko]=null;for(;r===Ei;)Ei=Tn[--In],Tn[In]=null,$r=Tn[--In],Tn[In]=null,Ur=Tn[--In],Tn[In]=null}var yn=null,vn=null,Je=!1,Fn=null;function ig(r,i){var a=Rn(5,null,null,0);a.elementType="DELETED",a.stateNode=i,a.return=r,i=r.deletions,i===null?(r.deletions=[a],r.flags|=16):i.push(a)}function og(r,i){switch(r.tag){case 5:var a=r.type;return i=i.nodeType!==1||a.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(r.stateNode=i,yn=r,vn=ws(i.firstChild),!0):!1;case 6:return i=r.pendingProps===""||i.nodeType!==3?null:i,i!==null?(r.stateNode=i,yn=r,vn=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(a=Ei!==null?{id:Ur,overflow:$r}:null,r.memoizedState={dehydrated:i,treeContext:a,retryLane:1073741824},a=Rn(18,null,null,0),a.stateNode=i,a.return=r,r.child=a,yn=r,vn=null,!0):!1;default:return!1}}function ad(r){return(r.mode&1)!==0&&(r.flags&128)===0}function ld(r){if(Je){var i=vn;if(i){var a=i;if(!og(r,i)){if(ad(r))throw Error(t(418));i=ws(a.nextSibling);var h=yn;i&&og(r,i)?ig(h,a):(r.flags=r.flags&-4097|2,Je=!1,yn=r)}}else{if(ad(r))throw Error(t(418));r.flags=r.flags&-4097|2,Je=!1,yn=r}}}function ag(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;yn=r}function ju(r){if(r!==yn)return!1;if(!Je)return ag(r),Je=!0,!1;var i;if((i=r.tag!==3)&&!(i=r.tag!==5)&&(i=r.type,i=i!=="head"&&i!=="body"&&!Zh(r.type,r.memoizedProps)),i&&(i=vn)){if(ad(r))throw lg(),Error(t(418));for(;i;)ig(r,i),i=ws(i.nextSibling)}if(ag(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(t(317));e:{for(r=r.nextSibling,i=0;r;){if(r.nodeType===8){var a=r.data;if(a==="/$"){if(i===0){vn=ws(r.nextSibling);break e}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++}r=r.nextSibling}vn=null}}else vn=yn?ws(r.stateNode.nextSibling):null;return!0}function lg(){for(var r=vn;r;)r=ws(r.nextSibling)}function Ro(){vn=yn=null,Je=!1}function ud(r){Fn===null?Fn=[r]:Fn.push(r)}var vx=ne.ReactCurrentBatchConfig;function za(r,i,a){if(r=a.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var h=a.stateNode}if(!h)throw Error(t(147,r));var p=h,g=""+r;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===g?i.ref:(i=function(E){var A=p.refs;E===null?delete A[g]:A[g]=E},i._stringRef=g,i)}if(typeof r!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,r))}return r}function Fu(r,i){throw r=Object.prototype.toString.call(i),Error(t(31,r==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":r))}function ug(r){var i=r._init;return i(r._payload)}function cg(r){function i($,M){if(r){var z=$.deletions;z===null?($.deletions=[M],$.flags|=16):z.push(M)}}function a($,M){if(!r)return null;for(;M!==null;)i($,M),M=M.sibling;return null}function h($,M){for($=new Map;M!==null;)M.key!==null?$.set(M.key,M):$.set(M.index,M),M=M.sibling;return $}function p($,M){return $=bs($,M),$.index=0,$.sibling=null,$}function g($,M,z){return $.index=z,r?(z=$.alternate,z!==null?(z=z.index,z<M?($.flags|=2,M):z):($.flags|=2,M)):($.flags|=1048576,M)}function E($){return r&&$.alternate===null&&($.flags|=2),$}function A($,M,z,re){return M===null||M.tag!==6?(M=ef(z,$.mode,re),M.return=$,M):(M=p(M,z),M.return=$,M)}function O($,M,z,re){var pe=z.type;return pe===k?J($,M,z.props.children,re,z.key):M!==null&&(M.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===wt&&ug(pe)===M.type)?(re=p(M,z.props),re.ref=za($,M,z),re.return=$,re):(re=uc(z.type,z.key,z.props,null,$.mode,re),re.ref=za($,M,z),re.return=$,re)}function q($,M,z,re){return M===null||M.tag!==4||M.stateNode.containerInfo!==z.containerInfo||M.stateNode.implementation!==z.implementation?(M=tf(z,$.mode,re),M.return=$,M):(M=p(M,z.children||[]),M.return=$,M)}function J($,M,z,re,pe){return M===null||M.tag!==7?(M=Pi(z,$.mode,re,pe),M.return=$,M):(M=p(M,z),M.return=$,M)}function te($,M,z){if(typeof M=="string"&&M!==""||typeof M=="number")return M=ef(""+M,$.mode,z),M.return=$,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case ee:return z=uc(M.type,M.key,M.props,null,$.mode,z),z.ref=za($,null,M),z.return=$,z;case se:return M=tf(M,$.mode,z),M.return=$,M;case wt:var re=M._init;return te($,re(M._payload),z)}if(at(M)||ge(M))return M=Pi(M,$.mode,z,null),M.return=$,M;Fu($,M)}return null}function X($,M,z,re){var pe=M!==null?M.key:null;if(typeof z=="string"&&z!==""||typeof z=="number")return pe!==null?null:A($,M,""+z,re);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case ee:return z.key===pe?O($,M,z,re):null;case se:return z.key===pe?q($,M,z,re):null;case wt:return pe=z._init,X($,M,pe(z._payload),re)}if(at(z)||ge(z))return pe!==null?null:J($,M,z,re,null);Fu($,z)}return null}function le($,M,z,re,pe){if(typeof re=="string"&&re!==""||typeof re=="number")return $=$.get(z)||null,A(M,$,""+re,pe);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case ee:return $=$.get(re.key===null?z:re.key)||null,O(M,$,re,pe);case se:return $=$.get(re.key===null?z:re.key)||null,q(M,$,re,pe);case wt:var ye=re._init;return le($,M,z,ye(re._payload),pe)}if(at(re)||ge(re))return $=$.get(z)||null,J(M,$,re,pe,null);Fu(M,re)}return null}function de($,M,z,re){for(var pe=null,ye=null,ve=M,Ee=M=0,Ct=null;ve!==null&&Ee<z.length;Ee++){ve.index>Ee?(Ct=ve,ve=null):Ct=ve.sibling;var je=X($,ve,z[Ee],re);if(je===null){ve===null&&(ve=Ct);break}r&&ve&&je.alternate===null&&i($,ve),M=g(je,M,Ee),ye===null?pe=je:ye.sibling=je,ye=je,ve=Ct}if(Ee===z.length)return a($,ve),Je&&xi($,Ee),pe;if(ve===null){for(;Ee<z.length;Ee++)ve=te($,z[Ee],re),ve!==null&&(M=g(ve,M,Ee),ye===null?pe=ve:ye.sibling=ve,ye=ve);return Je&&xi($,Ee),pe}for(ve=h($,ve);Ee<z.length;Ee++)Ct=le(ve,$,Ee,z[Ee],re),Ct!==null&&(r&&Ct.alternate!==null&&ve.delete(Ct.key===null?Ee:Ct.key),M=g(Ct,M,Ee),ye===null?pe=Ct:ye.sibling=Ct,ye=Ct);return r&&ve.forEach(function(Ns){return i($,Ns)}),Je&&xi($,Ee),pe}function fe($,M,z,re){var pe=ge(z);if(typeof pe!="function")throw Error(t(150));if(z=pe.call(z),z==null)throw Error(t(151));for(var ye=pe=null,ve=M,Ee=M=0,Ct=null,je=z.next();ve!==null&&!je.done;Ee++,je=z.next()){ve.index>Ee?(Ct=ve,ve=null):Ct=ve.sibling;var Ns=X($,ve,je.value,re);if(Ns===null){ve===null&&(ve=Ct);break}r&&ve&&Ns.alternate===null&&i($,ve),M=g(Ns,M,Ee),ye===null?pe=Ns:ye.sibling=Ns,ye=Ns,ve=Ct}if(je.done)return a($,ve),Je&&xi($,Ee),pe;if(ve===null){for(;!je.done;Ee++,je=z.next())je=te($,je.value,re),je!==null&&(M=g(je,M,Ee),ye===null?pe=je:ye.sibling=je,ye=je);return Je&&xi($,Ee),pe}for(ve=h($,ve);!je.done;Ee++,je=z.next())je=le(ve,$,Ee,je.value,re),je!==null&&(r&&je.alternate!==null&&ve.delete(je.key===null?Ee:je.key),M=g(je,M,Ee),ye===null?pe=je:ye.sibling=je,ye=je);return r&&ve.forEach(function(Xx){return i($,Xx)}),Je&&xi($,Ee),pe}function ut($,M,z,re){if(typeof z=="object"&&z!==null&&z.type===k&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case ee:e:{for(var pe=z.key,ye=M;ye!==null;){if(ye.key===pe){if(pe=z.type,pe===k){if(ye.tag===7){a($,ye.sibling),M=p(ye,z.props.children),M.return=$,$=M;break e}}else if(ye.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===wt&&ug(pe)===ye.type){a($,ye.sibling),M=p(ye,z.props),M.ref=za($,ye,z),M.return=$,$=M;break e}a($,ye);break}else i($,ye);ye=ye.sibling}z.type===k?(M=Pi(z.props.children,$.mode,re,z.key),M.return=$,$=M):(re=uc(z.type,z.key,z.props,null,$.mode,re),re.ref=za($,M,z),re.return=$,$=re)}return E($);case se:e:{for(ye=z.key;M!==null;){if(M.key===ye)if(M.tag===4&&M.stateNode.containerInfo===z.containerInfo&&M.stateNode.implementation===z.implementation){a($,M.sibling),M=p(M,z.children||[]),M.return=$,$=M;break e}else{a($,M);break}else i($,M);M=M.sibling}M=tf(z,$.mode,re),M.return=$,$=M}return E($);case wt:return ye=z._init,ut($,M,ye(z._payload),re)}if(at(z))return de($,M,z,re);if(ge(z))return fe($,M,z,re);Fu($,z)}return typeof z=="string"&&z!==""||typeof z=="number"?(z=""+z,M!==null&&M.tag===6?(a($,M.sibling),M=p(M,z),M.return=$,$=M):(a($,M),M=ef(z,$.mode,re),M.return=$,$=M),E($)):a($,M)}return ut}var Ao=cg(!0),hg=cg(!1),Uu=Es(null),$u=null,Po=null,cd=null;function hd(){cd=Po=$u=null}function dd(r){var i=Uu.current;Ye(Uu),r._currentValue=i}function fd(r,i,a){for(;r!==null;){var h=r.alternate;if((r.childLanes&i)!==i?(r.childLanes|=i,h!==null&&(h.childLanes|=i)):h!==null&&(h.childLanes&i)!==i&&(h.childLanes|=i),r===a)break;r=r.return}}function bo(r,i){$u=r,cd=Po=null,r=r.dependencies,r!==null&&r.firstContext!==null&&((r.lanes&i)!==0&&(nn=!0),r.firstContext=null)}function Sn(r){var i=r._currentValue;if(cd!==r)if(r={context:r,memoizedValue:i,next:null},Po===null){if($u===null)throw Error(t(308));Po=r,$u.dependencies={lanes:0,firstContext:r}}else Po=Po.next=r;return i}var Ti=null;function pd(r){Ti===null?Ti=[r]:Ti.push(r)}function dg(r,i,a,h){var p=i.interleaved;return p===null?(a.next=a,pd(i)):(a.next=p.next,p.next=a),i.interleaved=a,Br(r,h)}function Br(r,i){r.lanes|=i;var a=r.alternate;for(a!==null&&(a.lanes|=i),a=r,r=r.return;r!==null;)r.childLanes|=i,a=r.alternate,a!==null&&(a.childLanes|=i),a=r,r=r.return;return a.tag===3?a.stateNode:null}var Is=!1;function md(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function fg(r,i){r=r.updateQueue,i.updateQueue===r&&(i.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function zr(r,i){return{eventTime:r,lane:i,tag:0,payload:null,callback:null,next:null}}function Ss(r,i,a){var h=r.updateQueue;if(h===null)return null;if(h=h.shared,(Me&2)!==0){var p=h.pending;return p===null?i.next=i:(i.next=p.next,p.next=i),h.pending=i,Br(r,a)}return p=h.interleaved,p===null?(i.next=i,pd(h)):(i.next=p.next,p.next=i),h.interleaved=i,Br(r,a)}function Bu(r,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194240)!==0)){var h=i.lanes;h&=r.pendingLanes,a|=h,i.lanes=a,Ia(r,a)}}function pg(r,i){var a=r.updateQueue,h=r.alternate;if(h!==null&&(h=h.updateQueue,a===h)){var p=null,g=null;if(a=a.firstBaseUpdate,a!==null){do{var E={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};g===null?p=g=E:g=g.next=E,a=a.next}while(a!==null);g===null?p=g=i:g=g.next=i}else p=g=i;a={baseState:h.baseState,firstBaseUpdate:p,lastBaseUpdate:g,shared:h.shared,effects:h.effects},r.updateQueue=a;return}r=a.lastBaseUpdate,r===null?a.firstBaseUpdate=i:r.next=i,a.lastBaseUpdate=i}function zu(r,i,a,h){var p=r.updateQueue;Is=!1;var g=p.firstBaseUpdate,E=p.lastBaseUpdate,A=p.shared.pending;if(A!==null){p.shared.pending=null;var O=A,q=O.next;O.next=null,E===null?g=q:E.next=q,E=O;var J=r.alternate;J!==null&&(J=J.updateQueue,A=J.lastBaseUpdate,A!==E&&(A===null?J.firstBaseUpdate=q:A.next=q,J.lastBaseUpdate=O))}if(g!==null){var te=p.baseState;E=0,J=q=O=null,A=g;do{var X=A.lane,le=A.eventTime;if((h&X)===X){J!==null&&(J=J.next={eventTime:le,lane:0,tag:A.tag,payload:A.payload,callback:A.callback,next:null});e:{var de=r,fe=A;switch(X=i,le=a,fe.tag){case 1:if(de=fe.payload,typeof de=="function"){te=de.call(le,te,X);break e}te=de;break e;case 3:de.flags=de.flags&-65537|128;case 0:if(de=fe.payload,X=typeof de=="function"?de.call(le,te,X):de,X==null)break e;te=ce({},te,X);break e;case 2:Is=!0}}A.callback!==null&&A.lane!==0&&(r.flags|=64,X=p.effects,X===null?p.effects=[A]:X.push(A))}else le={eventTime:le,lane:X,tag:A.tag,payload:A.payload,callback:A.callback,next:null},J===null?(q=J=le,O=te):J=J.next=le,E|=X;if(A=A.next,A===null){if(A=p.shared.pending,A===null)break;X=A,A=X.next,X.next=null,p.lastBaseUpdate=X,p.shared.pending=null}}while(!0);if(J===null&&(O=te),p.baseState=O,p.firstBaseUpdate=q,p.lastBaseUpdate=J,i=p.shared.interleaved,i!==null){p=i;do E|=p.lane,p=p.next;while(p!==i)}else g===null&&(p.shared.lanes=0);Ci|=E,r.lanes=E,r.memoizedState=te}}function mg(r,i,a){if(r=i.effects,i.effects=null,r!==null)for(i=0;i<r.length;i++){var h=r[i],p=h.callback;if(p!==null){if(h.callback=null,h=a,typeof p!="function")throw Error(t(191,p));p.call(h)}}}var qa={},dr=Es(qa),Ha=Es(qa),Wa=Es(qa);function Ii(r){if(r===qa)throw Error(t(174));return r}function gd(r,i){switch(We(Wa,i),We(Ha,r),We(dr,qa),r=i.nodeType,r){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:Ji(null,"");break;default:r=r===8?i.parentNode:i,i=r.namespaceURI||null,r=r.tagName,i=Ji(i,r)}Ye(dr),We(dr,i)}function No(){Ye(dr),Ye(Ha),Ye(Wa)}function gg(r){Ii(Wa.current);var i=Ii(dr.current),a=Ji(i,r.type);i!==a&&(We(Ha,r),We(dr,a))}function yd(r){Ha.current===r&&(Ye(dr),Ye(Ha))}var tt=Es(0);function qu(r){for(var i=r;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var vd=[];function _d(){for(var r=0;r<vd.length;r++)vd[r]._workInProgressVersionPrimary=null;vd.length=0}var Hu=ne.ReactCurrentDispatcher,wd=ne.ReactCurrentBatchConfig,Si=0,nt=null,Et=null,It=null,Wu=!1,Ga=!1,Ka=0,_x=0;function $t(){throw Error(t(321))}function Ed(r,i){if(i===null)return!1;for(var a=0;a<i.length&&a<r.length;a++)if(!jn(r[a],i[a]))return!1;return!0}function xd(r,i,a,h,p,g){if(Si=g,nt=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,Hu.current=r===null||r.memoizedState===null?Tx:Ix,r=a(h,p),Ga){g=0;do{if(Ga=!1,Ka=0,25<=g)throw Error(t(301));g+=1,It=Et=null,i.updateQueue=null,Hu.current=Sx,r=a(h,p)}while(Ga)}if(Hu.current=Qu,i=Et!==null&&Et.next!==null,Si=0,It=Et=nt=null,Wu=!1,i)throw Error(t(300));return r}function Td(){var r=Ka!==0;return Ka=0,r}function fr(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return It===null?nt.memoizedState=It=r:It=It.next=r,It}function Cn(){if(Et===null){var r=nt.alternate;r=r!==null?r.memoizedState:null}else r=Et.next;var i=It===null?nt.memoizedState:It.next;if(i!==null)It=i,Et=r;else{if(r===null)throw Error(t(310));Et=r,r={memoizedState:Et.memoizedState,baseState:Et.baseState,baseQueue:Et.baseQueue,queue:Et.queue,next:null},It===null?nt.memoizedState=It=r:It=It.next=r}return It}function Qa(r,i){return typeof i=="function"?i(r):i}function Id(r){var i=Cn(),a=i.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=r;var h=Et,p=h.baseQueue,g=a.pending;if(g!==null){if(p!==null){var E=p.next;p.next=g.next,g.next=E}h.baseQueue=p=g,a.pending=null}if(p!==null){g=p.next,h=h.baseState;var A=E=null,O=null,q=g;do{var J=q.lane;if((Si&J)===J)O!==null&&(O=O.next={lane:0,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null}),h=q.hasEagerState?q.eagerState:r(h,q.action);else{var te={lane:J,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null};O===null?(A=O=te,E=h):O=O.next=te,nt.lanes|=J,Ci|=J}q=q.next}while(q!==null&&q!==g);O===null?E=h:O.next=A,jn(h,i.memoizedState)||(nn=!0),i.memoizedState=h,i.baseState=E,i.baseQueue=O,a.lastRenderedState=h}if(r=a.interleaved,r!==null){p=r;do g=p.lane,nt.lanes|=g,Ci|=g,p=p.next;while(p!==r)}else p===null&&(a.lanes=0);return[i.memoizedState,a.dispatch]}function Sd(r){var i=Cn(),a=i.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=r;var h=a.dispatch,p=a.pending,g=i.memoizedState;if(p!==null){a.pending=null;var E=p=p.next;do g=r(g,E.action),E=E.next;while(E!==p);jn(g,i.memoizedState)||(nn=!0),i.memoizedState=g,i.baseQueue===null&&(i.baseState=g),a.lastRenderedState=g}return[g,h]}function yg(){}function vg(r,i){var a=nt,h=Cn(),p=i(),g=!jn(h.memoizedState,p);if(g&&(h.memoizedState=p,nn=!0),h=h.queue,Cd(Eg.bind(null,a,h,r),[r]),h.getSnapshot!==i||g||It!==null&&It.memoizedState.tag&1){if(a.flags|=2048,Ya(9,wg.bind(null,a,h,p,i),void 0,null),St===null)throw Error(t(349));(Si&30)!==0||_g(a,i,p)}return p}function _g(r,i,a){r.flags|=16384,r={getSnapshot:i,value:a},i=nt.updateQueue,i===null?(i={lastEffect:null,stores:null},nt.updateQueue=i,i.stores=[r]):(a=i.stores,a===null?i.stores=[r]:a.push(r))}function wg(r,i,a,h){i.value=a,i.getSnapshot=h,xg(i)&&Tg(r)}function Eg(r,i,a){return a(function(){xg(i)&&Tg(r)})}function xg(r){var i=r.getSnapshot;r=r.value;try{var a=i();return!jn(r,a)}catch{return!0}}function Tg(r){var i=Br(r,1);i!==null&&zn(i,r,1,-1)}function Ig(r){var i=fr();return typeof r=="function"&&(r=r()),i.memoizedState=i.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Qa,lastRenderedState:r},i.queue=r,r=r.dispatch=xx.bind(null,nt,r),[i.memoizedState,r]}function Ya(r,i,a,h){return r={tag:r,create:i,destroy:a,deps:h,next:null},i=nt.updateQueue,i===null?(i={lastEffect:null,stores:null},nt.updateQueue=i,i.lastEffect=r.next=r):(a=i.lastEffect,a===null?i.lastEffect=r.next=r:(h=a.next,a.next=r,r.next=h,i.lastEffect=r)),r}function Sg(){return Cn().memoizedState}function Gu(r,i,a,h){var p=fr();nt.flags|=r,p.memoizedState=Ya(1|i,a,void 0,h===void 0?null:h)}function Ku(r,i,a,h){var p=Cn();h=h===void 0?null:h;var g=void 0;if(Et!==null){var E=Et.memoizedState;if(g=E.destroy,h!==null&&Ed(h,E.deps)){p.memoizedState=Ya(i,a,g,h);return}}nt.flags|=r,p.memoizedState=Ya(1|i,a,g,h)}function Cg(r,i){return Gu(8390656,8,r,i)}function Cd(r,i){return Ku(2048,8,r,i)}function kg(r,i){return Ku(4,2,r,i)}function Rg(r,i){return Ku(4,4,r,i)}function Ag(r,i){if(typeof i=="function")return r=r(),i(r),function(){i(null)};if(i!=null)return r=r(),i.current=r,function(){i.current=null}}function Pg(r,i,a){return a=a!=null?a.concat([r]):null,Ku(4,4,Ag.bind(null,i,r),a)}function kd(){}function bg(r,i){var a=Cn();i=i===void 0?null:i;var h=a.memoizedState;return h!==null&&i!==null&&Ed(i,h[1])?h[0]:(a.memoizedState=[r,i],r)}function Ng(r,i){var a=Cn();i=i===void 0?null:i;var h=a.memoizedState;return h!==null&&i!==null&&Ed(i,h[1])?h[0]:(r=r(),a.memoizedState=[r,i],r)}function Dg(r,i,a){return(Si&21)===0?(r.baseState&&(r.baseState=!1,nn=!0),r.memoizedState=a):(jn(a,i)||(a=xa(),nt.lanes|=a,Ci|=a,r.baseState=!0),i)}function wx(r,i){var a=De;De=a!==0&&4>a?a:4,r(!0);var h=wd.transition;wd.transition={};try{r(!1),i()}finally{De=a,wd.transition=h}}function Og(){return Cn().memoizedState}function Ex(r,i,a){var h=As(r);if(a={lane:h,action:a,hasEagerState:!1,eagerState:null,next:null},Lg(r))Vg(i,a);else if(a=dg(r,i,a,h),a!==null){var p=Xt();zn(a,r,h,p),Mg(a,i,h)}}function xx(r,i,a){var h=As(r),p={lane:h,action:a,hasEagerState:!1,eagerState:null,next:null};if(Lg(r))Vg(i,p);else{var g=r.alternate;if(r.lanes===0&&(g===null||g.lanes===0)&&(g=i.lastRenderedReducer,g!==null))try{var E=i.lastRenderedState,A=g(E,a);if(p.hasEagerState=!0,p.eagerState=A,jn(A,E)){var O=i.interleaved;O===null?(p.next=p,pd(i)):(p.next=O.next,O.next=p),i.interleaved=p;return}}catch{}finally{}a=dg(r,i,p,h),a!==null&&(p=Xt(),zn(a,r,h,p),Mg(a,i,h))}}function Lg(r){var i=r.alternate;return r===nt||i!==null&&i===nt}function Vg(r,i){Ga=Wu=!0;var a=r.pending;a===null?i.next=i:(i.next=a.next,a.next=i),r.pending=i}function Mg(r,i,a){if((a&4194240)!==0){var h=i.lanes;h&=r.pendingLanes,a|=h,i.lanes=a,Ia(r,a)}}var Qu={readContext:Sn,useCallback:$t,useContext:$t,useEffect:$t,useImperativeHandle:$t,useInsertionEffect:$t,useLayoutEffect:$t,useMemo:$t,useReducer:$t,useRef:$t,useState:$t,useDebugValue:$t,useDeferredValue:$t,useTransition:$t,useMutableSource:$t,useSyncExternalStore:$t,useId:$t,unstable_isNewReconciler:!1},Tx={readContext:Sn,useCallback:function(r,i){return fr().memoizedState=[r,i===void 0?null:i],r},useContext:Sn,useEffect:Cg,useImperativeHandle:function(r,i,a){return a=a!=null?a.concat([r]):null,Gu(4194308,4,Ag.bind(null,i,r),a)},useLayoutEffect:function(r,i){return Gu(4194308,4,r,i)},useInsertionEffect:function(r,i){return Gu(4,2,r,i)},useMemo:function(r,i){var a=fr();return i=i===void 0?null:i,r=r(),a.memoizedState=[r,i],r},useReducer:function(r,i,a){var h=fr();return i=a!==void 0?a(i):i,h.memoizedState=h.baseState=i,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:i},h.queue=r,r=r.dispatch=Ex.bind(null,nt,r),[h.memoizedState,r]},useRef:function(r){var i=fr();return r={current:r},i.memoizedState=r},useState:Ig,useDebugValue:kd,useDeferredValue:function(r){return fr().memoizedState=r},useTransition:function(){var r=Ig(!1),i=r[0];return r=wx.bind(null,r[1]),fr().memoizedState=r,[i,r]},useMutableSource:function(){},useSyncExternalStore:function(r,i,a){var h=nt,p=fr();if(Je){if(a===void 0)throw Error(t(407));a=a()}else{if(a=i(),St===null)throw Error(t(349));(Si&30)!==0||_g(h,i,a)}p.memoizedState=a;var g={value:a,getSnapshot:i};return p.queue=g,Cg(Eg.bind(null,h,g,r),[r]),h.flags|=2048,Ya(9,wg.bind(null,h,g,a,i),void 0,null),a},useId:function(){var r=fr(),i=St.identifierPrefix;if(Je){var a=$r,h=Ur;a=(h&~(1<<32-dn(h)-1)).toString(32)+a,i=":"+i+"R"+a,a=Ka++,0<a&&(i+="H"+a.toString(32)),i+=":"}else a=_x++,i=":"+i+"r"+a.toString(32)+":";return r.memoizedState=i},unstable_isNewReconciler:!1},Ix={readContext:Sn,useCallback:bg,useContext:Sn,useEffect:Cd,useImperativeHandle:Pg,useInsertionEffect:kg,useLayoutEffect:Rg,useMemo:Ng,useReducer:Id,useRef:Sg,useState:function(){return Id(Qa)},useDebugValue:kd,useDeferredValue:function(r){var i=Cn();return Dg(i,Et.memoizedState,r)},useTransition:function(){var r=Id(Qa)[0],i=Cn().memoizedState;return[r,i]},useMutableSource:yg,useSyncExternalStore:vg,useId:Og,unstable_isNewReconciler:!1},Sx={readContext:Sn,useCallback:bg,useContext:Sn,useEffect:Cd,useImperativeHandle:Pg,useInsertionEffect:kg,useLayoutEffect:Rg,useMemo:Ng,useReducer:Sd,useRef:Sg,useState:function(){return Sd(Qa)},useDebugValue:kd,useDeferredValue:function(r){var i=Cn();return Et===null?i.memoizedState=r:Dg(i,Et.memoizedState,r)},useTransition:function(){var r=Sd(Qa)[0],i=Cn().memoizedState;return[r,i]},useMutableSource:yg,useSyncExternalStore:vg,useId:Og,unstable_isNewReconciler:!1};function Un(r,i){if(r&&r.defaultProps){i=ce({},i),r=r.defaultProps;for(var a in r)i[a]===void 0&&(i[a]=r[a]);return i}return i}function Rd(r,i,a,h){i=r.memoizedState,a=a(h,i),a=a==null?i:ce({},i,a),r.memoizedState=a,r.lanes===0&&(r.updateQueue.baseState=a)}var Yu={isMounted:function(r){return(r=r._reactInternals)?Vn(r)===r:!1},enqueueSetState:function(r,i,a){r=r._reactInternals;var h=Xt(),p=As(r),g=zr(h,p);g.payload=i,a!=null&&(g.callback=a),i=Ss(r,g,p),i!==null&&(zn(i,r,p,h),Bu(i,r,p))},enqueueReplaceState:function(r,i,a){r=r._reactInternals;var h=Xt(),p=As(r),g=zr(h,p);g.tag=1,g.payload=i,a!=null&&(g.callback=a),i=Ss(r,g,p),i!==null&&(zn(i,r,p,h),Bu(i,r,p))},enqueueForceUpdate:function(r,i){r=r._reactInternals;var a=Xt(),h=As(r),p=zr(a,h);p.tag=2,i!=null&&(p.callback=i),i=Ss(r,p,h),i!==null&&(zn(i,r,h,a),Bu(i,r,h))}};function jg(r,i,a,h,p,g,E){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(h,g,E):i.prototype&&i.prototype.isPureReactComponent?!Va(a,h)||!Va(p,g):!0}function Fg(r,i,a){var h=!1,p=xs,g=i.contextType;return typeof g=="object"&&g!==null?g=Sn(g):(p=tn(i)?wi:Ut.current,h=i.contextTypes,g=(h=h!=null)?So(r,p):xs),i=new i(a,g),r.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=Yu,r.stateNode=i,i._reactInternals=r,h&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=p,r.__reactInternalMemoizedMaskedChildContext=g),i}function Ug(r,i,a,h){r=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,h),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,h),i.state!==r&&Yu.enqueueReplaceState(i,i.state,null)}function Ad(r,i,a,h){var p=r.stateNode;p.props=a,p.state=r.memoizedState,p.refs={},md(r);var g=i.contextType;typeof g=="object"&&g!==null?p.context=Sn(g):(g=tn(i)?wi:Ut.current,p.context=So(r,g)),p.state=r.memoizedState,g=i.getDerivedStateFromProps,typeof g=="function"&&(Rd(r,i,g,a),p.state=r.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(i=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),i!==p.state&&Yu.enqueueReplaceState(p,p.state,null),zu(r,a,p,h),p.state=r.memoizedState),typeof p.componentDidMount=="function"&&(r.flags|=4194308)}function Do(r,i){try{var a="",h=i;do a+=Re(h),h=h.return;while(h);var p=a}catch(g){p=`
Error generating stack: `+g.message+`
`+g.stack}return{value:r,source:i,stack:p,digest:null}}function Pd(r,i,a){return{value:r,source:null,stack:a??null,digest:i??null}}function bd(r,i){try{console.error(i.value)}catch(a){setTimeout(function(){throw a})}}var Cx=typeof WeakMap=="function"?WeakMap:Map;function $g(r,i,a){a=zr(-1,a),a.tag=3,a.payload={element:null};var h=i.value;return a.callback=function(){rc||(rc=!0,Wd=h),bd(r,i)},a}function Bg(r,i,a){a=zr(-1,a),a.tag=3;var h=r.type.getDerivedStateFromError;if(typeof h=="function"){var p=i.value;a.payload=function(){return h(p)},a.callback=function(){bd(r,i)}}var g=r.stateNode;return g!==null&&typeof g.componentDidCatch=="function"&&(a.callback=function(){bd(r,i),typeof h!="function"&&(ks===null?ks=new Set([this]):ks.add(this));var E=i.stack;this.componentDidCatch(i.value,{componentStack:E!==null?E:""})}),a}function zg(r,i,a){var h=r.pingCache;if(h===null){h=r.pingCache=new Cx;var p=new Set;h.set(i,p)}else p=h.get(i),p===void 0&&(p=new Set,h.set(i,p));p.has(a)||(p.add(a),r=Ux.bind(null,r,i,a),i.then(r,r))}function qg(r){do{var i;if((i=r.tag===13)&&(i=r.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return r;r=r.return}while(r!==null);return null}function Hg(r,i,a,h,p){return(r.mode&1)===0?(r===i?r.flags|=65536:(r.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(i=zr(-1,1),i.tag=2,Ss(a,i,1))),a.lanes|=1),r):(r.flags|=65536,r.lanes=p,r)}var kx=ne.ReactCurrentOwner,nn=!1;function Yt(r,i,a,h){i.child=r===null?hg(i,null,a,h):Ao(i,r.child,a,h)}function Wg(r,i,a,h,p){a=a.render;var g=i.ref;return bo(i,p),h=xd(r,i,a,h,g,p),a=Td(),r!==null&&!nn?(i.updateQueue=r.updateQueue,i.flags&=-2053,r.lanes&=~p,qr(r,i,p)):(Je&&a&&id(i),i.flags|=1,Yt(r,i,h,p),i.child)}function Gg(r,i,a,h,p){if(r===null){var g=a.type;return typeof g=="function"&&!Zd(g)&&g.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(i.tag=15,i.type=g,Kg(r,i,g,h,p)):(r=uc(a.type,null,h,i,i.mode,p),r.ref=i.ref,r.return=i,i.child=r)}if(g=r.child,(r.lanes&p)===0){var E=g.memoizedProps;if(a=a.compare,a=a!==null?a:Va,a(E,h)&&r.ref===i.ref)return qr(r,i,p)}return i.flags|=1,r=bs(g,h),r.ref=i.ref,r.return=i,i.child=r}function Kg(r,i,a,h,p){if(r!==null){var g=r.memoizedProps;if(Va(g,h)&&r.ref===i.ref)if(nn=!1,i.pendingProps=h=g,(r.lanes&p)!==0)(r.flags&131072)!==0&&(nn=!0);else return i.lanes=r.lanes,qr(r,i,p)}return Nd(r,i,a,h,p)}function Qg(r,i,a){var h=i.pendingProps,p=h.children,g=r!==null?r.memoizedState:null;if(h.mode==="hidden")if((i.mode&1)===0)i.memoizedState={baseLanes:0,cachePool:null,transitions:null},We(Lo,_n),_n|=a;else{if((a&1073741824)===0)return r=g!==null?g.baseLanes|a:a,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:r,cachePool:null,transitions:null},i.updateQueue=null,We(Lo,_n),_n|=r,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},h=g!==null?g.baseLanes:a,We(Lo,_n),_n|=h}else g!==null?(h=g.baseLanes|a,i.memoizedState=null):h=a,We(Lo,_n),_n|=h;return Yt(r,i,p,a),i.child}function Yg(r,i){var a=i.ref;(r===null&&a!==null||r!==null&&r.ref!==a)&&(i.flags|=512,i.flags|=2097152)}function Nd(r,i,a,h,p){var g=tn(a)?wi:Ut.current;return g=So(i,g),bo(i,p),a=xd(r,i,a,h,g,p),h=Td(),r!==null&&!nn?(i.updateQueue=r.updateQueue,i.flags&=-2053,r.lanes&=~p,qr(r,i,p)):(Je&&h&&id(i),i.flags|=1,Yt(r,i,a,p),i.child)}function Xg(r,i,a,h,p){if(tn(a)){var g=!0;Ou(i)}else g=!1;if(bo(i,p),i.stateNode===null)Ju(r,i),Fg(i,a,h),Ad(i,a,h,p),h=!0;else if(r===null){var E=i.stateNode,A=i.memoizedProps;E.props=A;var O=E.context,q=a.contextType;typeof q=="object"&&q!==null?q=Sn(q):(q=tn(a)?wi:Ut.current,q=So(i,q));var J=a.getDerivedStateFromProps,te=typeof J=="function"||typeof E.getSnapshotBeforeUpdate=="function";te||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(A!==h||O!==q)&&Ug(i,E,h,q),Is=!1;var X=i.memoizedState;E.state=X,zu(i,h,E,p),O=i.memoizedState,A!==h||X!==O||en.current||Is?(typeof J=="function"&&(Rd(i,a,J,h),O=i.memoizedState),(A=Is||jg(i,a,A,h,X,O,q))?(te||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(i.flags|=4194308)):(typeof E.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=h,i.memoizedState=O),E.props=h,E.state=O,E.context=q,h=A):(typeof E.componentDidMount=="function"&&(i.flags|=4194308),h=!1)}else{E=i.stateNode,fg(r,i),A=i.memoizedProps,q=i.type===i.elementType?A:Un(i.type,A),E.props=q,te=i.pendingProps,X=E.context,O=a.contextType,typeof O=="object"&&O!==null?O=Sn(O):(O=tn(a)?wi:Ut.current,O=So(i,O));var le=a.getDerivedStateFromProps;(J=typeof le=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(A!==te||X!==O)&&Ug(i,E,h,O),Is=!1,X=i.memoizedState,E.state=X,zu(i,h,E,p);var de=i.memoizedState;A!==te||X!==de||en.current||Is?(typeof le=="function"&&(Rd(i,a,le,h),de=i.memoizedState),(q=Is||jg(i,a,q,h,X,de,O)||!1)?(J||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(h,de,O),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(h,de,O)),typeof E.componentDidUpdate=="function"&&(i.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof E.componentDidUpdate!="function"||A===r.memoizedProps&&X===r.memoizedState||(i.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||A===r.memoizedProps&&X===r.memoizedState||(i.flags|=1024),i.memoizedProps=h,i.memoizedState=de),E.props=h,E.state=de,E.context=O,h=q):(typeof E.componentDidUpdate!="function"||A===r.memoizedProps&&X===r.memoizedState||(i.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||A===r.memoizedProps&&X===r.memoizedState||(i.flags|=1024),h=!1)}return Dd(r,i,a,h,g,p)}function Dd(r,i,a,h,p,g){Yg(r,i);var E=(i.flags&128)!==0;if(!h&&!E)return p&&ng(i,a,!1),qr(r,i,g);h=i.stateNode,kx.current=i;var A=E&&typeof a.getDerivedStateFromError!="function"?null:h.render();return i.flags|=1,r!==null&&E?(i.child=Ao(i,r.child,null,g),i.child=Ao(i,null,A,g)):Yt(r,i,A,g),i.memoizedState=h.state,p&&ng(i,a,!0),i.child}function Jg(r){var i=r.stateNode;i.pendingContext?eg(r,i.pendingContext,i.pendingContext!==i.context):i.context&&eg(r,i.context,!1),gd(r,i.containerInfo)}function Zg(r,i,a,h,p){return Ro(),ud(p),i.flags|=256,Yt(r,i,a,h),i.child}var Od={dehydrated:null,treeContext:null,retryLane:0};function Ld(r){return{baseLanes:r,cachePool:null,transitions:null}}function ey(r,i,a){var h=i.pendingProps,p=tt.current,g=!1,E=(i.flags&128)!==0,A;if((A=E)||(A=r!==null&&r.memoizedState===null?!1:(p&2)!==0),A?(g=!0,i.flags&=-129):(r===null||r.memoizedState!==null)&&(p|=1),We(tt,p&1),r===null)return ld(i),r=i.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?((i.mode&1)===0?i.lanes=1:r.data==="$!"?i.lanes=8:i.lanes=1073741824,null):(E=h.children,r=h.fallback,g?(h=i.mode,g=i.child,E={mode:"hidden",children:E},(h&1)===0&&g!==null?(g.childLanes=0,g.pendingProps=E):g=cc(E,h,0,null),r=Pi(r,h,a,null),g.return=i,r.return=i,g.sibling=r,i.child=g,i.child.memoizedState=Ld(a),i.memoizedState=Od,r):Vd(i,E));if(p=r.memoizedState,p!==null&&(A=p.dehydrated,A!==null))return Rx(r,i,E,h,A,p,a);if(g){g=h.fallback,E=i.mode,p=r.child,A=p.sibling;var O={mode:"hidden",children:h.children};return(E&1)===0&&i.child!==p?(h=i.child,h.childLanes=0,h.pendingProps=O,i.deletions=null):(h=bs(p,O),h.subtreeFlags=p.subtreeFlags&14680064),A!==null?g=bs(A,g):(g=Pi(g,E,a,null),g.flags|=2),g.return=i,h.return=i,h.sibling=g,i.child=h,h=g,g=i.child,E=r.child.memoizedState,E=E===null?Ld(a):{baseLanes:E.baseLanes|a,cachePool:null,transitions:E.transitions},g.memoizedState=E,g.childLanes=r.childLanes&~a,i.memoizedState=Od,h}return g=r.child,r=g.sibling,h=bs(g,{mode:"visible",children:h.children}),(i.mode&1)===0&&(h.lanes=a),h.return=i,h.sibling=null,r!==null&&(a=i.deletions,a===null?(i.deletions=[r],i.flags|=16):a.push(r)),i.child=h,i.memoizedState=null,h}function Vd(r,i){return i=cc({mode:"visible",children:i},r.mode,0,null),i.return=r,r.child=i}function Xu(r,i,a,h){return h!==null&&ud(h),Ao(i,r.child,null,a),r=Vd(i,i.pendingProps.children),r.flags|=2,i.memoizedState=null,r}function Rx(r,i,a,h,p,g,E){if(a)return i.flags&256?(i.flags&=-257,h=Pd(Error(t(422))),Xu(r,i,E,h)):i.memoizedState!==null?(i.child=r.child,i.flags|=128,null):(g=h.fallback,p=i.mode,h=cc({mode:"visible",children:h.children},p,0,null),g=Pi(g,p,E,null),g.flags|=2,h.return=i,g.return=i,h.sibling=g,i.child=h,(i.mode&1)!==0&&Ao(i,r.child,null,E),i.child.memoizedState=Ld(E),i.memoizedState=Od,g);if((i.mode&1)===0)return Xu(r,i,E,null);if(p.data==="$!"){if(h=p.nextSibling&&p.nextSibling.dataset,h)var A=h.dgst;return h=A,g=Error(t(419)),h=Pd(g,h,void 0),Xu(r,i,E,h)}if(A=(E&r.childLanes)!==0,nn||A){if(h=St,h!==null){switch(E&-E){case 4:p=2;break;case 16:p=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:p=32;break;case 536870912:p=268435456;break;default:p=0}p=(p&(h.suspendedLanes|E))!==0?0:p,p!==0&&p!==g.retryLane&&(g.retryLane=p,Br(r,p),zn(h,r,p,-1))}return Jd(),h=Pd(Error(t(421))),Xu(r,i,E,h)}return p.data==="$?"?(i.flags|=128,i.child=r.child,i=$x.bind(null,r),p._reactRetry=i,null):(r=g.treeContext,vn=ws(p.nextSibling),yn=i,Je=!0,Fn=null,r!==null&&(Tn[In++]=Ur,Tn[In++]=$r,Tn[In++]=Ei,Ur=r.id,$r=r.overflow,Ei=i),i=Vd(i,h.children),i.flags|=4096,i)}function ty(r,i,a){r.lanes|=i;var h=r.alternate;h!==null&&(h.lanes|=i),fd(r.return,i,a)}function Md(r,i,a,h,p){var g=r.memoizedState;g===null?r.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:h,tail:a,tailMode:p}:(g.isBackwards=i,g.rendering=null,g.renderingStartTime=0,g.last=h,g.tail=a,g.tailMode=p)}function ny(r,i,a){var h=i.pendingProps,p=h.revealOrder,g=h.tail;if(Yt(r,i,h.children,a),h=tt.current,(h&2)!==0)h=h&1|2,i.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=i.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&ty(r,a,i);else if(r.tag===19)ty(r,a,i);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}h&=1}if(We(tt,h),(i.mode&1)===0)i.memoizedState=null;else switch(p){case"forwards":for(a=i.child,p=null;a!==null;)r=a.alternate,r!==null&&qu(r)===null&&(p=a),a=a.sibling;a=p,a===null?(p=i.child,i.child=null):(p=a.sibling,a.sibling=null),Md(i,!1,p,a,g);break;case"backwards":for(a=null,p=i.child,i.child=null;p!==null;){if(r=p.alternate,r!==null&&qu(r)===null){i.child=p;break}r=p.sibling,p.sibling=a,a=p,p=r}Md(i,!0,a,null,g);break;case"together":Md(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Ju(r,i){(i.mode&1)===0&&r!==null&&(r.alternate=null,i.alternate=null,i.flags|=2)}function qr(r,i,a){if(r!==null&&(i.dependencies=r.dependencies),Ci|=i.lanes,(a&i.childLanes)===0)return null;if(r!==null&&i.child!==r.child)throw Error(t(153));if(i.child!==null){for(r=i.child,a=bs(r,r.pendingProps),i.child=a,a.return=i;r.sibling!==null;)r=r.sibling,a=a.sibling=bs(r,r.pendingProps),a.return=i;a.sibling=null}return i.child}function Ax(r,i,a){switch(i.tag){case 3:Jg(i),Ro();break;case 5:gg(i);break;case 1:tn(i.type)&&Ou(i);break;case 4:gd(i,i.stateNode.containerInfo);break;case 10:var h=i.type._context,p=i.memoizedProps.value;We(Uu,h._currentValue),h._currentValue=p;break;case 13:if(h=i.memoizedState,h!==null)return h.dehydrated!==null?(We(tt,tt.current&1),i.flags|=128,null):(a&i.child.childLanes)!==0?ey(r,i,a):(We(tt,tt.current&1),r=qr(r,i,a),r!==null?r.sibling:null);We(tt,tt.current&1);break;case 19:if(h=(a&i.childLanes)!==0,(r.flags&128)!==0){if(h)return ny(r,i,a);i.flags|=128}if(p=i.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),We(tt,tt.current),h)break;return null;case 22:case 23:return i.lanes=0,Qg(r,i,a)}return qr(r,i,a)}var ry,jd,sy,iy;ry=function(r,i){for(var a=i.child;a!==null;){if(a.tag===5||a.tag===6)r.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},jd=function(){},sy=function(r,i,a,h){var p=r.memoizedProps;if(p!==h){r=i.stateNode,Ii(dr.current);var g=null;switch(a){case"input":p=Yi(r,p),h=Yi(r,h),g=[];break;case"select":p=ce({},p,{value:void 0}),h=ce({},h,{value:void 0}),g=[];break;case"textarea":p=ha(r,p),h=ha(r,h),g=[];break;default:typeof p.onClick!="function"&&typeof h.onClick=="function"&&(r.onclick=bu)}Ln(a,h);var E;a=null;for(q in p)if(!h.hasOwnProperty(q)&&p.hasOwnProperty(q)&&p[q]!=null)if(q==="style"){var A=p[q];for(E in A)A.hasOwnProperty(E)&&(a||(a={}),a[E]="")}else q!=="dangerouslySetInnerHTML"&&q!=="children"&&q!=="suppressContentEditableWarning"&&q!=="suppressHydrationWarning"&&q!=="autoFocus"&&(o.hasOwnProperty(q)?g||(g=[]):(g=g||[]).push(q,null));for(q in h){var O=h[q];if(A=p?.[q],h.hasOwnProperty(q)&&O!==A&&(O!=null||A!=null))if(q==="style")if(A){for(E in A)!A.hasOwnProperty(E)||O&&O.hasOwnProperty(E)||(a||(a={}),a[E]="");for(E in O)O.hasOwnProperty(E)&&A[E]!==O[E]&&(a||(a={}),a[E]=O[E])}else a||(g||(g=[]),g.push(q,a)),a=O;else q==="dangerouslySetInnerHTML"?(O=O?O.__html:void 0,A=A?A.__html:void 0,O!=null&&A!==O&&(g=g||[]).push(q,O)):q==="children"?typeof O!="string"&&typeof O!="number"||(g=g||[]).push(q,""+O):q!=="suppressContentEditableWarning"&&q!=="suppressHydrationWarning"&&(o.hasOwnProperty(q)?(O!=null&&q==="onScroll"&&Qe("scroll",r),g||A===O||(g=[])):(g=g||[]).push(q,O))}a&&(g=g||[]).push("style",a);var q=g;(i.updateQueue=q)&&(i.flags|=4)}},iy=function(r,i,a,h){a!==h&&(i.flags|=4)};function Xa(r,i){if(!Je)switch(r.tailMode){case"hidden":i=r.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?r.tail=null:a.sibling=null;break;case"collapsed":a=r.tail;for(var h=null;a!==null;)a.alternate!==null&&(h=a),a=a.sibling;h===null?i||r.tail===null?r.tail=null:r.tail.sibling=null:h.sibling=null}}function Bt(r){var i=r.alternate!==null&&r.alternate.child===r.child,a=0,h=0;if(i)for(var p=r.child;p!==null;)a|=p.lanes|p.childLanes,h|=p.subtreeFlags&14680064,h|=p.flags&14680064,p.return=r,p=p.sibling;else for(p=r.child;p!==null;)a|=p.lanes|p.childLanes,h|=p.subtreeFlags,h|=p.flags,p.return=r,p=p.sibling;return r.subtreeFlags|=h,r.childLanes=a,i}function Px(r,i,a){var h=i.pendingProps;switch(od(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Bt(i),null;case 1:return tn(i.type)&&Du(),Bt(i),null;case 3:return h=i.stateNode,No(),Ye(en),Ye(Ut),_d(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(r===null||r.child===null)&&(ju(i)?i.flags|=4:r===null||r.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Fn!==null&&(Qd(Fn),Fn=null))),jd(r,i),Bt(i),null;case 5:yd(i);var p=Ii(Wa.current);if(a=i.type,r!==null&&i.stateNode!=null)sy(r,i,a,h,p),r.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!h){if(i.stateNode===null)throw Error(t(166));return Bt(i),null}if(r=Ii(dr.current),ju(i)){h=i.stateNode,a=i.type;var g=i.memoizedProps;switch(h[hr]=i,h[$a]=g,r=(i.mode&1)!==0,a){case"dialog":Qe("cancel",h),Qe("close",h);break;case"iframe":case"object":case"embed":Qe("load",h);break;case"video":case"audio":for(p=0;p<ja.length;p++)Qe(ja[p],h);break;case"source":Qe("error",h);break;case"img":case"image":case"link":Qe("error",h),Qe("load",h);break;case"details":Qe("toggle",h);break;case"input":nu(h,g),Qe("invalid",h);break;case"select":h._wrapperState={wasMultiple:!!g.multiple},Qe("invalid",h);break;case"textarea":da(h,g),Qe("invalid",h)}Ln(a,g),p=null;for(var E in g)if(g.hasOwnProperty(E)){var A=g[E];E==="children"?typeof A=="string"?h.textContent!==A&&(g.suppressHydrationWarning!==!0&&Pu(h.textContent,A,r),p=["children",A]):typeof A=="number"&&h.textContent!==""+A&&(g.suppressHydrationWarning!==!0&&Pu(h.textContent,A,r),p=["children",""+A]):o.hasOwnProperty(E)&&A!=null&&E==="onScroll"&&Qe("scroll",h)}switch(a){case"input":Qi(h),ca(h,g,!0);break;case"textarea":Qi(h),ss(h);break;case"select":case"option":break;default:typeof g.onClick=="function"&&(h.onclick=bu)}h=p,i.updateQueue=h,h!==null&&(i.flags|=4)}else{E=p.nodeType===9?p:p.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=fa(a)),r==="http://www.w3.org/1999/xhtml"?a==="script"?(r=E.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof h.is=="string"?r=E.createElement(a,{is:h.is}):(r=E.createElement(a),a==="select"&&(E=r,h.multiple?E.multiple=!0:h.size&&(E.size=h.size))):r=E.createElementNS(r,a),r[hr]=i,r[$a]=h,ry(r,i,!1,!1),i.stateNode=r;e:{switch(E=eo(a,h),a){case"dialog":Qe("cancel",r),Qe("close",r),p=h;break;case"iframe":case"object":case"embed":Qe("load",r),p=h;break;case"video":case"audio":for(p=0;p<ja.length;p++)Qe(ja[p],r);p=h;break;case"source":Qe("error",r),p=h;break;case"img":case"image":case"link":Qe("error",r),Qe("load",r),p=h;break;case"details":Qe("toggle",r),p=h;break;case"input":nu(r,h),p=Yi(r,h),Qe("invalid",r);break;case"option":p=h;break;case"select":r._wrapperState={wasMultiple:!!h.multiple},p=ce({},h,{value:void 0}),Qe("invalid",r);break;case"textarea":da(r,h),p=ha(r,h),Qe("invalid",r);break;default:p=h}Ln(a,p),A=p;for(g in A)if(A.hasOwnProperty(g)){var O=A[g];g==="style"?Zi(r,O):g==="dangerouslySetInnerHTML"?(O=O?O.__html:void 0,O!=null&&su(r,O)):g==="children"?typeof O=="string"?(a!=="textarea"||O!=="")&&ii(r,O):typeof O=="number"&&ii(r,""+O):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(o.hasOwnProperty(g)?O!=null&&g==="onScroll"&&Qe("scroll",r):O!=null&&Z(r,g,O,E))}switch(a){case"input":Qi(r),ca(r,h,!1);break;case"textarea":Qi(r),ss(r);break;case"option":h.value!=null&&r.setAttribute("value",""+Ve(h.value));break;case"select":r.multiple=!!h.multiple,g=h.value,g!=null?On(r,!!h.multiple,g,!1):h.defaultValue!=null&&On(r,!!h.multiple,h.defaultValue,!0);break;default:typeof p.onClick=="function"&&(r.onclick=bu)}switch(a){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}}h&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return Bt(i),null;case 6:if(r&&i.stateNode!=null)iy(r,i,r.memoizedProps,h);else{if(typeof h!="string"&&i.stateNode===null)throw Error(t(166));if(a=Ii(Wa.current),Ii(dr.current),ju(i)){if(h=i.stateNode,a=i.memoizedProps,h[hr]=i,(g=h.nodeValue!==a)&&(r=yn,r!==null))switch(r.tag){case 3:Pu(h.nodeValue,a,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&Pu(h.nodeValue,a,(r.mode&1)!==0)}g&&(i.flags|=4)}else h=(a.nodeType===9?a:a.ownerDocument).createTextNode(h),h[hr]=i,i.stateNode=h}return Bt(i),null;case 13:if(Ye(tt),h=i.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(Je&&vn!==null&&(i.mode&1)!==0&&(i.flags&128)===0)lg(),Ro(),i.flags|=98560,g=!1;else if(g=ju(i),h!==null&&h.dehydrated!==null){if(r===null){if(!g)throw Error(t(318));if(g=i.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(t(317));g[hr]=i}else Ro(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Bt(i),g=!1}else Fn!==null&&(Qd(Fn),Fn=null),g=!0;if(!g)return i.flags&65536?i:null}return(i.flags&128)!==0?(i.lanes=a,i):(h=h!==null,h!==(r!==null&&r.memoizedState!==null)&&h&&(i.child.flags|=8192,(i.mode&1)!==0&&(r===null||(tt.current&1)!==0?xt===0&&(xt=3):Jd())),i.updateQueue!==null&&(i.flags|=4),Bt(i),null);case 4:return No(),jd(r,i),r===null&&Fa(i.stateNode.containerInfo),Bt(i),null;case 10:return dd(i.type._context),Bt(i),null;case 17:return tn(i.type)&&Du(),Bt(i),null;case 19:if(Ye(tt),g=i.memoizedState,g===null)return Bt(i),null;if(h=(i.flags&128)!==0,E=g.rendering,E===null)if(h)Xa(g,!1);else{if(xt!==0||r!==null&&(r.flags&128)!==0)for(r=i.child;r!==null;){if(E=qu(r),E!==null){for(i.flags|=128,Xa(g,!1),h=E.updateQueue,h!==null&&(i.updateQueue=h,i.flags|=4),i.subtreeFlags=0,h=a,a=i.child;a!==null;)g=a,r=h,g.flags&=14680066,E=g.alternate,E===null?(g.childLanes=0,g.lanes=r,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=E.childLanes,g.lanes=E.lanes,g.child=E.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=E.memoizedProps,g.memoizedState=E.memoizedState,g.updateQueue=E.updateQueue,g.type=E.type,r=E.dependencies,g.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),a=a.sibling;return We(tt,tt.current&1|2),i.child}r=r.sibling}g.tail!==null&&Ke()>Vo&&(i.flags|=128,h=!0,Xa(g,!1),i.lanes=4194304)}else{if(!h)if(r=qu(E),r!==null){if(i.flags|=128,h=!0,a=r.updateQueue,a!==null&&(i.updateQueue=a,i.flags|=4),Xa(g,!0),g.tail===null&&g.tailMode==="hidden"&&!E.alternate&&!Je)return Bt(i),null}else 2*Ke()-g.renderingStartTime>Vo&&a!==1073741824&&(i.flags|=128,h=!0,Xa(g,!1),i.lanes=4194304);g.isBackwards?(E.sibling=i.child,i.child=E):(a=g.last,a!==null?a.sibling=E:i.child=E,g.last=E)}return g.tail!==null?(i=g.tail,g.rendering=i,g.tail=i.sibling,g.renderingStartTime=Ke(),i.sibling=null,a=tt.current,We(tt,h?a&1|2:a&1),i):(Bt(i),null);case 22:case 23:return Xd(),h=i.memoizedState!==null,r!==null&&r.memoizedState!==null!==h&&(i.flags|=8192),h&&(i.mode&1)!==0?(_n&1073741824)!==0&&(Bt(i),i.subtreeFlags&6&&(i.flags|=8192)):Bt(i),null;case 24:return null;case 25:return null}throw Error(t(156,i.tag))}function bx(r,i){switch(od(i),i.tag){case 1:return tn(i.type)&&Du(),r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 3:return No(),Ye(en),Ye(Ut),_d(),r=i.flags,(r&65536)!==0&&(r&128)===0?(i.flags=r&-65537|128,i):null;case 5:return yd(i),null;case 13:if(Ye(tt),r=i.memoizedState,r!==null&&r.dehydrated!==null){if(i.alternate===null)throw Error(t(340));Ro()}return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 19:return Ye(tt),null;case 4:return No(),null;case 10:return dd(i.type._context),null;case 22:case 23:return Xd(),null;case 24:return null;default:return null}}var Zu=!1,zt=!1,Nx=typeof WeakSet=="function"?WeakSet:Set,he=null;function Oo(r,i){var a=r.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(h){ot(r,i,h)}else a.current=null}function Fd(r,i,a){try{a()}catch(h){ot(r,i,h)}}var oy=!1;function Dx(r,i){if(Xh=Lr,r=jm(),zh(r)){if("selectionStart"in r)var a={start:r.selectionStart,end:r.selectionEnd};else e:{a=(a=r.ownerDocument)&&a.defaultView||window;var h=a.getSelection&&a.getSelection();if(h&&h.rangeCount!==0){a=h.anchorNode;var p=h.anchorOffset,g=h.focusNode;h=h.focusOffset;try{a.nodeType,g.nodeType}catch{a=null;break e}var E=0,A=-1,O=-1,q=0,J=0,te=r,X=null;t:for(;;){for(var le;te!==a||p!==0&&te.nodeType!==3||(A=E+p),te!==g||h!==0&&te.nodeType!==3||(O=E+h),te.nodeType===3&&(E+=te.nodeValue.length),(le=te.firstChild)!==null;)X=te,te=le;for(;;){if(te===r)break t;if(X===a&&++q===p&&(A=E),X===g&&++J===h&&(O=E),(le=te.nextSibling)!==null)break;te=X,X=te.parentNode}te=le}a=A===-1||O===-1?null:{start:A,end:O}}else a=null}a=a||{start:0,end:0}}else a=null;for(Jh={focusedElem:r,selectionRange:a},Lr=!1,he=i;he!==null;)if(i=he,r=i.child,(i.subtreeFlags&1028)!==0&&r!==null)r.return=i,he=r;else for(;he!==null;){i=he;try{var de=i.alternate;if((i.flags&1024)!==0)switch(i.tag){case 0:case 11:case 15:break;case 1:if(de!==null){var fe=de.memoizedProps,ut=de.memoizedState,$=i.stateNode,M=$.getSnapshotBeforeUpdate(i.elementType===i.type?fe:Un(i.type,fe),ut);$.__reactInternalSnapshotBeforeUpdate=M}break;case 3:var z=i.stateNode.containerInfo;z.nodeType===1?z.textContent="":z.nodeType===9&&z.documentElement&&z.removeChild(z.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(re){ot(i,i.return,re)}if(r=i.sibling,r!==null){r.return=i.return,he=r;break}he=i.return}return de=oy,oy=!1,de}function Ja(r,i,a){var h=i.updateQueue;if(h=h!==null?h.lastEffect:null,h!==null){var p=h=h.next;do{if((p.tag&r)===r){var g=p.destroy;p.destroy=void 0,g!==void 0&&Fd(i,a,g)}p=p.next}while(p!==h)}}function ec(r,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var a=i=i.next;do{if((a.tag&r)===r){var h=a.create;a.destroy=h()}a=a.next}while(a!==i)}}function Ud(r){var i=r.ref;if(i!==null){var a=r.stateNode;switch(r.tag){case 5:r=a;break;default:r=a}typeof i=="function"?i(r):i.current=r}}function ay(r){var i=r.alternate;i!==null&&(r.alternate=null,ay(i)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(i=r.stateNode,i!==null&&(delete i[hr],delete i[$a],delete i[nd],delete i[mx],delete i[gx])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function ly(r){return r.tag===5||r.tag===3||r.tag===4}function uy(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||ly(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function $d(r,i,a){var h=r.tag;if(h===5||h===6)r=r.stateNode,i?a.nodeType===8?a.parentNode.insertBefore(r,i):a.insertBefore(r,i):(a.nodeType===8?(i=a.parentNode,i.insertBefore(r,a)):(i=a,i.appendChild(r)),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=bu));else if(h!==4&&(r=r.child,r!==null))for($d(r,i,a),r=r.sibling;r!==null;)$d(r,i,a),r=r.sibling}function Bd(r,i,a){var h=r.tag;if(h===5||h===6)r=r.stateNode,i?a.insertBefore(r,i):a.appendChild(r);else if(h!==4&&(r=r.child,r!==null))for(Bd(r,i,a),r=r.sibling;r!==null;)Bd(r,i,a),r=r.sibling}var bt=null,$n=!1;function Cs(r,i,a){for(a=a.child;a!==null;)cy(r,i,a),a=a.sibling}function cy(r,i,a){if(hn&&typeof hn.onCommitFiberUnmount=="function")try{hn.onCommitFiberUnmount(ci,a)}catch{}switch(a.tag){case 5:zt||Oo(a,i);case 6:var h=bt,p=$n;bt=null,Cs(r,i,a),bt=h,$n=p,bt!==null&&($n?(r=bt,a=a.stateNode,r.nodeType===8?r.parentNode.removeChild(a):r.removeChild(a)):bt.removeChild(a.stateNode));break;case 18:bt!==null&&($n?(r=bt,a=a.stateNode,r.nodeType===8?td(r.parentNode,a):r.nodeType===1&&td(r,a),gs(r)):td(bt,a.stateNode));break;case 4:h=bt,p=$n,bt=a.stateNode.containerInfo,$n=!0,Cs(r,i,a),bt=h,$n=p;break;case 0:case 11:case 14:case 15:if(!zt&&(h=a.updateQueue,h!==null&&(h=h.lastEffect,h!==null))){p=h=h.next;do{var g=p,E=g.destroy;g=g.tag,E!==void 0&&((g&2)!==0||(g&4)!==0)&&Fd(a,i,E),p=p.next}while(p!==h)}Cs(r,i,a);break;case 1:if(!zt&&(Oo(a,i),h=a.stateNode,typeof h.componentWillUnmount=="function"))try{h.props=a.memoizedProps,h.state=a.memoizedState,h.componentWillUnmount()}catch(A){ot(a,i,A)}Cs(r,i,a);break;case 21:Cs(r,i,a);break;case 22:a.mode&1?(zt=(h=zt)||a.memoizedState!==null,Cs(r,i,a),zt=h):Cs(r,i,a);break;default:Cs(r,i,a)}}function hy(r){var i=r.updateQueue;if(i!==null){r.updateQueue=null;var a=r.stateNode;a===null&&(a=r.stateNode=new Nx),i.forEach(function(h){var p=Bx.bind(null,r,h);a.has(h)||(a.add(h),h.then(p,p))})}}function Bn(r,i){var a=i.deletions;if(a!==null)for(var h=0;h<a.length;h++){var p=a[h];try{var g=r,E=i,A=E;e:for(;A!==null;){switch(A.tag){case 5:bt=A.stateNode,$n=!1;break e;case 3:bt=A.stateNode.containerInfo,$n=!0;break e;case 4:bt=A.stateNode.containerInfo,$n=!0;break e}A=A.return}if(bt===null)throw Error(t(160));cy(g,E,p),bt=null,$n=!1;var O=p.alternate;O!==null&&(O.return=null),p.return=null}catch(q){ot(p,i,q)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)dy(i,r),i=i.sibling}function dy(r,i){var a=r.alternate,h=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(Bn(i,r),pr(r),h&4){try{Ja(3,r,r.return),ec(3,r)}catch(fe){ot(r,r.return,fe)}try{Ja(5,r,r.return)}catch(fe){ot(r,r.return,fe)}}break;case 1:Bn(i,r),pr(r),h&512&&a!==null&&Oo(a,a.return);break;case 5:if(Bn(i,r),pr(r),h&512&&a!==null&&Oo(a,a.return),r.flags&32){var p=r.stateNode;try{ii(p,"")}catch(fe){ot(r,r.return,fe)}}if(h&4&&(p=r.stateNode,p!=null)){var g=r.memoizedProps,E=a!==null?a.memoizedProps:g,A=r.type,O=r.updateQueue;if(r.updateQueue=null,O!==null)try{A==="input"&&g.type==="radio"&&g.name!=null&&Xi(p,g),eo(A,E);var q=eo(A,g);for(E=0;E<O.length;E+=2){var J=O[E],te=O[E+1];J==="style"?Zi(p,te):J==="dangerouslySetInnerHTML"?su(p,te):J==="children"?ii(p,te):Z(p,J,te,q)}switch(A){case"input":si(p,g);break;case"textarea":ru(p,g);break;case"select":var X=p._wrapperState.wasMultiple;p._wrapperState.wasMultiple=!!g.multiple;var le=g.value;le!=null?On(p,!!g.multiple,le,!1):X!==!!g.multiple&&(g.defaultValue!=null?On(p,!!g.multiple,g.defaultValue,!0):On(p,!!g.multiple,g.multiple?[]:"",!1))}p[$a]=g}catch(fe){ot(r,r.return,fe)}}break;case 6:if(Bn(i,r),pr(r),h&4){if(r.stateNode===null)throw Error(t(162));p=r.stateNode,g=r.memoizedProps;try{p.nodeValue=g}catch(fe){ot(r,r.return,fe)}}break;case 3:if(Bn(i,r),pr(r),h&4&&a!==null&&a.memoizedState.isDehydrated)try{gs(i.containerInfo)}catch(fe){ot(r,r.return,fe)}break;case 4:Bn(i,r),pr(r);break;case 13:Bn(i,r),pr(r),p=r.child,p.flags&8192&&(g=p.memoizedState!==null,p.stateNode.isHidden=g,!g||p.alternate!==null&&p.alternate.memoizedState!==null||(Hd=Ke())),h&4&&hy(r);break;case 22:if(J=a!==null&&a.memoizedState!==null,r.mode&1?(zt=(q=zt)||J,Bn(i,r),zt=q):Bn(i,r),pr(r),h&8192){if(q=r.memoizedState!==null,(r.stateNode.isHidden=q)&&!J&&(r.mode&1)!==0)for(he=r,J=r.child;J!==null;){for(te=he=J;he!==null;){switch(X=he,le=X.child,X.tag){case 0:case 11:case 14:case 15:Ja(4,X,X.return);break;case 1:Oo(X,X.return);var de=X.stateNode;if(typeof de.componentWillUnmount=="function"){h=X,a=X.return;try{i=h,de.props=i.memoizedProps,de.state=i.memoizedState,de.componentWillUnmount()}catch(fe){ot(h,a,fe)}}break;case 5:Oo(X,X.return);break;case 22:if(X.memoizedState!==null){my(te);continue}}le!==null?(le.return=X,he=le):my(te)}J=J.sibling}e:for(J=null,te=r;;){if(te.tag===5){if(J===null){J=te;try{p=te.stateNode,q?(g=p.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none"):(A=te.stateNode,O=te.memoizedProps.style,E=O!=null&&O.hasOwnProperty("display")?O.display:null,A.style.display=as("display",E))}catch(fe){ot(r,r.return,fe)}}}else if(te.tag===6){if(J===null)try{te.stateNode.nodeValue=q?"":te.memoizedProps}catch(fe){ot(r,r.return,fe)}}else if((te.tag!==22&&te.tag!==23||te.memoizedState===null||te===r)&&te.child!==null){te.child.return=te,te=te.child;continue}if(te===r)break e;for(;te.sibling===null;){if(te.return===null||te.return===r)break e;J===te&&(J=null),te=te.return}J===te&&(J=null),te.sibling.return=te.return,te=te.sibling}}break;case 19:Bn(i,r),pr(r),h&4&&hy(r);break;case 21:break;default:Bn(i,r),pr(r)}}function pr(r){var i=r.flags;if(i&2){try{e:{for(var a=r.return;a!==null;){if(ly(a)){var h=a;break e}a=a.return}throw Error(t(160))}switch(h.tag){case 5:var p=h.stateNode;h.flags&32&&(ii(p,""),h.flags&=-33);var g=uy(r);Bd(r,g,p);break;case 3:case 4:var E=h.stateNode.containerInfo,A=uy(r);$d(r,A,E);break;default:throw Error(t(161))}}catch(O){ot(r,r.return,O)}r.flags&=-3}i&4096&&(r.flags&=-4097)}function Ox(r,i,a){he=r,fy(r)}function fy(r,i,a){for(var h=(r.mode&1)!==0;he!==null;){var p=he,g=p.child;if(p.tag===22&&h){var E=p.memoizedState!==null||Zu;if(!E){var A=p.alternate,O=A!==null&&A.memoizedState!==null||zt;A=Zu;var q=zt;if(Zu=E,(zt=O)&&!q)for(he=p;he!==null;)E=he,O=E.child,E.tag===22&&E.memoizedState!==null?gy(p):O!==null?(O.return=E,he=O):gy(p);for(;g!==null;)he=g,fy(g),g=g.sibling;he=p,Zu=A,zt=q}py(r)}else(p.subtreeFlags&8772)!==0&&g!==null?(g.return=p,he=g):py(r)}}function py(r){for(;he!==null;){var i=he;if((i.flags&8772)!==0){var a=i.alternate;try{if((i.flags&8772)!==0)switch(i.tag){case 0:case 11:case 15:zt||ec(5,i);break;case 1:var h=i.stateNode;if(i.flags&4&&!zt)if(a===null)h.componentDidMount();else{var p=i.elementType===i.type?a.memoizedProps:Un(i.type,a.memoizedProps);h.componentDidUpdate(p,a.memoizedState,h.__reactInternalSnapshotBeforeUpdate)}var g=i.updateQueue;g!==null&&mg(i,g,h);break;case 3:var E=i.updateQueue;if(E!==null){if(a=null,i.child!==null)switch(i.child.tag){case 5:a=i.child.stateNode;break;case 1:a=i.child.stateNode}mg(i,E,a)}break;case 5:var A=i.stateNode;if(a===null&&i.flags&4){a=A;var O=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":O.autoFocus&&a.focus();break;case"img":O.src&&(a.src=O.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var q=i.alternate;if(q!==null){var J=q.memoizedState;if(J!==null){var te=J.dehydrated;te!==null&&gs(te)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}zt||i.flags&512&&Ud(i)}catch(X){ot(i,i.return,X)}}if(i===r){he=null;break}if(a=i.sibling,a!==null){a.return=i.return,he=a;break}he=i.return}}function my(r){for(;he!==null;){var i=he;if(i===r){he=null;break}var a=i.sibling;if(a!==null){a.return=i.return,he=a;break}he=i.return}}function gy(r){for(;he!==null;){var i=he;try{switch(i.tag){case 0:case 11:case 15:var a=i.return;try{ec(4,i)}catch(O){ot(i,a,O)}break;case 1:var h=i.stateNode;if(typeof h.componentDidMount=="function"){var p=i.return;try{h.componentDidMount()}catch(O){ot(i,p,O)}}var g=i.return;try{Ud(i)}catch(O){ot(i,g,O)}break;case 5:var E=i.return;try{Ud(i)}catch(O){ot(i,E,O)}}}catch(O){ot(i,i.return,O)}if(i===r){he=null;break}var A=i.sibling;if(A!==null){A.return=i.return,he=A;break}he=i.return}}var Lx=Math.ceil,tc=ne.ReactCurrentDispatcher,zd=ne.ReactCurrentOwner,kn=ne.ReactCurrentBatchConfig,Me=0,St=null,mt=null,Nt=0,_n=0,Lo=Es(0),xt=0,Za=null,Ci=0,nc=0,qd=0,el=null,rn=null,Hd=0,Vo=1/0,Hr=null,rc=!1,Wd=null,ks=null,sc=!1,Rs=null,ic=0,tl=0,Gd=null,oc=-1,ac=0;function Xt(){return(Me&6)!==0?Ke():oc!==-1?oc:oc=Ke()}function As(r){return(r.mode&1)===0?1:(Me&2)!==0&&Nt!==0?Nt&-Nt:vx.transition!==null?(ac===0&&(ac=xa()),ac):(r=De,r!==0||(r=window.event,r=r===void 0?16:co(r.type)),r)}function zn(r,i,a,h){if(50<tl)throw tl=0,Gd=null,Error(t(185));pi(r,a,h),((Me&2)===0||r!==St)&&(r===St&&((Me&2)===0&&(nc|=a),xt===4&&Ps(r,Nt)),sn(r,h),a===1&&Me===0&&(i.mode&1)===0&&(Vo=Ke()+500,Lu&&Ts()))}function sn(r,i){var a=r.callbackNode;fi(r,i);var h=Nr(r,r===St?Nt:0);if(h===0)a!==null&&ro(a),r.callbackNode=null,r.callbackPriority=0;else if(i=h&-h,r.callbackPriority!==i){if(a!=null&&ro(a),i===1)r.tag===0?yx(vy.bind(null,r)):rg(vy.bind(null,r)),fx(function(){(Me&6)===0&&Ts()}),a=null;else{switch(tr(h)){case 1:a=so;break;case 4:a=_a;break;case 16:a=ui;break;case 536870912:a=io;break;default:a=ui}a=Cy(a,yy.bind(null,r))}r.callbackPriority=i,r.callbackNode=a}}function yy(r,i){if(oc=-1,ac=0,(Me&6)!==0)throw Error(t(327));var a=r.callbackNode;if(Mo()&&r.callbackNode!==a)return null;var h=Nr(r,r===St?Nt:0);if(h===0)return null;if((h&30)!==0||(h&r.expiredLanes)!==0||i)i=lc(r,h);else{i=h;var p=Me;Me|=2;var g=wy();(St!==r||Nt!==i)&&(Hr=null,Vo=Ke()+500,Ri(r,i));do try{jx();break}catch(A){_y(r,A)}while(!0);hd(),tc.current=g,Me=p,mt!==null?i=0:(St=null,Nt=0,i=xt)}if(i!==0){if(i===2&&(p=Ea(r),p!==0&&(h=p,i=Kd(r,p))),i===1)throw a=Za,Ri(r,0),Ps(r,h),sn(r,Ke()),a;if(i===6)Ps(r,h);else{if(p=r.current.alternate,(h&30)===0&&!Vx(p)&&(i=lc(r,h),i===2&&(g=Ea(r),g!==0&&(h=g,i=Kd(r,g))),i===1))throw a=Za,Ri(r,0),Ps(r,h),sn(r,Ke()),a;switch(r.finishedWork=p,r.finishedLanes=h,i){case 0:case 1:throw Error(t(345));case 2:Ai(r,rn,Hr);break;case 3:if(Ps(r,h),(h&130023424)===h&&(i=Hd+500-Ke(),10<i)){if(Nr(r,0)!==0)break;if(p=r.suspendedLanes,(p&h)!==h){Xt(),r.pingedLanes|=r.suspendedLanes&p;break}r.timeoutHandle=ed(Ai.bind(null,r,rn,Hr),i);break}Ai(r,rn,Hr);break;case 4:if(Ps(r,h),(h&4194240)===h)break;for(i=r.eventTimes,p=-1;0<h;){var E=31-dn(h);g=1<<E,E=i[E],E>p&&(p=E),h&=~g}if(h=p,h=Ke()-h,h=(120>h?120:480>h?480:1080>h?1080:1920>h?1920:3e3>h?3e3:4320>h?4320:1960*Lx(h/1960))-h,10<h){r.timeoutHandle=ed(Ai.bind(null,r,rn,Hr),h);break}Ai(r,rn,Hr);break;case 5:Ai(r,rn,Hr);break;default:throw Error(t(329))}}}return sn(r,Ke()),r.callbackNode===a?yy.bind(null,r):null}function Kd(r,i){var a=el;return r.current.memoizedState.isDehydrated&&(Ri(r,i).flags|=256),r=lc(r,i),r!==2&&(i=rn,rn=a,i!==null&&Qd(i)),r}function Qd(r){rn===null?rn=r:rn.push.apply(rn,r)}function Vx(r){for(var i=r;;){if(i.flags&16384){var a=i.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var h=0;h<a.length;h++){var p=a[h],g=p.getSnapshot;p=p.value;try{if(!jn(g(),p))return!1}catch{return!1}}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Ps(r,i){for(i&=~qd,i&=~nc,r.suspendedLanes|=i,r.pingedLanes&=~i,r=r.expirationTimes;0<i;){var a=31-dn(i),h=1<<a;r[a]=-1,i&=~h}}function vy(r){if((Me&6)!==0)throw Error(t(327));Mo();var i=Nr(r,0);if((i&1)===0)return sn(r,Ke()),null;var a=lc(r,i);if(r.tag!==0&&a===2){var h=Ea(r);h!==0&&(i=h,a=Kd(r,h))}if(a===1)throw a=Za,Ri(r,0),Ps(r,i),sn(r,Ke()),a;if(a===6)throw Error(t(345));return r.finishedWork=r.current.alternate,r.finishedLanes=i,Ai(r,rn,Hr),sn(r,Ke()),null}function Yd(r,i){var a=Me;Me|=1;try{return r(i)}finally{Me=a,Me===0&&(Vo=Ke()+500,Lu&&Ts())}}function ki(r){Rs!==null&&Rs.tag===0&&(Me&6)===0&&Mo();var i=Me;Me|=1;var a=kn.transition,h=De;try{if(kn.transition=null,De=1,r)return r()}finally{De=h,kn.transition=a,Me=i,(Me&6)===0&&Ts()}}function Xd(){_n=Lo.current,Ye(Lo)}function Ri(r,i){r.finishedWork=null,r.finishedLanes=0;var a=r.timeoutHandle;if(a!==-1&&(r.timeoutHandle=-1,dx(a)),mt!==null)for(a=mt.return;a!==null;){var h=a;switch(od(h),h.tag){case 1:h=h.type.childContextTypes,h!=null&&Du();break;case 3:No(),Ye(en),Ye(Ut),_d();break;case 5:yd(h);break;case 4:No();break;case 13:Ye(tt);break;case 19:Ye(tt);break;case 10:dd(h.type._context);break;case 22:case 23:Xd()}a=a.return}if(St=r,mt=r=bs(r.current,null),Nt=_n=i,xt=0,Za=null,qd=nc=Ci=0,rn=el=null,Ti!==null){for(i=0;i<Ti.length;i++)if(a=Ti[i],h=a.interleaved,h!==null){a.interleaved=null;var p=h.next,g=a.pending;if(g!==null){var E=g.next;g.next=p,h.next=E}a.pending=h}Ti=null}return r}function _y(r,i){do{var a=mt;try{if(hd(),Hu.current=Qu,Wu){for(var h=nt.memoizedState;h!==null;){var p=h.queue;p!==null&&(p.pending=null),h=h.next}Wu=!1}if(Si=0,It=Et=nt=null,Ga=!1,Ka=0,zd.current=null,a===null||a.return===null){xt=1,Za=i,mt=null;break}e:{var g=r,E=a.return,A=a,O=i;if(i=Nt,A.flags|=32768,O!==null&&typeof O=="object"&&typeof O.then=="function"){var q=O,J=A,te=J.tag;if((J.mode&1)===0&&(te===0||te===11||te===15)){var X=J.alternate;X?(J.updateQueue=X.updateQueue,J.memoizedState=X.memoizedState,J.lanes=X.lanes):(J.updateQueue=null,J.memoizedState=null)}var le=qg(E);if(le!==null){le.flags&=-257,Hg(le,E,A,g,i),le.mode&1&&zg(g,q,i),i=le,O=q;var de=i.updateQueue;if(de===null){var fe=new Set;fe.add(O),i.updateQueue=fe}else de.add(O);break e}else{if((i&1)===0){zg(g,q,i),Jd();break e}O=Error(t(426))}}else if(Je&&A.mode&1){var ut=qg(E);if(ut!==null){(ut.flags&65536)===0&&(ut.flags|=256),Hg(ut,E,A,g,i),ud(Do(O,A));break e}}g=O=Do(O,A),xt!==4&&(xt=2),el===null?el=[g]:el.push(g),g=E;do{switch(g.tag){case 3:g.flags|=65536,i&=-i,g.lanes|=i;var $=$g(g,O,i);pg(g,$);break e;case 1:A=O;var M=g.type,z=g.stateNode;if((g.flags&128)===0&&(typeof M.getDerivedStateFromError=="function"||z!==null&&typeof z.componentDidCatch=="function"&&(ks===null||!ks.has(z)))){g.flags|=65536,i&=-i,g.lanes|=i;var re=Bg(g,A,i);pg(g,re);break e}}g=g.return}while(g!==null)}xy(a)}catch(pe){i=pe,mt===a&&a!==null&&(mt=a=a.return);continue}break}while(!0)}function wy(){var r=tc.current;return tc.current=Qu,r===null?Qu:r}function Jd(){(xt===0||xt===3||xt===2)&&(xt=4),St===null||(Ci&268435455)===0&&(nc&268435455)===0||Ps(St,Nt)}function lc(r,i){var a=Me;Me|=2;var h=wy();(St!==r||Nt!==i)&&(Hr=null,Ri(r,i));do try{Mx();break}catch(p){_y(r,p)}while(!0);if(hd(),Me=a,tc.current=h,mt!==null)throw Error(t(261));return St=null,Nt=0,xt}function Mx(){for(;mt!==null;)Ey(mt)}function jx(){for(;mt!==null&&!li();)Ey(mt)}function Ey(r){var i=Sy(r.alternate,r,_n);r.memoizedProps=r.pendingProps,i===null?xy(r):mt=i,zd.current=null}function xy(r){var i=r;do{var a=i.alternate;if(r=i.return,(i.flags&32768)===0){if(a=Px(a,i,_n),a!==null){mt=a;return}}else{if(a=bx(a,i),a!==null){a.flags&=32767,mt=a;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{xt=6,mt=null;return}}if(i=i.sibling,i!==null){mt=i;return}mt=i=r}while(i!==null);xt===0&&(xt=5)}function Ai(r,i,a){var h=De,p=kn.transition;try{kn.transition=null,De=1,Fx(r,i,a,h)}finally{kn.transition=p,De=h}return null}function Fx(r,i,a,h){do Mo();while(Rs!==null);if((Me&6)!==0)throw Error(t(327));a=r.finishedWork;var p=r.finishedLanes;if(a===null)return null;if(r.finishedWork=null,r.finishedLanes=0,a===r.current)throw Error(t(177));r.callbackNode=null,r.callbackPriority=0;var g=a.lanes|a.childLanes;if(jh(r,g),r===St&&(mt=St=null,Nt=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||sc||(sc=!0,Cy(ui,function(){return Mo(),null})),g=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||g){g=kn.transition,kn.transition=null;var E=De;De=1;var A=Me;Me|=4,zd.current=null,Dx(r,a),dy(a,r),ix(Jh),Lr=!!Xh,Jh=Xh=null,r.current=a,Ox(a),br(),Me=A,De=E,kn.transition=g}else r.current=a;if(sc&&(sc=!1,Rs=r,ic=p),g=r.pendingLanes,g===0&&(ks=null),mu(a.stateNode),sn(r,Ke()),i!==null)for(h=r.onRecoverableError,a=0;a<i.length;a++)p=i[a],h(p.value,{componentStack:p.stack,digest:p.digest});if(rc)throw rc=!1,r=Wd,Wd=null,r;return(ic&1)!==0&&r.tag!==0&&Mo(),g=r.pendingLanes,(g&1)!==0?r===Gd?tl++:(tl=0,Gd=r):tl=0,Ts(),null}function Mo(){if(Rs!==null){var r=tr(ic),i=kn.transition,a=De;try{if(kn.transition=null,De=16>r?16:r,Rs===null)var h=!1;else{if(r=Rs,Rs=null,ic=0,(Me&6)!==0)throw Error(t(331));var p=Me;for(Me|=4,he=r.current;he!==null;){var g=he,E=g.child;if((he.flags&16)!==0){var A=g.deletions;if(A!==null){for(var O=0;O<A.length;O++){var q=A[O];for(he=q;he!==null;){var J=he;switch(J.tag){case 0:case 11:case 15:Ja(8,J,g)}var te=J.child;if(te!==null)te.return=J,he=te;else for(;he!==null;){J=he;var X=J.sibling,le=J.return;if(ay(J),J===q){he=null;break}if(X!==null){X.return=le,he=X;break}he=le}}}var de=g.alternate;if(de!==null){var fe=de.child;if(fe!==null){de.child=null;do{var ut=fe.sibling;fe.sibling=null,fe=ut}while(fe!==null)}}he=g}}if((g.subtreeFlags&2064)!==0&&E!==null)E.return=g,he=E;else e:for(;he!==null;){if(g=he,(g.flags&2048)!==0)switch(g.tag){case 0:case 11:case 15:Ja(9,g,g.return)}var $=g.sibling;if($!==null){$.return=g.return,he=$;break e}he=g.return}}var M=r.current;for(he=M;he!==null;){E=he;var z=E.child;if((E.subtreeFlags&2064)!==0&&z!==null)z.return=E,he=z;else e:for(E=M;he!==null;){if(A=he,(A.flags&2048)!==0)try{switch(A.tag){case 0:case 11:case 15:ec(9,A)}}catch(pe){ot(A,A.return,pe)}if(A===E){he=null;break e}var re=A.sibling;if(re!==null){re.return=A.return,he=re;break e}he=A.return}}if(Me=p,Ts(),hn&&typeof hn.onPostCommitFiberRoot=="function")try{hn.onPostCommitFiberRoot(ci,r)}catch{}h=!0}return h}finally{De=a,kn.transition=i}}return!1}function Ty(r,i,a){i=Do(a,i),i=$g(r,i,1),r=Ss(r,i,1),i=Xt(),r!==null&&(pi(r,1,i),sn(r,i))}function ot(r,i,a){if(r.tag===3)Ty(r,r,a);else for(;i!==null;){if(i.tag===3){Ty(i,r,a);break}else if(i.tag===1){var h=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(ks===null||!ks.has(h))){r=Do(a,r),r=Bg(i,r,1),i=Ss(i,r,1),r=Xt(),i!==null&&(pi(i,1,r),sn(i,r));break}}i=i.return}}function Ux(r,i,a){var h=r.pingCache;h!==null&&h.delete(i),i=Xt(),r.pingedLanes|=r.suspendedLanes&a,St===r&&(Nt&a)===a&&(xt===4||xt===3&&(Nt&130023424)===Nt&&500>Ke()-Hd?Ri(r,0):qd|=a),sn(r,i)}function Iy(r,i){i===0&&((r.mode&1)===0?i=1:(i=fs,fs<<=1,(fs&130023424)===0&&(fs=4194304)));var a=Xt();r=Br(r,i),r!==null&&(pi(r,i,a),sn(r,a))}function $x(r){var i=r.memoizedState,a=0;i!==null&&(a=i.retryLane),Iy(r,a)}function Bx(r,i){var a=0;switch(r.tag){case 13:var h=r.stateNode,p=r.memoizedState;p!==null&&(a=p.retryLane);break;case 19:h=r.stateNode;break;default:throw Error(t(314))}h!==null&&h.delete(i),Iy(r,a)}var Sy;Sy=function(r,i,a){if(r!==null)if(r.memoizedProps!==i.pendingProps||en.current)nn=!0;else{if((r.lanes&a)===0&&(i.flags&128)===0)return nn=!1,Ax(r,i,a);nn=(r.flags&131072)!==0}else nn=!1,Je&&(i.flags&1048576)!==0&&sg(i,Mu,i.index);switch(i.lanes=0,i.tag){case 2:var h=i.type;Ju(r,i),r=i.pendingProps;var p=So(i,Ut.current);bo(i,a),p=xd(null,i,h,r,p,a);var g=Td();return i.flags|=1,typeof p=="object"&&p!==null&&typeof p.render=="function"&&p.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,tn(h)?(g=!0,Ou(i)):g=!1,i.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,md(i),p.updater=Yu,i.stateNode=p,p._reactInternals=i,Ad(i,h,r,a),i=Dd(null,i,h,!0,g,a)):(i.tag=0,Je&&g&&id(i),Yt(null,i,p,a),i=i.child),i;case 16:h=i.elementType;e:{switch(Ju(r,i),r=i.pendingProps,p=h._init,h=p(h._payload),i.type=h,p=i.tag=qx(h),r=Un(h,r),p){case 0:i=Nd(null,i,h,r,a);break e;case 1:i=Xg(null,i,h,r,a);break e;case 11:i=Wg(null,i,h,r,a);break e;case 14:i=Gg(null,i,h,Un(h.type,r),a);break e}throw Error(t(306,h,""))}return i;case 0:return h=i.type,p=i.pendingProps,p=i.elementType===h?p:Un(h,p),Nd(r,i,h,p,a);case 1:return h=i.type,p=i.pendingProps,p=i.elementType===h?p:Un(h,p),Xg(r,i,h,p,a);case 3:e:{if(Jg(i),r===null)throw Error(t(387));h=i.pendingProps,g=i.memoizedState,p=g.element,fg(r,i),zu(i,h,null,a);var E=i.memoizedState;if(h=E.element,g.isDehydrated)if(g={element:h,isDehydrated:!1,cache:E.cache,pendingSuspenseBoundaries:E.pendingSuspenseBoundaries,transitions:E.transitions},i.updateQueue.baseState=g,i.memoizedState=g,i.flags&256){p=Do(Error(t(423)),i),i=Zg(r,i,h,a,p);break e}else if(h!==p){p=Do(Error(t(424)),i),i=Zg(r,i,h,a,p);break e}else for(vn=ws(i.stateNode.containerInfo.firstChild),yn=i,Je=!0,Fn=null,a=hg(i,null,h,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Ro(),h===p){i=qr(r,i,a);break e}Yt(r,i,h,a)}i=i.child}return i;case 5:return gg(i),r===null&&ld(i),h=i.type,p=i.pendingProps,g=r!==null?r.memoizedProps:null,E=p.children,Zh(h,p)?E=null:g!==null&&Zh(h,g)&&(i.flags|=32),Yg(r,i),Yt(r,i,E,a),i.child;case 6:return r===null&&ld(i),null;case 13:return ey(r,i,a);case 4:return gd(i,i.stateNode.containerInfo),h=i.pendingProps,r===null?i.child=Ao(i,null,h,a):Yt(r,i,h,a),i.child;case 11:return h=i.type,p=i.pendingProps,p=i.elementType===h?p:Un(h,p),Wg(r,i,h,p,a);case 7:return Yt(r,i,i.pendingProps,a),i.child;case 8:return Yt(r,i,i.pendingProps.children,a),i.child;case 12:return Yt(r,i,i.pendingProps.children,a),i.child;case 10:e:{if(h=i.type._context,p=i.pendingProps,g=i.memoizedProps,E=p.value,We(Uu,h._currentValue),h._currentValue=E,g!==null)if(jn(g.value,E)){if(g.children===p.children&&!en.current){i=qr(r,i,a);break e}}else for(g=i.child,g!==null&&(g.return=i);g!==null;){var A=g.dependencies;if(A!==null){E=g.child;for(var O=A.firstContext;O!==null;){if(O.context===h){if(g.tag===1){O=zr(-1,a&-a),O.tag=2;var q=g.updateQueue;if(q!==null){q=q.shared;var J=q.pending;J===null?O.next=O:(O.next=J.next,J.next=O),q.pending=O}}g.lanes|=a,O=g.alternate,O!==null&&(O.lanes|=a),fd(g.return,a,i),A.lanes|=a;break}O=O.next}}else if(g.tag===10)E=g.type===i.type?null:g.child;else if(g.tag===18){if(E=g.return,E===null)throw Error(t(341));E.lanes|=a,A=E.alternate,A!==null&&(A.lanes|=a),fd(E,a,i),E=g.sibling}else E=g.child;if(E!==null)E.return=g;else for(E=g;E!==null;){if(E===i){E=null;break}if(g=E.sibling,g!==null){g.return=E.return,E=g;break}E=E.return}g=E}Yt(r,i,p.children,a),i=i.child}return i;case 9:return p=i.type,h=i.pendingProps.children,bo(i,a),p=Sn(p),h=h(p),i.flags|=1,Yt(r,i,h,a),i.child;case 14:return h=i.type,p=Un(h,i.pendingProps),p=Un(h.type,p),Gg(r,i,h,p,a);case 15:return Kg(r,i,i.type,i.pendingProps,a);case 17:return h=i.type,p=i.pendingProps,p=i.elementType===h?p:Un(h,p),Ju(r,i),i.tag=1,tn(h)?(r=!0,Ou(i)):r=!1,bo(i,a),Fg(i,h,p),Ad(i,h,p,a),Dd(null,i,h,!0,r,a);case 19:return ny(r,i,a);case 22:return Qg(r,i,a)}throw Error(t(156,i.tag))};function Cy(r,i){return va(r,i)}function zx(r,i,a,h){this.tag=r,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rn(r,i,a,h){return new zx(r,i,a,h)}function Zd(r){return r=r.prototype,!(!r||!r.isReactComponent)}function qx(r){if(typeof r=="function")return Zd(r)?1:0;if(r!=null){if(r=r.$$typeof,r===F)return 11;if(r===_t)return 14}return 2}function bs(r,i){var a=r.alternate;return a===null?(a=Rn(r.tag,i,r.key,r.mode),a.elementType=r.elementType,a.type=r.type,a.stateNode=r.stateNode,a.alternate=r,r.alternate=a):(a.pendingProps=i,a.type=r.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=r.flags&14680064,a.childLanes=r.childLanes,a.lanes=r.lanes,a.child=r.child,a.memoizedProps=r.memoizedProps,a.memoizedState=r.memoizedState,a.updateQueue=r.updateQueue,i=r.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=r.sibling,a.index=r.index,a.ref=r.ref,a}function uc(r,i,a,h,p,g){var E=2;if(h=r,typeof r=="function")Zd(r)&&(E=1);else if(typeof r=="string")E=5;else e:switch(r){case k:return Pi(a.children,p,g,i);case S:E=8,p|=8;break;case C:return r=Rn(12,a,i,p|2),r.elementType=C,r.lanes=g,r;case R:return r=Rn(13,a,i,p),r.elementType=R,r.lanes=g,r;case Oe:return r=Rn(19,a,i,p),r.elementType=Oe,r.lanes=g,r;case Be:return cc(a,p,g,i);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case b:E=10;break e;case D:E=9;break e;case F:E=11;break e;case _t:E=14;break e;case wt:E=16,h=null;break e}throw Error(t(130,r==null?r:typeof r,""))}return i=Rn(E,a,i,p),i.elementType=r,i.type=h,i.lanes=g,i}function Pi(r,i,a,h){return r=Rn(7,r,h,i),r.lanes=a,r}function cc(r,i,a,h){return r=Rn(22,r,h,i),r.elementType=Be,r.lanes=a,r.stateNode={isHidden:!1},r}function ef(r,i,a){return r=Rn(6,r,null,i),r.lanes=a,r}function tf(r,i,a){return i=Rn(4,r.children!==null?r.children:[],r.key,i),i.lanes=a,i.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},i}function Hx(r,i,a,h,p){this.tag=i,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ta(0),this.expirationTimes=Ta(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ta(0),this.identifierPrefix=h,this.onRecoverableError=p,this.mutableSourceEagerHydrationData=null}function nf(r,i,a,h,p,g,E,A,O){return r=new Hx(r,i,a,A,O),i===1?(i=1,g===!0&&(i|=8)):i=0,g=Rn(3,null,null,i),r.current=g,g.stateNode=r,g.memoizedState={element:h,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},md(g),r}function Wx(r,i,a){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:se,key:h==null?null:""+h,children:r,containerInfo:i,implementation:a}}function ky(r){if(!r)return xs;r=r._reactInternals;e:{if(Vn(r)!==r||r.tag!==1)throw Error(t(170));var i=r;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(tn(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(t(171))}if(r.tag===1){var a=r.type;if(tn(a))return tg(r,a,i)}return i}function Ry(r,i,a,h,p,g,E,A,O){return r=nf(a,h,!0,r,p,g,E,A,O),r.context=ky(null),a=r.current,h=Xt(),p=As(a),g=zr(h,p),g.callback=i??null,Ss(a,g,p),r.current.lanes=p,pi(r,p,h),sn(r,h),r}function hc(r,i,a,h){var p=i.current,g=Xt(),E=As(p);return a=ky(a),i.context===null?i.context=a:i.pendingContext=a,i=zr(g,E),i.payload={element:r},h=h===void 0?null:h,h!==null&&(i.callback=h),r=Ss(p,i,E),r!==null&&(zn(r,p,E,g),Bu(r,p,E)),E}function dc(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function Ay(r,i){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var a=r.retryLane;r.retryLane=a!==0&&a<i?a:i}}function rf(r,i){Ay(r,i),(r=r.alternate)&&Ay(r,i)}function Gx(){return null}var Py=typeof reportError=="function"?reportError:function(r){console.error(r)};function sf(r){this._internalRoot=r}fc.prototype.render=sf.prototype.render=function(r){var i=this._internalRoot;if(i===null)throw Error(t(409));hc(r,i,null,null)},fc.prototype.unmount=sf.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var i=r.containerInfo;ki(function(){hc(null,r,null,null)}),i[jr]=null}};function fc(r){this._internalRoot=r}fc.prototype.unstable_scheduleHydration=function(r){if(r){var i=ka();r={blockedOn:null,target:r,priority:i};for(var a=0;a<fn.length&&i!==0&&i<fn[a].priority;a++);fn.splice(a,0,r),a===0&&lo(r)}};function of(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function pc(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function by(){}function Kx(r,i,a,h,p){if(p){if(typeof h=="function"){var g=h;h=function(){var q=dc(E);g.call(q)}}var E=Ry(i,h,r,0,null,!1,!1,"",by);return r._reactRootContainer=E,r[jr]=E.current,Fa(r.nodeType===8?r.parentNode:r),ki(),E}for(;p=r.lastChild;)r.removeChild(p);if(typeof h=="function"){var A=h;h=function(){var q=dc(O);A.call(q)}}var O=nf(r,0,!1,null,null,!1,!1,"",by);return r._reactRootContainer=O,r[jr]=O.current,Fa(r.nodeType===8?r.parentNode:r),ki(function(){hc(i,O,a,h)}),O}function mc(r,i,a,h,p){var g=a._reactRootContainer;if(g){var E=g;if(typeof p=="function"){var A=p;p=function(){var O=dc(E);A.call(O)}}hc(i,E,r,p)}else E=Kx(a,i,r,p,h);return dc(E)}Sa=function(r){switch(r.tag){case 3:var i=r.stateNode;if(i.current.memoizedState.isDehydrated){var a=Fe(i.pendingLanes);a!==0&&(Ia(i,a|1),sn(i,Ke()),(Me&6)===0&&(Vo=Ke()+500,Ts()))}break;case 13:ki(function(){var h=Br(r,1);if(h!==null){var p=Xt();zn(h,r,1,p)}}),rf(r,1)}},oo=function(r){if(r.tag===13){var i=Br(r,134217728);if(i!==null){var a=Xt();zn(i,r,134217728,a)}rf(r,134217728)}},Ca=function(r){if(r.tag===13){var i=As(r),a=Br(r,i);if(a!==null){var h=Xt();zn(a,r,i,h)}rf(r,i)}},ka=function(){return De},Ra=function(r,i){var a=De;try{return De=r,i()}finally{De=a}},Rr=function(r,i,a){switch(i){case"input":if(si(r,a),i=a.name,a.type==="radio"&&i!=null){for(a=r;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<a.length;i++){var h=a[i];if(h!==r&&h.form===r.form){var p=Nu(h);if(!p)throw Error(t(90));ua(h),si(h,p)}}}break;case"textarea":ru(r,a);break;case"select":i=a.value,i!=null&&On(r,!!a.multiple,i,!1)}},ou=Yd,au=ki;var Qx={usingClientEntryPoint:!1,Events:[Ba,To,Nu,us,cs,Yd]},nl={findFiberByHostInstance:_i,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Yx={bundleType:nl.bundleType,version:nl.version,rendererPackageName:nl.rendererPackageName,rendererConfig:nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ne.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=pu(r),r===null?null:r.stateNode},findFiberByHostInstance:nl.findFiberByHostInstance||Gx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var gc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!gc.isDisabled&&gc.supportsFiber)try{ci=gc.inject(Yx),hn=gc}catch{}}return on.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Qx,on.createPortal=function(r,i){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!of(i))throw Error(t(200));return Wx(r,i,null,a)},on.createRoot=function(r,i){if(!of(r))throw Error(t(299));var a=!1,h="",p=Py;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(h=i.identifierPrefix),i.onRecoverableError!==void 0&&(p=i.onRecoverableError)),i=nf(r,1,!1,null,null,a,!1,h,p),r[jr]=i.current,Fa(r.nodeType===8?r.parentNode:r),new sf(i)},on.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var i=r._reactInternals;if(i===void 0)throw typeof r.render=="function"?Error(t(188)):(r=Object.keys(r).join(","),Error(t(268,r)));return r=pu(i),r=r===null?null:r.stateNode,r},on.flushSync=function(r){return ki(r)},on.hydrate=function(r,i,a){if(!pc(i))throw Error(t(200));return mc(null,r,i,!0,a)},on.hydrateRoot=function(r,i,a){if(!of(r))throw Error(t(405));var h=a!=null&&a.hydratedSources||null,p=!1,g="",E=Py;if(a!=null&&(a.unstable_strictMode===!0&&(p=!0),a.identifierPrefix!==void 0&&(g=a.identifierPrefix),a.onRecoverableError!==void 0&&(E=a.onRecoverableError)),i=Ry(i,null,r,1,a??null,p,!1,g,E),r[jr]=i.current,Fa(r),h)for(r=0;r<h.length;r++)a=h[r],p=a._getVersion,p=p(a._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[a,p]:i.mutableSourceEagerHydrationData.push(a,p);return new fc(i)},on.render=function(r,i,a){if(!pc(i))throw Error(t(200));return mc(null,r,i,!1,a)},on.unmountComponentAtNode=function(r){if(!pc(r))throw Error(t(40));return r._reactRootContainer?(ki(function(){mc(null,null,r,!1,function(){r._reactRootContainer=null,r[jr]=null})}),!0):!1},on.unstable_batchedUpdates=Yd,on.unstable_renderSubtreeIntoContainer=function(r,i,a,h){if(!pc(a))throw Error(t(200));if(r==null||r._reactInternals===void 0)throw Error(t(38));return mc(r,i,a,!1,h)},on.version="18.3.1-next-f1338f8080-20240426",on}var Fy;function oT(){if(Fy)return uf.exports;Fy=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),uf.exports=iT(),uf.exports}var Uy;function aT(){if(Uy)return yc;Uy=1;var n=oT();return yc.createRoot=n.createRoot,yc.hydrateRoot=n.hydrateRoot,yc}var lT=aT();/**
 * react-router v7.9.4
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var $y="popstate";function uT(n={}){function e(s,o){let{pathname:l,search:c,hash:d}=s.location;return Pf("",{pathname:l,search:c,hash:d},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(s,o){return typeof o=="string"?o:xl(o)}return hT(e,t,null,n)}function et(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Gn(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function cT(){return Math.random().toString(36).substring(2,10)}function By(n,e){return{usr:n.state,key:n.key,idx:e}}function Pf(n,e,t=null,s){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?ea(e):e,state:t,key:e&&e.key||s||cT()}}function xl({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function ea(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let s=n.indexOf("?");s>=0&&(e.search=n.substring(s),n=n.substring(0,s)),n&&(e.pathname=n)}return e}function hT(n,e,t,s={}){let{window:o=document.defaultView,v5Compat:l=!1}=s,c=o.history,d="POP",f=null,m=_();m==null&&(m=0,c.replaceState({...c.state,idx:m},""));function _(){return(c.state||{idx:null}).idx}function x(){d="POP";let L=_(),W=L==null?null:L-m;m=L,f&&f({action:d,location:j.location,delta:W})}function T(L,W){d="PUSH";let G=Pf(j.location,L,W);m=_()+1;let Z=By(G,m),ne=j.createHref(G);try{c.pushState(Z,"",ne)}catch(ee){if(ee instanceof DOMException&&ee.name==="DataCloneError")throw ee;o.location.assign(ne)}l&&f&&f({action:d,location:j.location,delta:1})}function P(L,W){d="REPLACE";let G=Pf(j.location,L,W);m=_();let Z=By(G,m),ne=j.createHref(G);c.replaceState(Z,"",ne),l&&f&&f({action:d,location:j.location,delta:0})}function N(L){return dT(L)}let j={get action(){return d},get location(){return n(o,c)},listen(L){if(f)throw new Error("A history only accepts one active listener");return o.addEventListener($y,x),f=L,()=>{o.removeEventListener($y,x),f=null}},createHref(L){return e(o,L)},createURL:N,encodeLocation(L){let W=N(L);return{pathname:W.pathname,search:W.search,hash:W.hash}},push:T,replace:P,go(L){return c.go(L)}};return j}function dT(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),et(t,"No window.location.(origin|href) available to create URL");let s=typeof n=="string"?n:xl(n);return s=s.replace(/ $/,"%20"),!e&&s.startsWith("//")&&(s=t+s),new URL(s,t)}function U_(n,e,t="/"){return fT(n,e,t,!1)}function fT(n,e,t,s){let o=typeof e=="string"?ea(e):e,l=Jr(o.pathname||"/",t);if(l==null)return null;let c=$_(n);pT(c);let d=null;for(let f=0;d==null&&f<c.length;++f){let m=ST(l);d=TT(c[f],m,s)}return d}function $_(n,e=[],t=[],s="",o=!1){let l=(c,d,f=o,m)=>{let _={relativePath:m===void 0?c.path||"":m,caseSensitive:c.caseSensitive===!0,childrenIndex:d,route:c};if(_.relativePath.startsWith("/")){if(!_.relativePath.startsWith(s)&&f)return;et(_.relativePath.startsWith(s),`Absolute route path "${_.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),_.relativePath=_.relativePath.slice(s.length)}let x=Qr([s,_.relativePath]),T=t.concat(_);c.children&&c.children.length>0&&(et(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${x}".`),$_(c.children,e,T,x,f)),!(c.path==null&&!c.index)&&e.push({path:x,score:ET(x,c.index),routesMeta:T})};return n.forEach((c,d)=>{if(c.path===""||!c.path?.includes("?"))l(c,d);else for(let f of B_(c.path))l(c,d,!0,f)}),e}function B_(n){let e=n.split("/");if(e.length===0)return[];let[t,...s]=e,o=t.endsWith("?"),l=t.replace(/\?$/,"");if(s.length===0)return o?[l,""]:[l];let c=B_(s.join("/")),d=[];return d.push(...c.map(f=>f===""?l:[l,f].join("/"))),o&&d.push(...c),d.map(f=>n.startsWith("/")&&f===""?"/":f)}function pT(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:xT(e.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}var mT=/^:[\w-]+$/,gT=3,yT=2,vT=1,_T=10,wT=-2,zy=n=>n==="*";function ET(n,e){let t=n.split("/"),s=t.length;return t.some(zy)&&(s+=wT),e&&(s+=yT),t.filter(o=>!zy(o)).reduce((o,l)=>o+(mT.test(l)?gT:l===""?vT:_T),s)}function xT(n,e){return n.length===e.length&&n.slice(0,-1).every((s,o)=>s===e[o])?n[n.length-1]-e[e.length-1]:0}function TT(n,e,t=!1){let{routesMeta:s}=n,o={},l="/",c=[];for(let d=0;d<s.length;++d){let f=s[d],m=d===s.length-1,_=l==="/"?e:e.slice(l.length)||"/",x=$c({path:f.relativePath,caseSensitive:f.caseSensitive,end:m},_),T=f.route;if(!x&&m&&t&&!s[s.length-1].route.index&&(x=$c({path:f.relativePath,caseSensitive:f.caseSensitive,end:!1},_)),!x)return null;Object.assign(o,x.params),c.push({params:o,pathname:Qr([l,x.pathname]),pathnameBase:AT(Qr([l,x.pathnameBase])),route:T}),x.pathnameBase!=="/"&&(l=Qr([l,x.pathnameBase]))}return c}function $c(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,s]=IT(n.path,n.caseSensitive,n.end),o=e.match(t);if(!o)return null;let l=o[0],c=l.replace(/(.)\/+$/,"$1"),d=o.slice(1);return{params:s.reduce((m,{paramName:_,isOptional:x},T)=>{if(_==="*"){let N=d[T]||"";c=l.slice(0,l.length-N.length).replace(/(.)\/+$/,"$1")}const P=d[T];return x&&!P?m[_]=void 0:m[_]=(P||"").replace(/%2F/g,"/"),m},{}),pathname:l,pathnameBase:c,pattern:n}}function IT(n,e=!1,t=!0){Gn(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let s=[],o="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,f)=>(s.push({paramName:d,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(s.push({paramName:"*"}),o+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":n!==""&&n!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),s]}function ST(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Gn(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Jr(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,s=n.charAt(t);return s&&s!=="/"?null:n.slice(t)||"/"}function CT(n,e="/"){let{pathname:t,search:s="",hash:o=""}=typeof n=="string"?ea(n):n;return{pathname:t?t.startsWith("/")?t:kT(t,e):e,search:PT(s),hash:bT(o)}}function kT(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function df(n,e,t,s){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function RT(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function dp(n){let e=RT(n);return e.map((t,s)=>s===e.length-1?t.pathname:t.pathnameBase)}function fp(n,e,t,s=!1){let o;typeof n=="string"?o=ea(n):(o={...n},et(!o.pathname||!o.pathname.includes("?"),df("?","pathname","search",o)),et(!o.pathname||!o.pathname.includes("#"),df("#","pathname","hash",o)),et(!o.search||!o.search.includes("#"),df("#","search","hash",o)));let l=n===""||o.pathname==="",c=l?"/":o.pathname,d;if(c==null)d=t;else{let x=e.length-1;if(!s&&c.startsWith("..")){let T=c.split("/");for(;T[0]==="..";)T.shift(),x-=1;o.pathname=T.join("/")}d=x>=0?e[x]:"/"}let f=CT(o,d),m=c&&c!=="/"&&c.endsWith("/"),_=(l||c===".")&&t.endsWith("/");return!f.pathname.endsWith("/")&&(m||_)&&(f.pathname+="/"),f}var Qr=n=>n.join("/").replace(/\/\/+/g,"/"),AT=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),PT=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,bT=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function NT(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var z_=["POST","PUT","PATCH","DELETE"];new Set(z_);var DT=["GET",...z_];new Set(DT);var ta=V.createContext(null);ta.displayName="DataRouter";var hh=V.createContext(null);hh.displayName="DataRouterState";V.createContext(!1);var q_=V.createContext({isTransitioning:!1});q_.displayName="ViewTransition";var OT=V.createContext(new Map);OT.displayName="Fetchers";var LT=V.createContext(null);LT.displayName="Await";var Qn=V.createContext(null);Qn.displayName="Navigation";var jl=V.createContext(null);jl.displayName="Location";var Sr=V.createContext({outlet:null,matches:[],isDataRoute:!1});Sr.displayName="Route";var pp=V.createContext(null);pp.displayName="RouteError";function VT(n,{relative:e}={}){et(na(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:s}=V.useContext(Qn),{hash:o,pathname:l,search:c}=Fl(n,{relative:e}),d=l;return t!=="/"&&(d=l==="/"?t:Qr([t,l])),s.createHref({pathname:d,search:c,hash:o})}function na(){return V.useContext(jl)!=null}function Yn(){return et(na(),"useLocation() may be used only in the context of a <Router> component."),V.useContext(jl).location}var H_="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function W_(n){V.useContext(Qn).static||V.useLayoutEffect(n)}function qi(){let{isDataRoute:n}=V.useContext(Sr);return n?QT():MT()}function MT(){et(na(),"useNavigate() may be used only in the context of a <Router> component.");let n=V.useContext(ta),{basename:e,navigator:t}=V.useContext(Qn),{matches:s}=V.useContext(Sr),{pathname:o}=Yn(),l=JSON.stringify(dp(s)),c=V.useRef(!1);return W_(()=>{c.current=!0}),V.useCallback((f,m={})=>{if(Gn(c.current,H_),!c.current)return;if(typeof f=="number"){t.go(f);return}let _=fp(f,JSON.parse(l),o,m.relative==="path");n==null&&e!=="/"&&(_.pathname=_.pathname==="/"?e:Qr([e,_.pathname])),(m.replace?t.replace:t.push)(_,m.state,m)},[e,t,l,o,n])}V.createContext(null);function Fl(n,{relative:e}={}){let{matches:t}=V.useContext(Sr),{pathname:s}=Yn(),o=JSON.stringify(dp(t));return V.useMemo(()=>fp(n,JSON.parse(o),s,e==="path"),[n,o,s,e])}function jT(n,e){return G_(n,e)}function G_(n,e,t,s,o){et(na(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=V.useContext(Qn),{matches:c}=V.useContext(Sr),d=c[c.length-1],f=d?d.params:{},m=d?d.pathname:"/",_=d?d.pathnameBase:"/",x=d&&d.route;{let G=x&&x.path||"";K_(m,!x||G.endsWith("*")||G.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${m}" (under <Route path="${G}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${G}"> to <Route path="${G==="/"?"*":`${G}/*`}">.`)}let T=Yn(),P;if(e){let G=typeof e=="string"?ea(e):e;et(_==="/"||G.pathname?.startsWith(_),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${_}" but pathname "${G.pathname}" was given in the \`location\` prop.`),P=G}else P=T;let N=P.pathname||"/",j=N;if(_!=="/"){let G=_.replace(/^\//,"").split("/");j="/"+N.replace(/^\//,"").split("/").slice(G.length).join("/")}let L=U_(n,{pathname:j});Gn(x||L!=null,`No routes matched location "${P.pathname}${P.search}${P.hash}" `),Gn(L==null||L[L.length-1].route.element!==void 0||L[L.length-1].route.Component!==void 0||L[L.length-1].route.lazy!==void 0,`Matched leaf route at location "${P.pathname}${P.search}${P.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let W=zT(L&&L.map(G=>Object.assign({},G,{params:Object.assign({},f,G.params),pathname:Qr([_,l.encodeLocation?l.encodeLocation(G.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:G.pathname]),pathnameBase:G.pathnameBase==="/"?_:Qr([_,l.encodeLocation?l.encodeLocation(G.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:G.pathnameBase])})),c,t,s,o);return e&&W?V.createElement(jl.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...P},navigationType:"POP"}},W):W}function FT(){let n=KT(),e=NT(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,s="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:s},l={padding:"2px 4px",backgroundColor:s},c=null;return console.error("Error handled by React Router default ErrorBoundary:",n),c=V.createElement(V.Fragment,null,V.createElement("p",null,"💿 Hey developer 👋"),V.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",V.createElement("code",{style:l},"ErrorBoundary")," or"," ",V.createElement("code",{style:l},"errorElement")," prop on your route.")),V.createElement(V.Fragment,null,V.createElement("h2",null,"Unexpected Application Error!"),V.createElement("h3",{style:{fontStyle:"italic"}},e),t?V.createElement("pre",{style:o},t):null,c)}var UT=V.createElement(FT,null),$T=class extends V.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.unstable_onError?this.props.unstable_onError(n,e):console.error("React Router caught the following error during render",n)}render(){return this.state.error!==void 0?V.createElement(Sr.Provider,{value:this.props.routeContext},V.createElement(pp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function BT({routeContext:n,match:e,children:t}){let s=V.useContext(ta);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),V.createElement(Sr.Provider,{value:n},t)}function zT(n,e=[],t=null,s=null,o=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let l=n,c=t?.errors;if(c!=null){let m=l.findIndex(_=>_.route.id&&c?.[_.route.id]!==void 0);et(m>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),l=l.slice(0,Math.min(l.length,m+1))}let d=!1,f=-1;if(t)for(let m=0;m<l.length;m++){let _=l[m];if((_.route.HydrateFallback||_.route.hydrateFallbackElement)&&(f=m),_.route.id){let{loaderData:x,errors:T}=t,P=_.route.loader&&!x.hasOwnProperty(_.route.id)&&(!T||T[_.route.id]===void 0);if(_.route.lazy||P){d=!0,f>=0?l=l.slice(0,f+1):l=[l[0]];break}}}return l.reduceRight((m,_,x)=>{let T,P=!1,N=null,j=null;t&&(T=c&&_.route.id?c[_.route.id]:void 0,N=_.route.errorElement||UT,d&&(f<0&&x===0?(K_("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),P=!0,j=null):f===x&&(P=!0,j=_.route.hydrateFallbackElement||null)));let L=e.concat(l.slice(0,x+1)),W=()=>{let G;return T?G=N:P?G=j:_.route.Component?G=V.createElement(_.route.Component,null):_.route.element?G=_.route.element:G=m,V.createElement(BT,{match:_,routeContext:{outlet:m,matches:L,isDataRoute:t!=null},children:G})};return t&&(_.route.ErrorBoundary||_.route.errorElement||x===0)?V.createElement($T,{location:t.location,revalidation:t.revalidation,component:N,error:T,children:W(),routeContext:{outlet:null,matches:L,isDataRoute:!0},unstable_onError:s}):W()},null)}function mp(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function qT(n){let e=V.useContext(ta);return et(e,mp(n)),e}function HT(n){let e=V.useContext(hh);return et(e,mp(n)),e}function WT(n){let e=V.useContext(Sr);return et(e,mp(n)),e}function gp(n){let e=WT(n),t=e.matches[e.matches.length-1];return et(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function GT(){return gp("useRouteId")}function KT(){let n=V.useContext(pp),e=HT("useRouteError"),t=gp("useRouteError");return n!==void 0?n:e.errors?.[t]}function QT(){let{router:n}=qT("useNavigate"),e=gp("useNavigate"),t=V.useRef(!1);return W_(()=>{t.current=!0}),V.useCallback(async(o,l={})=>{Gn(t.current,H_),t.current&&(typeof o=="number"?n.navigate(o):await n.navigate(o,{fromRouteId:e,...l}))},[n,e])}var qy={};function K_(n,e,t){!e&&!qy[n]&&(qy[n]=!0,Gn(!1,t))}V.memo(YT);function YT({routes:n,future:e,state:t,unstable_onError:s}){return G_(n,void 0,t,s,e)}function XT({to:n,replace:e,state:t,relative:s}){et(na(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=V.useContext(Qn);Gn(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=V.useContext(Sr),{pathname:c}=Yn(),d=qi(),f=fp(n,dp(l),c,s==="path"),m=JSON.stringify(f);return V.useEffect(()=>{d(JSON.parse(m),{replace:e,state:t,relative:s})},[d,m,s,e,t]),null}function mr(n){et(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function JT({basename:n="/",children:e=null,location:t,navigationType:s="POP",navigator:o,static:l=!1}){et(!na(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=n.replace(/^\/*/,"/"),d=V.useMemo(()=>({basename:c,navigator:o,static:l,future:{}}),[c,o,l]);typeof t=="string"&&(t=ea(t));let{pathname:f="/",search:m="",hash:_="",state:x=null,key:T="default"}=t,P=V.useMemo(()=>{let N=Jr(f,c);return N==null?null:{location:{pathname:N,search:m,hash:_,state:x,key:T},navigationType:s}},[c,f,m,_,x,T,s]);return Gn(P!=null,`<Router basename="${c}"> is not able to match the URL "${f}${m}${_}" because it does not start with the basename, so the <Router> won't render anything.`),P==null?null:V.createElement(Qn.Provider,{value:d},V.createElement(jl.Provider,{children:e,value:P}))}function ZT({children:n,location:e}){return jT(bf(n),e)}function bf(n,e=[]){let t=[];return V.Children.forEach(n,(s,o)=>{if(!V.isValidElement(s))return;let l=[...e,o];if(s.type===V.Fragment){t.push.apply(t,bf(s.props.children,l));return}et(s.type===mr,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),et(!s.props.index||!s.props.children,"An index route cannot have child routes.");let c={id:s.props.id||l.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,middleware:s.props.middleware,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(c.children=bf(s.props.children,l)),t.push(c)}),t}var Ac="get",Pc="application/x-www-form-urlencoded";function dh(n){return n!=null&&typeof n.tagName=="string"}function e1(n){return dh(n)&&n.tagName.toLowerCase()==="button"}function t1(n){return dh(n)&&n.tagName.toLowerCase()==="form"}function n1(n){return dh(n)&&n.tagName.toLowerCase()==="input"}function r1(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function s1(n,e){return n.button===0&&(!e||e==="_self")&&!r1(n)}var vc=null;function i1(){if(vc===null)try{new FormData(document.createElement("form"),0),vc=!1}catch{vc=!0}return vc}var o1=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function ff(n){return n!=null&&!o1.has(n)?(Gn(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Pc}"`),null):n}function a1(n,e){let t,s,o,l,c;if(t1(n)){let d=n.getAttribute("action");s=d?Jr(d,e):null,t=n.getAttribute("method")||Ac,o=ff(n.getAttribute("enctype"))||Pc,l=new FormData(n)}else if(e1(n)||n1(n)&&(n.type==="submit"||n.type==="image")){let d=n.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let f=n.getAttribute("formaction")||d.getAttribute("action");if(s=f?Jr(f,e):null,t=n.getAttribute("formmethod")||d.getAttribute("method")||Ac,o=ff(n.getAttribute("formenctype"))||ff(d.getAttribute("enctype"))||Pc,l=new FormData(d,n),!i1()){let{name:m,type:_,value:x}=n;if(_==="image"){let T=m?`${m}.`:"";l.append(`${T}x`,"0"),l.append(`${T}y`,"0")}else m&&l.append(m,x)}}else{if(dh(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Ac,s=null,o=Pc,c=n}return l&&o==="text/plain"&&(c=l,l=void 0),{action:s,method:t.toLowerCase(),encType:o,formData:l,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function yp(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function l1(n,e,t){let s=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return s.pathname==="/"?s.pathname=`_root.${t}`:e&&Jr(s.pathname,e)==="/"?s.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${t}`,s}async function u1(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function c1(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function h1(n,e,t){let s=await Promise.all(n.map(async o=>{let l=e.routes[o.route.id];if(l){let c=await u1(l,t);return c.links?c.links():[]}return[]}));return m1(s.flat(1).filter(c1).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function Hy(n,e,t,s,o,l){let c=(f,m)=>t[m]?f.route.id!==t[m].route.id:!0,d=(f,m)=>t[m].pathname!==f.pathname||t[m].route.path?.endsWith("*")&&t[m].params["*"]!==f.params["*"];return l==="assets"?e.filter((f,m)=>c(f,m)||d(f,m)):l==="data"?e.filter((f,m)=>{let _=s.routes[f.route.id];if(!_||!_.hasLoader)return!1;if(c(f,m)||d(f,m))return!0;if(f.route.shouldRevalidate){let x=f.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:f.params,defaultShouldRevalidate:!0});if(typeof x=="boolean")return x}return!0}):[]}function d1(n,e,{includeHydrateFallback:t}={}){return f1(n.map(s=>{let o=e.routes[s.route.id];if(!o)return[];let l=[o.module];return o.clientActionModule&&(l=l.concat(o.clientActionModule)),o.clientLoaderModule&&(l=l.concat(o.clientLoaderModule)),t&&o.hydrateFallbackModule&&(l=l.concat(o.hydrateFallbackModule)),o.imports&&(l=l.concat(o.imports)),l}).flat(1))}function f1(n){return[...new Set(n)]}function p1(n){let e={},t=Object.keys(n).sort();for(let s of t)e[s]=n[s];return e}function m1(n,e){let t=new Set;return new Set(e),n.reduce((s,o)=>{let l=JSON.stringify(p1(o));return t.has(l)||(t.add(l),s.push({key:l,link:o})),s},[])}function Q_(){let n=V.useContext(ta);return yp(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function g1(){let n=V.useContext(hh);return yp(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var vp=V.createContext(void 0);vp.displayName="FrameworkContext";function Y_(){let n=V.useContext(vp);return yp(n,"You must render this element inside a <HydratedRouter> element"),n}function y1(n,e){let t=V.useContext(vp),[s,o]=V.useState(!1),[l,c]=V.useState(!1),{onFocus:d,onBlur:f,onMouseEnter:m,onMouseLeave:_,onTouchStart:x}=e,T=V.useRef(null);V.useEffect(()=>{if(n==="render"&&c(!0),n==="viewport"){let j=W=>{W.forEach(G=>{c(G.isIntersecting)})},L=new IntersectionObserver(j,{threshold:.5});return T.current&&L.observe(T.current),()=>{L.disconnect()}}},[n]),V.useEffect(()=>{if(s){let j=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(j)}}},[s]);let P=()=>{o(!0)},N=()=>{o(!1),c(!1)};return t?n!=="intent"?[l,T,{}]:[l,T,{onFocus:sl(d,P),onBlur:sl(f,N),onMouseEnter:sl(m,P),onMouseLeave:sl(_,N),onTouchStart:sl(x,P)}]:[!1,T,{}]}function sl(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function v1({page:n,...e}){let{router:t}=Q_(),s=V.useMemo(()=>U_(t.routes,n,t.basename),[t.routes,n,t.basename]);return s?V.createElement(w1,{page:n,matches:s,...e}):null}function _1(n){let{manifest:e,routeModules:t}=Y_(),[s,o]=V.useState([]);return V.useEffect(()=>{let l=!1;return h1(n,e,t).then(c=>{l||o(c)}),()=>{l=!0}},[n,e,t]),s}function w1({page:n,matches:e,...t}){let s=Yn(),{manifest:o,routeModules:l}=Y_(),{basename:c}=Q_(),{loaderData:d,matches:f}=g1(),m=V.useMemo(()=>Hy(n,e,f,o,s,"data"),[n,e,f,o,s]),_=V.useMemo(()=>Hy(n,e,f,o,s,"assets"),[n,e,f,o,s]),x=V.useMemo(()=>{if(n===s.pathname+s.search+s.hash)return[];let N=new Set,j=!1;if(e.forEach(W=>{let G=o.routes[W.route.id];!G||!G.hasLoader||(!m.some(Z=>Z.route.id===W.route.id)&&W.route.id in d&&l[W.route.id]?.shouldRevalidate||G.hasClientLoader?j=!0:N.add(W.route.id))}),N.size===0)return[];let L=l1(n,c,"data");return j&&N.size>0&&L.searchParams.set("_routes",e.filter(W=>N.has(W.route.id)).map(W=>W.route.id).join(",")),[L.pathname+L.search]},[c,d,s,o,m,e,n,l]),T=V.useMemo(()=>d1(_,o),[_,o]),P=_1(_);return V.createElement(V.Fragment,null,x.map(N=>V.createElement("link",{key:N,rel:"prefetch",as:"fetch",href:N,...t})),T.map(N=>V.createElement("link",{key:N,rel:"modulepreload",href:N,...t})),P.map(({key:N,link:j})=>V.createElement("link",{key:N,nonce:t.nonce,...j})))}function E1(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var X_=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{X_&&(window.__reactRouterVersion="7.9.4")}catch{}function x1({basename:n,children:e,window:t}){let s=V.useRef();s.current==null&&(s.current=uT({window:t,v5Compat:!0}));let o=s.current,[l,c]=V.useState({action:o.action,location:o.location}),d=V.useCallback(f=>{V.startTransition(()=>c(f))},[c]);return V.useLayoutEffect(()=>o.listen(d),[o,d]),V.createElement(JT,{basename:n,children:e,location:l.location,navigationType:l.action,navigator:o})}var J_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,rt=V.forwardRef(function({onClick:e,discover:t="render",prefetch:s="none",relative:o,reloadDocument:l,replace:c,state:d,target:f,to:m,preventScrollReset:_,viewTransition:x,...T},P){let{basename:N}=V.useContext(Qn),j=typeof m=="string"&&J_.test(m),L,W=!1;if(typeof m=="string"&&j&&(L=m,X_))try{let C=new URL(window.location.href),b=m.startsWith("//")?new URL(C.protocol+m):new URL(m),D=Jr(b.pathname,N);b.origin===C.origin&&D!=null?m=D+b.search+b.hash:W=!0}catch{Gn(!1,`<Link to="${m}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let G=VT(m,{relative:o}),[Z,ne,ee]=y1(s,T),se=C1(m,{replace:c,state:d,target:f,preventScrollReset:_,relative:o,viewTransition:x});function k(C){e&&e(C),C.defaultPrevented||se(C)}let S=V.createElement("a",{...T,...ee,href:L||G,onClick:W||l?e:k,ref:E1(P,ne),target:f,"data-discover":!j&&t==="render"?"true":void 0});return Z&&!j?V.createElement(V.Fragment,null,S,V.createElement(v1,{page:G})):S});rt.displayName="Link";var T1=V.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:s="",end:o=!1,style:l,to:c,viewTransition:d,children:f,...m},_){let x=Fl(c,{relative:m.relative}),T=Yn(),P=V.useContext(hh),{navigator:N,basename:j}=V.useContext(Qn),L=P!=null&&b1(x)&&d===!0,W=N.encodeLocation?N.encodeLocation(x).pathname:x.pathname,G=T.pathname,Z=P&&P.navigation&&P.navigation.location?P.navigation.location.pathname:null;t||(G=G.toLowerCase(),Z=Z?Z.toLowerCase():null,W=W.toLowerCase()),Z&&j&&(Z=Jr(Z,j)||Z);const ne=W!=="/"&&W.endsWith("/")?W.length-1:W.length;let ee=G===W||!o&&G.startsWith(W)&&G.charAt(ne)==="/",se=Z!=null&&(Z===W||!o&&Z.startsWith(W)&&Z.charAt(W.length)==="/"),k={isActive:ee,isPending:se,isTransitioning:L},S=ee?e:void 0,C;typeof s=="function"?C=s(k):C=[s,ee?"active":null,se?"pending":null,L?"transitioning":null].filter(Boolean).join(" ");let b=typeof l=="function"?l(k):l;return V.createElement(rt,{...m,"aria-current":S,className:C,ref:_,style:b,to:c,viewTransition:d},typeof f=="function"?f(k):f)});T1.displayName="NavLink";var I1=V.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:s,replace:o,state:l,method:c=Ac,action:d,onSubmit:f,relative:m,preventScrollReset:_,viewTransition:x,...T},P)=>{let N=A1(),j=P1(d,{relative:m}),L=c.toLowerCase()==="get"?"get":"post",W=typeof d=="string"&&J_.test(d),G=Z=>{if(f&&f(Z),Z.defaultPrevented)return;Z.preventDefault();let ne=Z.nativeEvent.submitter,ee=ne?.getAttribute("formmethod")||c;N(ne||Z.currentTarget,{fetcherKey:e,method:ee,navigate:t,replace:o,state:l,relative:m,preventScrollReset:_,viewTransition:x})};return V.createElement("form",{ref:P,method:L,action:j,onSubmit:s?f:G,...T,"data-discover":!W&&n==="render"?"true":void 0})});I1.displayName="Form";function S1(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Z_(n){let e=V.useContext(ta);return et(e,S1(n)),e}function C1(n,{target:e,replace:t,state:s,preventScrollReset:o,relative:l,viewTransition:c}={}){let d=qi(),f=Yn(),m=Fl(n,{relative:l});return V.useCallback(_=>{if(s1(_,e)){_.preventDefault();let x=t!==void 0?t:xl(f)===xl(m);d(n,{replace:x,state:s,preventScrollReset:o,relative:l,viewTransition:c})}},[f,d,m,t,s,e,n,o,l,c])}var k1=0,R1=()=>`__${String(++k1)}__`;function A1(){let{router:n}=Z_("useSubmit"),{basename:e}=V.useContext(Qn),t=GT();return V.useCallback(async(s,o={})=>{let{action:l,method:c,encType:d,formData:f,body:m}=a1(s,e);if(o.navigate===!1){let _=o.fetcherKey||R1();await n.fetch(_,t,o.action||l,{preventScrollReset:o.preventScrollReset,formData:f,body:m,formMethod:o.method||c,formEncType:o.encType||d,flushSync:o.flushSync})}else await n.navigate(o.action||l,{preventScrollReset:o.preventScrollReset,formData:f,body:m,formMethod:o.method||c,formEncType:o.encType||d,replace:o.replace,state:o.state,fromRouteId:t,flushSync:o.flushSync,viewTransition:o.viewTransition})},[n,e,t])}function P1(n,{relative:e}={}){let{basename:t}=V.useContext(Qn),s=V.useContext(Sr);et(s,"useFormAction must be used inside a RouteContext");let[o]=s.matches.slice(-1),l={...Fl(n||".",{relative:e})},c=Yn();if(n==null){l.search=c.search;let d=new URLSearchParams(l.search),f=d.getAll("index");if(f.some(_=>_==="")){d.delete("index"),f.filter(x=>x).forEach(x=>d.append("index",x));let _=d.toString();l.search=_?`?${_}`:""}}return(!n||n===".")&&o.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:Qr([t,l.pathname])),xl(l)}function b1(n,{relative:e}={}){let t=V.useContext(q_);et(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=Z_("useViewTransitionState"),o=Fl(n,{relative:e});if(!t.isTransitioning)return!1;let l=Jr(t.currentLocation.pathname,s)||t.currentLocation.pathname,c=Jr(t.nextLocation.pathname,s)||t.nextLocation.pathname;return $c(o.pathname,c)!=null||$c(o.pathname,l)!=null}var Ul=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(n){return this.listeners.add(n),this.onSubscribe(),()=>{this.listeners.delete(n),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},N1={setTimeout:(n,e)=>setTimeout(n,e),clearTimeout:n=>clearTimeout(n),setInterval:(n,e)=>setInterval(n,e),clearInterval:n=>clearInterval(n)},D1=class{#e=N1;#t=!1;setTimeoutProvider(n){this.#e=n}setTimeout(n,e){return this.#e.setTimeout(n,e)}clearTimeout(n){this.#e.clearTimeout(n)}setInterval(n,e){return this.#e.setInterval(n,e)}clearInterval(n){this.#e.clearInterval(n)}},Di=new D1;function O1(n){setTimeout(n,0)}var Mi=typeof window>"u"||"Deno"in globalThis;function an(){}function L1(n,e){return typeof n=="function"?n(e):n}function Nf(n){return typeof n=="number"&&n>=0&&n!==1/0}function e0(n,e){return Math.max(n+(e||0)-Date.now(),0)}function Fs(n,e){return typeof n=="function"?n(e):n}function An(n,e){return typeof n=="function"?n(e):n}function Wy(n,e){const{type:t="all",exact:s,fetchStatus:o,predicate:l,queryKey:c,stale:d}=n;if(c){if(s){if(e.queryHash!==_p(c,e.options))return!1}else if(!Il(e.queryKey,c))return!1}if(t!=="all"){const f=e.isActive();if(t==="active"&&!f||t==="inactive"&&f)return!1}return!(typeof d=="boolean"&&e.isStale()!==d||o&&o!==e.state.fetchStatus||l&&!l(e))}function Gy(n,e){const{exact:t,status:s,predicate:o,mutationKey:l}=n;if(l){if(!e.options.mutationKey)return!1;if(t){if(Tl(e.options.mutationKey)!==Tl(l))return!1}else if(!Il(e.options.mutationKey,l))return!1}return!(s&&e.state.status!==s||o&&!o(e))}function _p(n,e){return(e?.queryKeyHashFn||Tl)(n)}function Tl(n){return JSON.stringify(n,(e,t)=>Of(t)?Object.keys(t).sort().reduce((s,o)=>(s[o]=t[o],s),{}):t)}function Il(n,e){return n===e?!0:typeof n!=typeof e?!1:n&&e&&typeof n=="object"&&typeof e=="object"?Object.keys(e).every(t=>Il(n[t],e[t])):!1}var V1=Object.prototype.hasOwnProperty;function t0(n,e){if(n===e)return n;const t=Ky(n)&&Ky(e);if(!t&&!(Of(n)&&Of(e)))return e;const o=(t?n:Object.keys(n)).length,l=t?e:Object.keys(e),c=l.length,d=t?new Array(c):{};let f=0;for(let m=0;m<c;m++){const _=t?m:l[m],x=n[_],T=e[_];if(x===T){d[_]=x,(t?m<o:V1.call(n,_))&&f++;continue}if(x===null||T===null||typeof x!="object"||typeof T!="object"){d[_]=T;continue}const P=t0(x,T);d[_]=P,P===x&&f++}return o===c&&f===o?n:d}function Df(n,e){if(!e||Object.keys(n).length!==Object.keys(e).length)return!1;for(const t in n)if(n[t]!==e[t])return!1;return!0}function Ky(n){return Array.isArray(n)&&n.length===Object.keys(n).length}function Of(n){if(!Qy(n))return!1;const e=n.constructor;if(e===void 0)return!0;const t=e.prototype;return!(!Qy(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(n)!==Object.prototype)}function Qy(n){return Object.prototype.toString.call(n)==="[object Object]"}function M1(n){return new Promise(e=>{Di.setTimeout(e,n)})}function Lf(n,e,t){return typeof t.structuralSharing=="function"?t.structuralSharing(n,e):t.structuralSharing!==!1?t0(n,e):e}function j1(n,e,t=0){const s=[...n,e];return t&&s.length>t?s.slice(1):s}function F1(n,e,t=0){const s=[e,...n];return t&&s.length>t?s.slice(0,-1):s}var wp=Symbol();function n0(n,e){return!n.queryFn&&e?.initialPromise?()=>e.initialPromise:!n.queryFn||n.queryFn===wp?()=>Promise.reject(new Error(`Missing queryFn: '${n.queryHash}'`)):n.queryFn}function U1(n,e){return typeof n=="function"?n(...e):!!n}var $1=class extends Ul{#e;#t;#n;constructor(){super(),this.#n=n=>{if(!Mi&&window.addEventListener){const e=()=>n();return window.addEventListener("visibilitychange",e,!1),()=>{window.removeEventListener("visibilitychange",e)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(n){this.#n=n,this.#t?.(),this.#t=n(e=>{typeof e=="boolean"?this.setFocused(e):this.onFocus()})}setFocused(n){this.#e!==n&&(this.#e=n,this.onFocus())}onFocus(){const n=this.isFocused();this.listeners.forEach(e=>{e(n)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},Ep=new $1;function Vf(){let n,e;const t=new Promise((o,l)=>{n=o,e=l});t.status="pending",t.catch(()=>{});function s(o){Object.assign(t,o),delete t.resolve,delete t.reject}return t.resolve=o=>{s({status:"fulfilled",value:o}),n(o)},t.reject=o=>{s({status:"rejected",reason:o}),e(o)},t}var B1=O1;function z1(){let n=[],e=0,t=d=>{d()},s=d=>{d()},o=B1;const l=d=>{e?n.push(d):o(()=>{t(d)})},c=()=>{const d=n;n=[],d.length&&o(()=>{s(()=>{d.forEach(f=>{t(f)})})})};return{batch:d=>{let f;e++;try{f=d()}finally{e--,e||c()}return f},batchCalls:d=>(...f)=>{l(()=>{d(...f)})},schedule:l,setNotifyFunction:d=>{t=d},setBatchNotifyFunction:d=>{s=d},setScheduler:d=>{o=d}}}var Lt=z1(),q1=class extends Ul{#e=!0;#t;#n;constructor(){super(),this.#n=n=>{if(!Mi&&window.addEventListener){const e=()=>n(!0),t=()=>n(!1);return window.addEventListener("online",e,!1),window.addEventListener("offline",t,!1),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",t)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(n){this.#n=n,this.#t?.(),this.#t=n(this.setOnline.bind(this))}setOnline(n){this.#e!==n&&(this.#e=n,this.listeners.forEach(t=>{t(n)}))}isOnline(){return this.#e}},Bc=new q1;function H1(n){return Math.min(1e3*2**n,3e4)}function r0(n){return(n??"online")==="online"?Bc.isOnline():!0}var Mf=class extends Error{constructor(n){super("CancelledError"),this.revert=n?.revert,this.silent=n?.silent}};function s0(n){let e=!1,t=0,s;const o=Vf(),l=()=>o.status!=="pending",c=j=>{if(!l()){const L=new Mf(j);T(L),n.onCancel?.(L)}},d=()=>{e=!0},f=()=>{e=!1},m=()=>Ep.isFocused()&&(n.networkMode==="always"||Bc.isOnline())&&n.canRun(),_=()=>r0(n.networkMode)&&n.canRun(),x=j=>{l()||(s?.(),o.resolve(j))},T=j=>{l()||(s?.(),o.reject(j))},P=()=>new Promise(j=>{s=L=>{(l()||m())&&j(L)},n.onPause?.()}).then(()=>{s=void 0,l()||n.onContinue?.()}),N=()=>{if(l())return;let j;const L=t===0?n.initialPromise:void 0;try{j=L??n.fn()}catch(W){j=Promise.reject(W)}Promise.resolve(j).then(x).catch(W=>{if(l())return;const G=n.retry??(Mi?0:3),Z=n.retryDelay??H1,ne=typeof Z=="function"?Z(t,W):Z,ee=G===!0||typeof G=="number"&&t<G||typeof G=="function"&&G(t,W);if(e||!ee){T(W);return}t++,n.onFail?.(t,W),M1(ne).then(()=>m()?void 0:P()).then(()=>{e?T(W):N()})})};return{promise:o,status:()=>o.status,cancel:c,continue:()=>(s?.(),o),cancelRetry:d,continueRetry:f,canStart:_,start:()=>(_()?N():P().then(N),o)}}var i0=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Nf(this.gcTime)&&(this.#e=Di.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(n){this.gcTime=Math.max(this.gcTime||0,n??(Mi?1/0:300*1e3))}clearGcTimeout(){this.#e&&(Di.clearTimeout(this.#e),this.#e=void 0)}},W1=class extends i0{#e;#t;#n;#s;#r;#a;#o;constructor(e){super(),this.#o=!1,this.#a=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#s=e.client,this.#n=this.#s.getQueryCache(),this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#e=Yy(this.options),this.state=e.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#r?.promise}setOptions(e){if(this.options={...this.#a,...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const t=Yy(this.options);t.data!==void 0&&(this.setData(t.data,{updatedAt:t.dataUpdatedAt,manual:!0}),this.#e=t)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#n.remove(this)}setData(e,t){const s=Lf(this.state.data,e,this.options);return this.#i({data:s,type:"success",dataUpdatedAt:t?.updatedAt,manual:t?.manual}),s}setState(e,t){this.#i({type:"setState",state:e,setStateOptions:t})}cancel(e){const t=this.#r?.promise;return this.#r?.cancel(e),t?t.then(an).catch(an):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(e=>An(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===wp||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>Fs(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!e0(this.state.dataUpdatedAt,e)}onFocus(){this.observers.find(t=>t.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#r?.continue()}onOnline(){this.observers.find(t=>t.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#r?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(this.#r&&(this.#o?this.#r.cancel({revert:!0}):this.#r.cancelRetry()),this.scheduleGc()),this.#n.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#i({type:"invalidate"})}async fetch(e,t){if(this.state.fetchStatus!=="idle"&&this.#r?.status()!=="rejected"){if(this.state.data!==void 0&&t?.cancelRefetch)this.cancel({silent:!0});else if(this.#r)return this.#r.continueRetry(),this.#r.promise}if(e&&this.setOptions(e),!this.options.queryFn){const f=this.observers.find(m=>m.options.queryFn);f&&this.setOptions(f.options)}const s=new AbortController,o=f=>{Object.defineProperty(f,"signal",{enumerable:!0,get:()=>(this.#o=!0,s.signal)})},l=()=>{const f=n0(this.options,t),_=(()=>{const x={client:this.#s,queryKey:this.queryKey,meta:this.meta};return o(x),x})();return this.#o=!1,this.options.persister?this.options.persister(f,_,this):f(_)},d=(()=>{const f={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:this.#s,state:this.state,fetchFn:l};return o(f),f})();this.options.behavior?.onFetch(d,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==d.fetchOptions?.meta)&&this.#i({type:"fetch",meta:d.fetchOptions?.meta}),this.#r=s0({initialPromise:t?.initialPromise,fn:d.fetchFn,onCancel:f=>{f instanceof Mf&&f.revert&&this.setState({...this.#t,fetchStatus:"idle"}),s.abort()},onFail:(f,m)=>{this.#i({type:"failed",failureCount:f,error:m})},onPause:()=>{this.#i({type:"pause"})},onContinue:()=>{this.#i({type:"continue"})},retry:d.options.retry,retryDelay:d.options.retryDelay,networkMode:d.options.networkMode,canRun:()=>!0});try{const f=await this.#r.start();if(f===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(f),this.#n.config.onSuccess?.(f,this),this.#n.config.onSettled?.(f,this.state.error,this),f}catch(f){if(f instanceof Mf){if(f.silent)return this.#r.promise;if(f.revert){if(this.state.data===void 0)throw f;return this.state.data}}throw this.#i({type:"error",error:f}),this.#n.config.onError?.(f,this),this.#n.config.onSettled?.(this.state.data,f,this),f}finally{this.scheduleGc()}}#i(e){const t=s=>{switch(e.type){case"failed":return{...s,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...o0(s.data,this.options),fetchMeta:e.meta??null};case"success":const o={...s,data:e.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=e.manual?o:void 0,o;case"error":const l=e.error;return{...s,error:l,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:l,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...e.state}}};this.state=t(this.state),Lt.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),this.#n.notify({query:this,type:"updated",action:e})})}};function o0(n,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:r0(e.networkMode)?"fetching":"paused",...n===void 0&&{error:null,status:"pending"}}}function Yy(n){const e=typeof n.initialData=="function"?n.initialData():n.initialData,t=e!==void 0,s=t?typeof n.initialDataUpdatedAt=="function"?n.initialDataUpdatedAt():n.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?s??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"pending",fetchStatus:"idle"}}var G1=class extends Ul{constructor(n,e){super(),this.options=e,this.#e=n,this.#i=null,this.#o=Vf(),this.bindMethods(),this.setOptions(e)}#e;#t=void 0;#n=void 0;#s=void 0;#r;#a;#o;#i;#m;#d;#f;#u;#c;#l;#p=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),Xy(this.#t,this.options)?this.#h():this.updateResult(),this.#_())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return jf(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return jf(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#w(),this.#E(),this.#t.removeObserver(this)}setOptions(n){const e=this.options,t=this.#t;if(this.options=this.#e.defaultQueryOptions(n),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof An(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#x(),this.#t.setOptions(this.options),e._defaulted&&!Df(this.options,e)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const s=this.hasListeners();s&&Jy(this.#t,t,this.options,e)&&this.#h(),this.updateResult(),s&&(this.#t!==t||An(this.options.enabled,this.#t)!==An(e.enabled,this.#t)||Fs(this.options.staleTime,this.#t)!==Fs(e.staleTime,this.#t))&&this.#g();const o=this.#y();s&&(this.#t!==t||An(this.options.enabled,this.#t)!==An(e.enabled,this.#t)||o!==this.#l)&&this.#v(o)}getOptimisticResult(n){const e=this.#e.getQueryCache().build(this.#e,n),t=this.createResult(e,n);return Q1(this,t)&&(this.#s=t,this.#a=this.options,this.#r=this.#t.state),t}getCurrentResult(){return this.#s}trackResult(n,e){return new Proxy(n,{get:(t,s)=>(this.trackProp(s),e?.(s),s==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&this.#o.status==="pending"&&this.#o.reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(t,s))})}trackProp(n){this.#p.add(n)}getCurrentQuery(){return this.#t}refetch({...n}={}){return this.fetch({...n})}fetchOptimistic(n){const e=this.#e.defaultQueryOptions(n),t=this.#e.getQueryCache().build(this.#e,e);return t.fetch().then(()=>this.createResult(t,e))}fetch(n){return this.#h({...n,cancelRefetch:n.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#s))}#h(n){this.#x();let e=this.#t.fetch(this.options,n);return n?.throwOnError||(e=e.catch(an)),e}#g(){this.#w();const n=Fs(this.options.staleTime,this.#t);if(Mi||this.#s.isStale||!Nf(n))return;const t=e0(this.#s.dataUpdatedAt,n)+1;this.#u=Di.setTimeout(()=>{this.#s.isStale||this.updateResult()},t)}#y(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#v(n){this.#E(),this.#l=n,!(Mi||An(this.options.enabled,this.#t)===!1||!Nf(this.#l)||this.#l===0)&&(this.#c=Di.setInterval(()=>{(this.options.refetchIntervalInBackground||Ep.isFocused())&&this.#h()},this.#l))}#_(){this.#g(),this.#v(this.#y())}#w(){this.#u&&(Di.clearTimeout(this.#u),this.#u=void 0)}#E(){this.#c&&(Di.clearInterval(this.#c),this.#c=void 0)}createResult(n,e){const t=this.#t,s=this.options,o=this.#s,l=this.#r,c=this.#a,f=n!==t?n.state:this.#n,{state:m}=n;let _={...m},x=!1,T;if(e._optimisticResults){const S=this.hasListeners(),C=!S&&Xy(n,e),b=S&&Jy(n,t,e,s);(C||b)&&(_={..._,...o0(m.data,n.options)}),e._optimisticResults==="isRestoring"&&(_.fetchStatus="idle")}let{error:P,errorUpdatedAt:N,status:j}=_;T=_.data;let L=!1;if(e.placeholderData!==void 0&&T===void 0&&j==="pending"){let S;o?.isPlaceholderData&&e.placeholderData===c?.placeholderData?(S=o.data,L=!0):S=typeof e.placeholderData=="function"?e.placeholderData(this.#f?.state.data,this.#f):e.placeholderData,S!==void 0&&(j="success",T=Lf(o?.data,S,e),x=!0)}if(e.select&&T!==void 0&&!L)if(o&&T===l?.data&&e.select===this.#m)T=this.#d;else try{this.#m=e.select,T=e.select(T),T=Lf(o?.data,T,e),this.#d=T,this.#i=null}catch(S){this.#i=S}this.#i&&(P=this.#i,T=this.#d,N=Date.now(),j="error");const W=_.fetchStatus==="fetching",G=j==="pending",Z=j==="error",ne=G&&W,ee=T!==void 0,k={status:j,fetchStatus:_.fetchStatus,isPending:G,isSuccess:j==="success",isError:Z,isInitialLoading:ne,isLoading:ne,data:T,dataUpdatedAt:_.dataUpdatedAt,error:P,errorUpdatedAt:N,failureCount:_.fetchFailureCount,failureReason:_.fetchFailureReason,errorUpdateCount:_.errorUpdateCount,isFetched:_.dataUpdateCount>0||_.errorUpdateCount>0,isFetchedAfterMount:_.dataUpdateCount>f.dataUpdateCount||_.errorUpdateCount>f.errorUpdateCount,isFetching:W,isRefetching:W&&!G,isLoadingError:Z&&!ee,isPaused:_.fetchStatus==="paused",isPlaceholderData:x,isRefetchError:Z&&ee,isStale:xp(n,e),refetch:this.refetch,promise:this.#o,isEnabled:An(e.enabled,n)!==!1};if(this.options.experimental_prefetchInRender){const S=D=>{k.status==="error"?D.reject(k.error):k.data!==void 0&&D.resolve(k.data)},C=()=>{const D=this.#o=k.promise=Vf();S(D)},b=this.#o;switch(b.status){case"pending":n.queryHash===t.queryHash&&S(b);break;case"fulfilled":(k.status==="error"||k.data!==b.value)&&C();break;case"rejected":(k.status!=="error"||k.error!==b.reason)&&C();break}}return k}updateResult(){const n=this.#s,e=this.createResult(this.#t,this.options);if(this.#r=this.#t.state,this.#a=this.options,this.#r.data!==void 0&&(this.#f=this.#t),Df(e,n))return;this.#s=e;const t=()=>{if(!n)return!0;const{notifyOnChangeProps:s}=this.options,o=typeof s=="function"?s():s;if(o==="all"||!o&&!this.#p.size)return!0;const l=new Set(o??this.#p);return this.options.throwOnError&&l.add("error"),Object.keys(this.#s).some(c=>{const d=c;return this.#s[d]!==n[d]&&l.has(d)})};this.#T({listeners:t()})}#x(){const n=this.#e.getQueryCache().build(this.#e,this.options);if(n===this.#t)return;const e=this.#t;this.#t=n,this.#n=n.state,this.hasListeners()&&(e?.removeObserver(this),n.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#_()}#T(n){Lt.batch(()=>{n.listeners&&this.listeners.forEach(e=>{e(this.#s)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function K1(n,e){return An(e.enabled,n)!==!1&&n.state.data===void 0&&!(n.state.status==="error"&&e.retryOnMount===!1)}function Xy(n,e){return K1(n,e)||n.state.data!==void 0&&jf(n,e,e.refetchOnMount)}function jf(n,e,t){if(An(e.enabled,n)!==!1&&Fs(e.staleTime,n)!=="static"){const s=typeof t=="function"?t(n):t;return s==="always"||s!==!1&&xp(n,e)}return!1}function Jy(n,e,t,s){return(n!==e||An(s.enabled,n)===!1)&&(!t.suspense||n.state.status!=="error")&&xp(n,t)}function xp(n,e){return An(e.enabled,n)!==!1&&n.isStaleByTime(Fs(e.staleTime,n))}function Q1(n,e){return!Df(n.getCurrentResult(),e)}function Zy(n){return{onFetch:(e,t)=>{const s=e.options,o=e.fetchOptions?.meta?.fetchMore?.direction,l=e.state.data?.pages||[],c=e.state.data?.pageParams||[];let d={pages:[],pageParams:[]},f=0;const m=async()=>{let _=!1;const x=N=>{Object.defineProperty(N,"signal",{enumerable:!0,get:()=>(e.signal.aborted?_=!0:e.signal.addEventListener("abort",()=>{_=!0}),e.signal)})},T=n0(e.options,e.fetchOptions),P=async(N,j,L)=>{if(_)return Promise.reject();if(j==null&&N.pages.length)return Promise.resolve(N);const G=(()=>{const se={client:e.client,queryKey:e.queryKey,pageParam:j,direction:L?"backward":"forward",meta:e.options.meta};return x(se),se})(),Z=await T(G),{maxPages:ne}=e.options,ee=L?F1:j1;return{pages:ee(N.pages,Z,ne),pageParams:ee(N.pageParams,j,ne)}};if(o&&l.length){const N=o==="backward",j=N?Y1:ev,L={pages:l,pageParams:c},W=j(s,L);d=await P(L,W,N)}else{const N=n??l.length;do{const j=f===0?c[0]??s.initialPageParam:ev(s,d);if(f>0&&j==null)break;d=await P(d,j),f++}while(f<N)}return d};e.options.persister?e.fetchFn=()=>e.options.persister?.(m,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t):e.fetchFn=m}}}function ev(n,{pages:e,pageParams:t}){const s=e.length-1;return e.length>0?n.getNextPageParam(e[s],e,t[s],t):void 0}function Y1(n,{pages:e,pageParams:t}){return e.length>0?n.getPreviousPageParam?.(e[0],e,t[0],t):void 0}var X1=class extends i0{#e;#t;#n;#s;constructor(e){super(),this.#e=e.client,this.mutationId=e.mutationId,this.#n=e.mutationCache,this.#t=[],this.state=e.state||J1(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#t.includes(e)||(this.#t.push(e),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#t=this.#t.filter(t=>t!==e),this.scheduleGc(),this.#n.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#n.remove(this))}continue(){return this.#s?.continue()??this.execute(this.state.variables)}async execute(e){const t=()=>{this.#r({type:"continue"})},s={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#s=s0({fn:()=>this.options.mutationFn?this.options.mutationFn(e,s):Promise.reject(new Error("No mutationFn found")),onFail:(c,d)=>{this.#r({type:"failed",failureCount:c,error:d})},onPause:()=>{this.#r({type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#n.canRun(this)});const o=this.state.status==="pending",l=!this.#s.canStart();try{if(o)t();else{this.#r({type:"pending",variables:e,isPaused:l}),await this.#n.config.onMutate?.(e,this,s);const d=await this.options.onMutate?.(e,s);d!==this.state.context&&this.#r({type:"pending",context:d,variables:e,isPaused:l})}const c=await this.#s.start();return await this.#n.config.onSuccess?.(c,e,this.state.context,this,s),await this.options.onSuccess?.(c,e,this.state.context,s),await this.#n.config.onSettled?.(c,null,this.state.variables,this.state.context,this,s),await this.options.onSettled?.(c,null,e,this.state.context,s),this.#r({type:"success",data:c}),c}catch(c){try{throw await this.#n.config.onError?.(c,e,this.state.context,this,s),await this.options.onError?.(c,e,this.state.context,s),await this.#n.config.onSettled?.(void 0,c,this.state.variables,this.state.context,this,s),await this.options.onSettled?.(void 0,c,e,this.state.context,s),c}finally{this.#r({type:"error",error:c})}}finally{this.#n.runNext(this)}}#r(e){const t=s=>{switch(e.type){case"failed":return{...s,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...s,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:e.error,failureCount:s.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),Lt.batch(()=>{this.#t.forEach(s=>{s.onMutationUpdate(e)}),this.#n.notify({mutation:this,type:"updated",action:e})})}};function J1(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Z1=class extends Ul{constructor(n={}){super(),this.config=n,this.#e=new Set,this.#t=new Map,this.#n=0}#e;#t;#n;build(n,e,t){const s=new X1({client:n,mutationCache:this,mutationId:++this.#n,options:n.defaultMutationOptions(e),state:t});return this.add(s),s}add(n){this.#e.add(n);const e=_c(n);if(typeof e=="string"){const t=this.#t.get(e);t?t.push(n):this.#t.set(e,[n])}this.notify({type:"added",mutation:n})}remove(n){if(this.#e.delete(n)){const e=_c(n);if(typeof e=="string"){const t=this.#t.get(e);if(t)if(t.length>1){const s=t.indexOf(n);s!==-1&&t.splice(s,1)}else t[0]===n&&this.#t.delete(e)}}this.notify({type:"removed",mutation:n})}canRun(n){const e=_c(n);if(typeof e=="string"){const s=this.#t.get(e)?.find(o=>o.state.status==="pending");return!s||s===n}else return!0}runNext(n){const e=_c(n);return typeof e=="string"?this.#t.get(e)?.find(s=>s!==n&&s.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){Lt.batch(()=>{this.#e.forEach(n=>{this.notify({type:"removed",mutation:n})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(n){const e={exact:!0,...n};return this.getAll().find(t=>Gy(e,t))}findAll(n={}){return this.getAll().filter(e=>Gy(n,e))}notify(n){Lt.batch(()=>{this.listeners.forEach(e=>{e(n)})})}resumePausedMutations(){const n=this.getAll().filter(e=>e.state.isPaused);return Lt.batch(()=>Promise.all(n.map(e=>e.continue().catch(an))))}};function _c(n){return n.options.scope?.id}var eI=class extends Ul{constructor(n={}){super(),this.config=n,this.#e=new Map}#e;build(n,e,t){const s=e.queryKey,o=e.queryHash??_p(s,e);let l=this.get(o);return l||(l=new W1({client:n,queryKey:s,queryHash:o,options:n.defaultQueryOptions(e),state:t,defaultOptions:n.getQueryDefaults(s)}),this.add(l)),l}add(n){this.#e.has(n.queryHash)||(this.#e.set(n.queryHash,n),this.notify({type:"added",query:n}))}remove(n){const e=this.#e.get(n.queryHash);e&&(n.destroy(),e===n&&this.#e.delete(n.queryHash),this.notify({type:"removed",query:n}))}clear(){Lt.batch(()=>{this.getAll().forEach(n=>{this.remove(n)})})}get(n){return this.#e.get(n)}getAll(){return[...this.#e.values()]}find(n){const e={exact:!0,...n};return this.getAll().find(t=>Wy(e,t))}findAll(n={}){const e=this.getAll();return Object.keys(n).length>0?e.filter(t=>Wy(n,t)):e}notify(n){Lt.batch(()=>{this.listeners.forEach(e=>{e(n)})})}onFocus(){Lt.batch(()=>{this.getAll().forEach(n=>{n.onFocus()})})}onOnline(){Lt.batch(()=>{this.getAll().forEach(n=>{n.onOnline()})})}},tI=class{#e;#t;#n;#s;#r;#a;#o;#i;constructor(n={}){this.#e=n.queryCache||new eI,this.#t=n.mutationCache||new Z1,this.#n=n.defaultOptions||{},this.#s=new Map,this.#r=new Map,this.#a=0}mount(){this.#a++,this.#a===1&&(this.#o=Ep.subscribe(async n=>{n&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#i=Bc.subscribe(async n=>{n&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#a--,this.#a===0&&(this.#o?.(),this.#o=void 0,this.#i?.(),this.#i=void 0)}isFetching(n){return this.#e.findAll({...n,fetchStatus:"fetching"}).length}isMutating(n){return this.#t.findAll({...n,status:"pending"}).length}getQueryData(n){const e=this.defaultQueryOptions({queryKey:n});return this.#e.get(e.queryHash)?.state.data}ensureQueryData(n){const e=this.defaultQueryOptions(n),t=this.#e.build(this,e),s=t.state.data;return s===void 0?this.fetchQuery(n):(n.revalidateIfStale&&t.isStaleByTime(Fs(e.staleTime,t))&&this.prefetchQuery(e),Promise.resolve(s))}getQueriesData(n){return this.#e.findAll(n).map(({queryKey:e,state:t})=>{const s=t.data;return[e,s]})}setQueryData(n,e,t){const s=this.defaultQueryOptions({queryKey:n}),l=this.#e.get(s.queryHash)?.state.data,c=L1(e,l);if(c!==void 0)return this.#e.build(this,s).setData(c,{...t,manual:!0})}setQueriesData(n,e,t){return Lt.batch(()=>this.#e.findAll(n).map(({queryKey:s})=>[s,this.setQueryData(s,e,t)]))}getQueryState(n){const e=this.defaultQueryOptions({queryKey:n});return this.#e.get(e.queryHash)?.state}removeQueries(n){const e=this.#e;Lt.batch(()=>{e.findAll(n).forEach(t=>{e.remove(t)})})}resetQueries(n,e){const t=this.#e;return Lt.batch(()=>(t.findAll(n).forEach(s=>{s.reset()}),this.refetchQueries({type:"active",...n},e)))}cancelQueries(n,e={}){const t={revert:!0,...e},s=Lt.batch(()=>this.#e.findAll(n).map(o=>o.cancel(t)));return Promise.all(s).then(an).catch(an)}invalidateQueries(n,e={}){return Lt.batch(()=>(this.#e.findAll(n).forEach(t=>{t.invalidate()}),n?.refetchType==="none"?Promise.resolve():this.refetchQueries({...n,type:n?.refetchType??n?.type??"active"},e)))}refetchQueries(n,e={}){const t={...e,cancelRefetch:e.cancelRefetch??!0},s=Lt.batch(()=>this.#e.findAll(n).filter(o=>!o.isDisabled()&&!o.isStatic()).map(o=>{let l=o.fetch(void 0,t);return t.throwOnError||(l=l.catch(an)),o.state.fetchStatus==="paused"?Promise.resolve():l}));return Promise.all(s).then(an)}fetchQuery(n){const e=this.defaultQueryOptions(n);e.retry===void 0&&(e.retry=!1);const t=this.#e.build(this,e);return t.isStaleByTime(Fs(e.staleTime,t))?t.fetch(e):Promise.resolve(t.state.data)}prefetchQuery(n){return this.fetchQuery(n).then(an).catch(an)}fetchInfiniteQuery(n){return n.behavior=Zy(n.pages),this.fetchQuery(n)}prefetchInfiniteQuery(n){return this.fetchInfiniteQuery(n).then(an).catch(an)}ensureInfiniteQueryData(n){return n.behavior=Zy(n.pages),this.ensureQueryData(n)}resumePausedMutations(){return Bc.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#n}setDefaultOptions(n){this.#n=n}setQueryDefaults(n,e){this.#s.set(Tl(n),{queryKey:n,defaultOptions:e})}getQueryDefaults(n){const e=[...this.#s.values()],t={};return e.forEach(s=>{Il(n,s.queryKey)&&Object.assign(t,s.defaultOptions)}),t}setMutationDefaults(n,e){this.#r.set(Tl(n),{mutationKey:n,defaultOptions:e})}getMutationDefaults(n){const e=[...this.#r.values()],t={};return e.forEach(s=>{Il(n,s.mutationKey)&&Object.assign(t,s.defaultOptions)}),t}defaultQueryOptions(n){if(n._defaulted)return n;const e={...this.#n.queries,...this.getQueryDefaults(n.queryKey),...n,_defaulted:!0};return e.queryHash||(e.queryHash=_p(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===wp&&(e.enabled=!1),e}defaultMutationOptions(n){return n?._defaulted?n:{...this.#n.mutations,...n?.mutationKey&&this.getMutationDefaults(n.mutationKey),...n,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},a0=V.createContext(void 0),l0=n=>{const e=V.useContext(a0);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},nI=({client:n,children:e})=>(V.useEffect(()=>(n.mount(),()=>{n.unmount()}),[n]),y.jsx(a0.Provider,{value:n,children:e})),u0=V.createContext(!1),rI=()=>V.useContext(u0);u0.Provider;function sI(){let n=!1;return{clearReset:()=>{n=!1},reset:()=>{n=!0},isReset:()=>n}}var iI=V.createContext(sI()),oI=()=>V.useContext(iI),aI=(n,e)=>{(n.suspense||n.throwOnError||n.experimental_prefetchInRender)&&(e.isReset()||(n.retryOnMount=!1))},lI=n=>{V.useEffect(()=>{n.clearReset()},[n])},uI=({result:n,errorResetBoundary:e,throwOnError:t,query:s,suspense:o})=>n.isError&&!e.isReset()&&!n.isFetching&&s&&(o&&n.data===void 0||U1(t,[n.error,s])),cI=n=>{if(n.suspense){const t=o=>o==="static"?o:Math.max(o??1e3,1e3),s=n.staleTime;n.staleTime=typeof s=="function"?(...o)=>t(s(...o)):t(s),typeof n.gcTime=="number"&&(n.gcTime=Math.max(n.gcTime,1e3))}},hI=(n,e)=>n.isLoading&&n.isFetching&&!e,dI=(n,e)=>n?.suspense&&e.isPending,tv=(n,e,t)=>e.fetchOptimistic(n).catch(()=>{t.clearReset()});function fI(n,e,t){const s=rI(),o=oI(),l=l0(),c=l.defaultQueryOptions(n);l.getDefaultOptions().queries?._experimental_beforeQuery?.(c),c._optimisticResults=s?"isRestoring":"optimistic",cI(c),aI(c,o),lI(o);const d=!l.getQueryCache().get(c.queryHash),[f]=V.useState(()=>new e(l,c)),m=f.getOptimisticResult(c),_=!s&&n.subscribed!==!1;if(V.useSyncExternalStore(V.useCallback(x=>{const T=_?f.subscribe(Lt.batchCalls(x)):an;return f.updateResult(),T},[f,_]),()=>f.getCurrentResult(),()=>f.getCurrentResult()),V.useEffect(()=>{f.setOptions(c)},[c,f]),dI(c,m))throw tv(c,f,o);if(uI({result:m,errorResetBoundary:o,throwOnError:c.throwOnError,query:l.getQueryCache().get(c.queryHash),suspense:c.suspense}))throw m.error;return l.getDefaultOptions().queries?._experimental_afterQuery?.(c,m),c.experimental_prefetchInRender&&!Mi&&hI(m,s)&&(d?tv(c,f,o):l.getQueryCache().get(c.queryHash)?.promise)?.catch(an).finally(()=>{f.updateResult()}),c.notifyOnChangeProps?m:f.trackResult(m)}function Tp(n,e){return fI(n,G1)}const pI=()=>{};var nv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c0=function(n){const e=[];let t=0;for(let s=0;s<n.length;s++){let o=n.charCodeAt(s);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&s+1<n.length&&(n.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++s)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},mI=function(n){const e=[];let t=0,s=0;for(;t<n.length;){const o=n[t++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const l=n[t++];e[s++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=n[t++],c=n[t++],d=n[t++],f=((o&7)<<18|(l&63)<<12|(c&63)<<6|d&63)-65536;e[s++]=String.fromCharCode(55296+(f>>10)),e[s++]=String.fromCharCode(56320+(f&1023))}else{const l=n[t++],c=n[t++];e[s++]=String.fromCharCode((o&15)<<12|(l&63)<<6|c&63)}}return e.join("")},h0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<n.length;o+=3){const l=n[o],c=o+1<n.length,d=c?n[o+1]:0,f=o+2<n.length,m=f?n[o+2]:0,_=l>>2,x=(l&3)<<4|d>>4;let T=(d&15)<<2|m>>6,P=m&63;f||(P=64,c||(T=64)),s.push(t[_],t[x],t[T],t[P])}return s.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(c0(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):mI(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<n.length;){const l=t[n.charAt(o++)],d=o<n.length?t[n.charAt(o)]:0;++o;const m=o<n.length?t[n.charAt(o)]:64;++o;const x=o<n.length?t[n.charAt(o)]:64;if(++o,l==null||d==null||m==null||x==null)throw new gI;const T=l<<2|d>>4;if(s.push(T),m!==64){const P=d<<4&240|m>>2;if(s.push(P),x!==64){const N=m<<6&192|x;s.push(N)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class gI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const yI=function(n){const e=c0(n);return h0.encodeByteArray(e,!0)},zc=function(n){return yI(n).replace(/\./g,"")},d0=function(n){try{return h0.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _I=()=>vI().__FIREBASE_DEFAULTS__,wI=()=>{if(typeof process>"u"||typeof nv>"u")return;const n=nv.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},EI=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&d0(n[1]);return e&&JSON.parse(e)},fh=()=>{try{return pI()||_I()||wI()||EI()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},f0=n=>fh()?.emulatorHosts?.[n],p0=n=>{const e=f0(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},m0=()=>fh()?.config,g0=n=>fh()?.[`_${n}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hi(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Ip(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y0(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",o=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...n};return[zc(JSON.stringify(t)),zc(JSON.stringify(c)),""].join(".")}const gl={};function TI(){const n={prod:[],emulator:[]};for(const e of Object.keys(gl))gl[e]?n.emulator.push(e):n.prod.push(e);return n}function II(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let rv=!1;function Sp(n,e){if(typeof window>"u"||typeof document>"u"||!Hi(window.location.host)||gl[n]===e||gl[n]||rv)return;gl[n]=e;function t(T){return`__firebase__banner__${T}`}const s="__firebase__banner",l=TI().prod.length>0;function c(){const T=document.getElementById(s);T&&T.remove()}function d(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function f(T,P){T.setAttribute("width","24"),T.setAttribute("id",P),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function m(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{rv=!0,c()},T}function _(T,P){T.setAttribute("id",P),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function x(){const T=II(s),P=t("text"),N=document.getElementById(P)||document.createElement("span"),j=t("learnmore"),L=document.getElementById(j)||document.createElement("a"),W=t("preprendIcon"),G=document.getElementById(W)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const Z=T.element;d(Z),_(L,j);const ne=m();f(G,W),Z.append(G,N,L,ne),document.body.appendChild(Z)}l?(N.innerText="Preview backend disconnected.",G.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(G.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,N.innerText="Preview backend running in this workspace."),N.setAttribute("id",P)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",x):x()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function SI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Kt())}function CI(){const n=fh()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function kI(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function RI(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function AI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function PI(){const n=Kt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function bI(){return!CI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function NI(){try{return typeof indexedDB=="object"}catch{return!1}}function DI(){return new Promise((n,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(s),n(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OI="FirebaseError";class Cr extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=OI,Object.setPrototypeOf(this,Cr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,$l.prototype.create)}}class $l{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],c=l?LI(l,s):"Error",d=`${this.serviceName}: ${c} (${o}).`;return new Cr(o,d,s)}}function LI(n,e){return n.replace(VI,(t,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const VI=/\{\$([^}]+)}/g;function MI(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function ji(n,e){if(n===e)return!0;const t=Object.keys(n),s=Object.keys(e);for(const o of t){if(!s.includes(o))return!1;const l=n[o],c=e[o];if(sv(l)&&sv(c)){if(!ji(l,c))return!1}else if(l!==c)return!1}for(const o of s)if(!t.includes(o))return!1;return!0}function sv(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bl(n){const e=[];for(const[t,s]of Object.entries(n))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function ll(n){const e={};return n.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[o,l]=s.split("=");e[decodeURIComponent(o)]=decodeURIComponent(l)}}),e}function ul(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function jI(n,e){const t=new FI(n,e);return t.subscribe.bind(t)}class FI{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let o;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");UI(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:s},o.next===void 0&&(o.next=pf),o.error===void 0&&(o.error=pf),o.complete===void 0&&(o.complete=pf);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function UI(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function pf(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dt(n){return n&&n._delegate?n._delegate:n}class qs{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $I{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new xI;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(zI(e))try{this.getOrInitializeService({instanceIdentifier:bi})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});s.resolve(l)}catch{}}}}clearInstance(e=bi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=bi){return this.instances.has(e)}getOptions(e=bi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[l,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);s===d&&c.resolve(o)}return o}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(s)??new Set;o.add(e),this.onInitCallbacks.set(s,o);const l=this.instances.get(s);return l&&e(l,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const o of s)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:BI(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=bi){return this.component?this.component.multipleInstances?e:bi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function BI(n){return n===bi?void 0:n}function zI(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new $I(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pe;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Pe||(Pe={}));const HI={debug:Pe.DEBUG,verbose:Pe.VERBOSE,info:Pe.INFO,warn:Pe.WARN,error:Pe.ERROR,silent:Pe.SILENT},WI=Pe.INFO,GI={[Pe.DEBUG]:"log",[Pe.VERBOSE]:"log",[Pe.INFO]:"info",[Pe.WARN]:"warn",[Pe.ERROR]:"error"},KI=(n,e,...t)=>{if(e<n.logLevel)return;const s=new Date().toISOString(),o=GI[e];if(o)console[o](`[${s}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Cp{constructor(e){this.name=e,this._logLevel=WI,this._logHandler=KI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Pe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?HI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Pe.DEBUG,...e),this._logHandler(this,Pe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Pe.VERBOSE,...e),this._logHandler(this,Pe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Pe.INFO,...e),this._logHandler(this,Pe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Pe.WARN,...e),this._logHandler(this,Pe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Pe.ERROR,...e),this._logHandler(this,Pe.ERROR,...e)}}const QI=(n,e)=>e.some(t=>n instanceof t);let iv,ov;function YI(){return iv||(iv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function XI(){return ov||(ov=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const v0=new WeakMap,Ff=new WeakMap,_0=new WeakMap,mf=new WeakMap,kp=new WeakMap;function JI(n){const e=new Promise((t,s)=>{const o=()=>{n.removeEventListener("success",l),n.removeEventListener("error",c)},l=()=>{t(Us(n.result)),o()},c=()=>{s(n.error),o()};n.addEventListener("success",l),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&v0.set(t,n)}).catch(()=>{}),kp.set(e,n),e}function ZI(n){if(Ff.has(n))return;const e=new Promise((t,s)=>{const o=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",c),n.removeEventListener("abort",c)},l=()=>{t(),o()},c=()=>{s(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",l),n.addEventListener("error",c),n.addEventListener("abort",c)});Ff.set(n,e)}let Uf={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Ff.get(n);if(e==="objectStoreNames")return n.objectStoreNames||_0.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Us(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function eS(n){Uf=n(Uf)}function tS(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=n.call(gf(this),e,...t);return _0.set(s,e.sort?e.sort():[e]),Us(s)}:XI().includes(n)?function(...e){return n.apply(gf(this),e),Us(v0.get(this))}:function(...e){return Us(n.apply(gf(this),e))}}function nS(n){return typeof n=="function"?tS(n):(n instanceof IDBTransaction&&ZI(n),QI(n,YI())?new Proxy(n,Uf):n)}function Us(n){if(n instanceof IDBRequest)return JI(n);if(mf.has(n))return mf.get(n);const e=nS(n);return e!==n&&(mf.set(n,e),kp.set(e,n)),e}const gf=n=>kp.get(n);function rS(n,e,{blocked:t,upgrade:s,blocking:o,terminated:l}={}){const c=indexedDB.open(n,e),d=Us(c);return s&&c.addEventListener("upgradeneeded",f=>{s(Us(c.result),f.oldVersion,f.newVersion,Us(c.transaction),f)}),t&&c.addEventListener("blocked",f=>t(f.oldVersion,f.newVersion,f)),d.then(f=>{l&&f.addEventListener("close",()=>l()),o&&f.addEventListener("versionchange",m=>o(m.oldVersion,m.newVersion,m))}).catch(()=>{}),d}const sS=["get","getKey","getAll","getAllKeys","count"],iS=["put","add","delete","clear"],yf=new Map;function av(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(yf.get(e))return yf.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,o=iS.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(o||sS.includes(t)))return;const l=async function(c,...d){const f=this.transaction(c,o?"readwrite":"readonly");let m=f.store;return s&&(m=m.index(d.shift())),(await Promise.all([m[t](...d),o&&f.done]))[0]};return yf.set(e,l),l}eS(n=>({...n,get:(e,t,s)=>av(e,t)||n.get(e,t,s),has:(e,t)=>!!av(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oS{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(aS(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function aS(n){return n.getComponent()?.type==="VERSION"}const $f="@firebase/app",lv="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zr=new Cp("@firebase/app"),lS="@firebase/app-compat",uS="@firebase/analytics-compat",cS="@firebase/analytics",hS="@firebase/app-check-compat",dS="@firebase/app-check",fS="@firebase/auth",pS="@firebase/auth-compat",mS="@firebase/database",gS="@firebase/data-connect",yS="@firebase/database-compat",vS="@firebase/functions",_S="@firebase/functions-compat",wS="@firebase/installations",ES="@firebase/installations-compat",xS="@firebase/messaging",TS="@firebase/messaging-compat",IS="@firebase/performance",SS="@firebase/performance-compat",CS="@firebase/remote-config",kS="@firebase/remote-config-compat",RS="@firebase/storage",AS="@firebase/storage-compat",PS="@firebase/firestore",bS="@firebase/ai",NS="@firebase/firestore-compat",DS="firebase",OS="12.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bf="[DEFAULT]",LS={[$f]:"fire-core",[lS]:"fire-core-compat",[cS]:"fire-analytics",[uS]:"fire-analytics-compat",[dS]:"fire-app-check",[hS]:"fire-app-check-compat",[fS]:"fire-auth",[pS]:"fire-auth-compat",[mS]:"fire-rtdb",[gS]:"fire-data-connect",[yS]:"fire-rtdb-compat",[vS]:"fire-fn",[_S]:"fire-fn-compat",[wS]:"fire-iid",[ES]:"fire-iid-compat",[xS]:"fire-fcm",[TS]:"fire-fcm-compat",[IS]:"fire-perf",[SS]:"fire-perf-compat",[CS]:"fire-rc",[kS]:"fire-rc-compat",[RS]:"fire-gcs",[AS]:"fire-gcs-compat",[PS]:"fire-fst",[NS]:"fire-fst-compat",[bS]:"fire-vertex","fire-js":"fire-js",[DS]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qc=new Map,VS=new Map,zf=new Map;function uv(n,e){try{n.container.addComponent(e)}catch(t){Zr.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Fi(n){const e=n.name;if(zf.has(e))return Zr.debug(`There were multiple attempts to register component ${e}.`),!1;zf.set(e,n);for(const t of qc.values())uv(t,n);for(const t of VS.values())uv(t,n);return!0}function ph(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function un(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},$s=new $l("app","Firebase",MS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jS{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new qs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw $s.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wi=OS;function w0(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const s={name:Bf,automaticDataCollectionEnabled:!0,...e},o=s.name;if(typeof o!="string"||!o)throw $s.create("bad-app-name",{appName:String(o)});if(t||(t=m0()),!t)throw $s.create("no-options");const l=qc.get(o);if(l){if(ji(t,l.options)&&ji(s,l.config))return l;throw $s.create("duplicate-app",{appName:o})}const c=new qI(o);for(const f of zf.values())c.addComponent(f);const d=new jS(t,s,c);return qc.set(o,d),d}function Rp(n=Bf){const e=qc.get(n);if(!e&&n===Bf&&m0())return w0();if(!e)throw $s.create("no-app",{appName:n});return e}function yr(n,e,t){let s=LS[n]??n;t&&(s+=`-${t}`);const o=s.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const c=[`Unable to register library "${s}" with version "${e}":`];o&&c.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Zr.warn(c.join(" "));return}Fi(new qs(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FS="firebase-heartbeat-database",US=1,Sl="firebase-heartbeat-store";let vf=null;function E0(){return vf||(vf=rS(FS,US,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Sl)}catch(t){console.warn(t)}}}}).catch(n=>{throw $s.create("idb-open",{originalErrorMessage:n.message})})),vf}async function $S(n){try{const t=(await E0()).transaction(Sl),s=await t.objectStore(Sl).get(x0(n));return await t.done,s}catch(e){if(e instanceof Cr)Zr.warn(e.message);else{const t=$s.create("idb-get",{originalErrorMessage:e?.message});Zr.warn(t.message)}}}async function cv(n,e){try{const s=(await E0()).transaction(Sl,"readwrite");await s.objectStore(Sl).put(e,x0(n)),await s.done}catch(t){if(t instanceof Cr)Zr.warn(t.message);else{const s=$s.create("idb-set",{originalErrorMessage:t?.message});Zr.warn(s.message)}}}function x0(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BS=1024,zS=30;class qS{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new WS(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=hv();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:t}),this._heartbeatsCache.heartbeats.length>zS){const o=GS(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Zr.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=hv(),{heartbeatsToSend:t,unsentEntries:s}=HS(this._heartbeatsCache.heartbeats),o=zc(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return Zr.warn(e),""}}}function hv(){return new Date().toISOString().substring(0,10)}function HS(n,e=BS){const t=[];let s=n.slice();for(const o of n){const l=t.find(c=>c.agent===o.agent);if(l){if(l.dates.push(o.date),dv(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),dv(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class WS{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return NI()?DI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await $S(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return cv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return cv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function dv(n){return zc(JSON.stringify({version:2,heartbeats:n})).length}function GS(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let s=1;s<n.length;s++)n[s].date<t&&(t=n[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KS(n){Fi(new qs("platform-logger",e=>new oS(e),"PRIVATE")),Fi(new qs("heartbeat",e=>new qS(e),"PRIVATE")),yr($f,lv,n),yr($f,lv,"esm2020"),yr("fire-js","")}KS("");function T0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const QS=T0,I0=new $l("auth","Firebase",T0());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hc=new Cp("@firebase/auth");function YS(n,...e){Hc.logLevel<=Pe.WARN&&Hc.warn(`Auth (${Wi}): ${n}`,...e)}function bc(n,...e){Hc.logLevel<=Pe.ERROR&&Hc.error(`Auth (${Wi}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bn(n,...e){throw Pp(n,...e)}function Wn(n,...e){return Pp(n,...e)}function Ap(n,e,t){const s={...QS(),[e]:t};return new $l("auth","Firebase",s).create(e,{appName:n.name})}function Yr(n){return Ap(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function XS(n,e,t){const s=t;if(!(e instanceof s))throw s.name!==e.constructor.name&&bn(n,"argument-error"),Ap(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Pp(n,...e){if(typeof n!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=n.name),n._errorFactory.create(t,...s)}return I0.create(n,...e)}function _e(n,e,...t){if(!n)throw Pp(e,...t)}function Gr(n){const e="INTERNAL ASSERTION FAILED: "+n;throw bc(e),new Error(e)}function es(n,e){n||Gr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qf(){return typeof self<"u"&&self.location?.href||""}function JS(){return fv()==="http:"||fv()==="https:"}function fv(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZS(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(JS()||RI()||"connection"in navigator)?navigator.onLine:!0}function eC(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zl{constructor(e,t){this.shortDelay=e,this.longDelay=t,es(t>e,"Short delay should be less than long delay!"),this.isMobile=SI()||AI()}get(){return ZS()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bp(n,e){es(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S0{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Gr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Gr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Gr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tC={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nC=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],rC=new zl(3e4,6e4);function Xs(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Js(n,e,t,s,o={}){return C0(n,o,async()=>{let l={},c={};s&&(e==="GET"?c=s:l={body:JSON.stringify(s)});const d=Bl({key:n.config.apiKey,...c}).slice(1),f=await n._getAdditionalHeaders();f["Content-Type"]="application/json",n.languageCode&&(f["X-Firebase-Locale"]=n.languageCode);const m={method:e,headers:f,...l};return kI()||(m.referrerPolicy="no-referrer"),n.emulatorConfig&&Hi(n.emulatorConfig.host)&&(m.credentials="include"),S0.fetch()(await k0(n,n.config.apiHost,t,d),m)})}async function C0(n,e,t){n._canInitEmulator=!1;const s={...tC,...e};try{const o=new iC(n),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw wc(n,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const d=l.ok?c.errorMessage:c.error.message,[f,m]=d.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw wc(n,"credential-already-in-use",c);if(f==="EMAIL_EXISTS")throw wc(n,"email-already-in-use",c);if(f==="USER_DISABLED")throw wc(n,"user-disabled",c);const _=s[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw Ap(n,_,m);bn(n,_)}}catch(o){if(o instanceof Cr)throw o;bn(n,"network-request-failed",{message:String(o)})}}async function ql(n,e,t,s,o={}){const l=await Js(n,e,t,s,o);return"mfaPendingCredential"in l&&bn(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function k0(n,e,t,s){const o=`${e}${t}?${s}`,l=n,c=l.config.emulator?bp(n.config,o):`${n.config.apiScheme}://${o}`;return nC.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}function sC(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class iC{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(Wn(this.auth,"network-request-failed")),rC.get())})}}function wc(n,e,t){const s={appName:n.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const o=Wn(n,e,s);return o.customData._tokenResponse=t,o}function pv(n){return n!==void 0&&n.enterprise!==void 0}class oC{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return sC(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function aC(n,e){return Js(n,"GET","/v2/recaptchaConfig",Xs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lC(n,e){return Js(n,"POST","/v1/accounts:delete",e)}async function Wc(n,e){return Js(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yl(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function uC(n,e=!1){const t=dt(n),s=await t.getIdToken(e),o=Np(s);_e(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,c=l?.sign_in_provider;return{claims:o,token:s,authTime:yl(_f(o.auth_time)),issuedAtTime:yl(_f(o.iat)),expirationTime:yl(_f(o.exp)),signInProvider:c||null,signInSecondFactor:l?.sign_in_second_factor||null}}function _f(n){return Number(n)*1e3}function Np(n){const[e,t,s]=n.split(".");if(e===void 0||t===void 0||s===void 0)return bc("JWT malformed, contained fewer than 3 sections"),null;try{const o=d0(t);return o?JSON.parse(o):(bc("Failed to decode base64 JWT payload"),null)}catch(o){return bc("Caught error parsing JWT payload as JSON",o?.toString()),null}}function mv(n){const e=Np(n);return _e(e,"internal-error"),_e(typeof e.exp<"u","internal-error"),_e(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cl(n,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof Cr&&cC(s)&&n.auth.currentUser===n&&await n.auth.signOut(),s}}function cC({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hf{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=yl(this.lastLoginAt),this.creationTime=yl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gc(n){const e=n.auth,t=await n.getIdToken(),s=await Cl(n,Wc(e,{idToken:t}));_e(s?.users.length,e,"internal-error");const o=s.users[0];n._notifyReloadListener(o);const l=o.providerUserInfo?.length?R0(o.providerUserInfo):[],c=fC(n.providerData,l),d=n.isAnonymous,f=!(n.email&&o.passwordHash)&&!c?.length,m=d?f:!1,_={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new Hf(o.createdAt,o.lastLoginAt),isAnonymous:m};Object.assign(n,_)}async function dC(n){const e=dt(n);await Gc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function fC(n,e){return[...n.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function R0(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pC(n,e){const t=await C0(n,{},async()=>{const s=Bl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=n.config,c=await k0(n,o,"/v1/token",`key=${l}`),d=await n._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const f={method:"POST",headers:d,body:s};return n.emulatorConfig&&Hi(n.emulatorConfig.host)&&(f.credentials="include"),S0.fetch()(c,f)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function mC(n,e){return Js(n,"POST","/v2/accounts:revokeToken",Xs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){_e(e.idToken,"internal-error"),_e(typeof e.idToken<"u","internal-error"),_e(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):mv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){_e(e.length!==0,"internal-error");const t=mv(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(_e(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:o,expiresIn:l}=await pC(e,t);this.updateTokensAndExpiration(s,o,Number(l))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:o,expirationTime:l}=t,c=new zo;return s&&(_e(typeof s=="string","internal-error",{appName:e}),c.refreshToken=s),o&&(_e(typeof o=="string","internal-error",{appName:e}),c.accessToken=o),l&&(_e(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new zo,this.toJSON())}_performRefresh(){return Gr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ds(n,e){_e(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class qn{constructor({uid:e,auth:t,stsTokenManager:s,...o}){this.providerId="firebase",this.proactiveRefresh=new hC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Hf(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await Cl(this,this.stsTokenManager.getToken(this.auth,e));return _e(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return uC(this,e)}reload(){return dC(this)}_assign(e){this!==e&&(_e(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new qn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){_e(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await Gc(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(un(this.auth.app))return Promise.reject(Yr(this.auth));const e=await this.getIdToken();return await Cl(this,lC(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const s=t.displayName??void 0,o=t.email??void 0,l=t.phoneNumber??void 0,c=t.photoURL??void 0,d=t.tenantId??void 0,f=t._redirectEventId??void 0,m=t.createdAt??void 0,_=t.lastLoginAt??void 0,{uid:x,emailVerified:T,isAnonymous:P,providerData:N,stsTokenManager:j}=t;_e(x&&j,e,"internal-error");const L=zo.fromJSON(this.name,j);_e(typeof x=="string",e,"internal-error"),Ds(s,e.name),Ds(o,e.name),_e(typeof T=="boolean",e,"internal-error"),_e(typeof P=="boolean",e,"internal-error"),Ds(l,e.name),Ds(c,e.name),Ds(d,e.name),Ds(f,e.name),Ds(m,e.name),Ds(_,e.name);const W=new qn({uid:x,auth:e,email:o,emailVerified:T,displayName:s,isAnonymous:P,photoURL:c,phoneNumber:l,tenantId:d,stsTokenManager:L,createdAt:m,lastLoginAt:_});return N&&Array.isArray(N)&&(W.providerData=N.map(G=>({...G}))),f&&(W._redirectEventId=f),W}static async _fromIdTokenResponse(e,t,s=!1){const o=new zo;o.updateFromServerResponse(t);const l=new qn({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await Gc(l),l}static async _fromGetAccountInfoResponse(e,t,s){const o=t.users[0];_e(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?R0(o.providerUserInfo):[],c=!(o.email&&o.passwordHash)&&!l?.length,d=new zo;d.updateFromIdToken(s);const f=new qn({uid:o.localId,auth:e,stsTokenManager:d,isAnonymous:c}),m={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new Hf(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!l?.length};return Object.assign(f,m),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gv=new Map;function Kr(n){es(n instanceof Function,"Expected a class definition");let e=gv.get(n);return e?(es(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,gv.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A0{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}A0.type="NONE";const yv=A0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nc(n,e,t){return`firebase:${n}:${e}:${t}`}class qo{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:o,name:l}=this.auth;this.fullUserKey=Nc(this.userKey,o.apiKey,l),this.fullPersistenceKey=Nc("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Wc(this.auth,{idToken:e}).catch(()=>{});return t?qn._fromGetAccountInfoResponse(this.auth,t,e):null}return qn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new qo(Kr(yv),e,s);const o=(await Promise.all(t.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let l=o[0]||Kr(yv);const c=Nc(s,e.config.apiKey,e.name);let d=null;for(const m of t)try{const _=await m._get(c);if(_){let x;if(typeof _=="string"){const T=await Wc(e,{idToken:_}).catch(()=>{});if(!T)break;x=await qn._fromGetAccountInfoResponse(e,T,_)}else x=qn._fromJSON(e,_);m!==l&&(d=x),l=m;break}}catch{}const f=o.filter(m=>m._shouldAllowMigration);return!l._shouldAllowMigration||!f.length?new qo(l,e,s):(l=f[0],d&&await l._set(c,d.toJSON()),await Promise.all(t.map(async m=>{if(m!==l)try{await m._remove(c)}catch{}})),new qo(l,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vv(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(D0(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(P0(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(L0(e))return"Blackberry";if(V0(e))return"Webos";if(b0(e))return"Safari";if((e.includes("chrome/")||N0(e))&&!e.includes("edge/"))return"Chrome";if(O0(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=n.match(t);if(s?.length===2)return s[1]}return"Other"}function P0(n=Kt()){return/firefox\//i.test(n)}function b0(n=Kt()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function N0(n=Kt()){return/crios\//i.test(n)}function D0(n=Kt()){return/iemobile/i.test(n)}function O0(n=Kt()){return/android/i.test(n)}function L0(n=Kt()){return/blackberry/i.test(n)}function V0(n=Kt()){return/webos/i.test(n)}function Dp(n=Kt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function gC(n=Kt()){return Dp(n)&&!!window.navigator?.standalone}function yC(){return PI()&&document.documentMode===10}function M0(n=Kt()){return Dp(n)||O0(n)||V0(n)||L0(n)||/windows phone/i.test(n)||D0(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j0(n,e=[]){let t;switch(n){case"Browser":t=vv(Kt());break;case"Worker":t=`${vv(Kt())}-${n}`;break;default:t=n}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Wi}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vC{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=l=>new Promise((c,d)=>{try{const f=e(l);c(f)}catch(f){d(f)}});s.onAbort=t,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _C(n,e={}){return Js(n,"GET","/v2/passwordPolicy",Xs(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wC=6;class EC{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??wC,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xC{constructor(e,t,s,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new _v(this),this.idTokenSubscription=new _v(this),this.beforeStateQueue=new vC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=I0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Kr(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await qo.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Wc(this,{idToken:e}),s=await qn._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(un(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(c,c))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let s=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=this.redirectUser?._redirectEventId,c=s?._redirectEventId,d=await this.tryRedirectSignIn(e);(!l||l===c)&&d?.user&&(s=d.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(l){s=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return _e(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Gc(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=eC()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(un(this.app))return Promise.reject(Yr(this));const t=e?dt(e):null;return t&&_e(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&_e(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return un(this.app)?Promise.reject(Yr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return un(this.app)?Promise.reject(Yr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Kr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await _C(this),t=new EC(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new $l("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await mC(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Kr(e)||this._popupRedirectResolver;_e(t,this,"argument-error"),this.redirectPersistenceManager=await qo.create(this,[Kr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(_e(d,this,"internal-error"),d.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const f=e.addObserver(t,s,o);return()=>{c=!0,f()}}else{const f=e.addObserver(t);return()=>{c=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return _e(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=j0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(un(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&YS(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Zs(n){return dt(n)}class _v{constructor(e){this.auth=e,this.observer=null,this.addObserver=jI(t=>this.observer=t)}get next(){return _e(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function TC(n){mh=n}function F0(n){return mh.loadJS(n)}function IC(){return mh.recaptchaEnterpriseScript}function SC(){return mh.gapiScript}function CC(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class kC{constructor(){this.enterprise=new RC}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class RC{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const AC="recaptcha-enterprise",U0="NO_RECAPTCHA";class PC{constructor(e){this.type=AC,this.auth=Zs(e)}async verify(e="verify",t=!1){async function s(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(c,d)=>{aC(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(f=>{if(f.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const m=new oC(f);return l.tenantId==null?l._agentRecaptchaConfig=m:l._tenantRecaptchaConfigs[l.tenantId]=m,c(m.siteKey)}}).catch(f=>{d(f)})})}function o(l,c,d){const f=window.grecaptcha;pv(f)?f.enterprise.ready(()=>{f.enterprise.execute(l,{action:e}).then(m=>{c(m)}).catch(()=>{c(U0)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new kC().execute("siteKey",{action:"verify"}):new Promise((l,c)=>{s(this.auth).then(d=>{if(!t&&pv(window.grecaptcha))o(d,l,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let f=IC();f.length!==0&&(f+=d),F0(f).then(()=>{o(d,l,c)}).catch(m=>{c(m)})}}).catch(d=>{c(d)})})}}async function wv(n,e,t,s=!1,o=!1){const l=new PC(n);let c;if(o)c=U0;else try{c=await l.verify(t)}catch{c=await l.verify(t,!0)}const d={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const f=d.phoneEnrollmentInfo.phoneNumber,m=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:f,recaptchaToken:m,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const f=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:f,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return s?Object.assign(d,{captchaResp:c}):Object.assign(d,{captchaResponse:c}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function Wf(n,e,t,s,o){if(n._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await wv(n,e,t,t==="getOobCode");return s(n,l)}else return s(n,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await wv(n,e,t,t==="getOobCode");return s(n,c)}else return Promise.reject(l)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bC(n,e){const t=ph(n,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(ji(l,e??{}))return o;bn(o,"already-initialized")}return t.initialize({options:e})}function NC(n,e){const t=e?.persistence||[],s=(Array.isArray(t)?t:[t]).map(Kr);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(s,e?.popupRedirectResolver)}function DC(n,e,t){const s=Zs(n);_e(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,l=$0(e),{host:c,port:d}=OC(e),f=d===null?"":`:${d}`,m={url:`${l}//${c}${f}/`},_=Object.freeze({host:c,port:d,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){_e(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),_e(ji(m,s.config.emulator)&&ji(_,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=m,s.emulatorConfig=_,s.settings.appVerificationDisabledForTesting=!0,Hi(c)?(Ip(`${l}//${c}${f}`),Sp("Auth",!0)):LC()}function $0(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function OC(n){const e=$0(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const l=o[1];return{host:l,port:Ev(s.substr(l.length+1))}}else{const[l,c]=s.split(":");return{host:l,port:Ev(c)}}}function Ev(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function LC(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Op{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Gr("not implemented")}_getIdTokenResponse(e){return Gr("not implemented")}_linkToIdToken(e,t){return Gr("not implemented")}_getReauthenticationResolver(e){return Gr("not implemented")}}async function VC(n,e){return Js(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MC(n,e){return ql(n,"POST","/v1/accounts:signInWithPassword",Xs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jC(n,e){return ql(n,"POST","/v1/accounts:signInWithEmailLink",Xs(n,e))}async function FC(n,e){return ql(n,"POST","/v1/accounts:signInWithEmailLink",Xs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kl extends Op{constructor(e,t,s,o=null){super("password",s),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new kl(e,t,"password")}static _fromEmailAndCode(e,t,s=null){return new kl(e,t,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Wf(e,t,"signInWithPassword",MC);case"emailLink":return jC(e,{email:this._email,oobCode:this._password});default:bn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const s={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Wf(e,s,"signUpPassword",VC);case"emailLink":return FC(e,{idToken:t,email:this._email,oobCode:this._password});default:bn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ho(n,e){return ql(n,"POST","/v1/accounts:signInWithIdp",Xs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UC="http://localhost";class Ui extends Op{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ui(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):bn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o,...l}=t;if(!s||!o)return null;const c=new Ui(s,o);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return Ho(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,Ho(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ho(e,t)}buildRequest(){const e={requestUri:UC,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Bl(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $C(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function BC(n){const e=ll(ul(n)).link,t=e?ll(ul(e)).deep_link_id:null,s=ll(ul(n)).deep_link_id;return(s?ll(ul(s)).link:null)||s||t||e||n}class Lp{constructor(e){const t=ll(ul(e)),s=t.apiKey??null,o=t.oobCode??null,l=$C(t.mode??null);_e(s&&o&&l,"argument-error"),this.apiKey=s,this.operation=l,this.code=o,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=BC(e);try{return new Lp(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra{constructor(){this.providerId=ra.PROVIDER_ID}static credential(e,t){return kl._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const s=Lp.parseLink(t);return _e(s,"argument-error"),kl._fromEmailAndCode(e,s.code,s.tenantId)}}ra.PROVIDER_ID="password";ra.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ra.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vp{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl extends Vp{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls extends Hl{constructor(){super("facebook.com")}static credential(e){return Ui._fromParams({providerId:Ls.PROVIDER_ID,signInMethod:Ls.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ls.credentialFromTaggedObject(e)}static credentialFromError(e){return Ls.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ls.credential(e.oauthAccessToken)}catch{return null}}}Ls.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ls.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr extends Hl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ui._fromParams({providerId:Wr.PROVIDER_ID,signInMethod:Wr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Wr.credentialFromTaggedObject(e)}static credentialFromError(e){return Wr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return Wr.credential(t,s)}catch{return null}}}Wr.GOOGLE_SIGN_IN_METHOD="google.com";Wr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs extends Hl{constructor(){super("github.com")}static credential(e){return Ui._fromParams({providerId:Vs.PROVIDER_ID,signInMethod:Vs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Vs.credentialFromTaggedObject(e)}static credentialFromError(e){return Vs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Vs.credential(e.oauthAccessToken)}catch{return null}}}Vs.GITHUB_SIGN_IN_METHOD="github.com";Vs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms extends Hl{constructor(){super("twitter.com")}static credential(e,t){return Ui._fromParams({providerId:Ms.PROVIDER_ID,signInMethod:Ms.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Ms.credentialFromTaggedObject(e)}static credentialFromError(e){return Ms.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return Ms.credential(t,s)}catch{return null}}}Ms.TWITTER_SIGN_IN_METHOD="twitter.com";Ms.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zC(n,e){return ql(n,"POST","/v1/accounts:signUp",Xs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,o=!1){const l=await qn._fromIdTokenResponse(e,s,o),c=xv(s);return new $i({user:l,providerId:c,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const o=xv(s);return new $i({user:e,providerId:o,_tokenResponse:s,operationType:t})}}function xv(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc extends Cr{constructor(e,t,s,o){super(t.code,t.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,Kc.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,o){return new Kc(e,t,s,o)}}function B0(n,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Kc._fromErrorAndOperation(n,l,e,s):l})}async function qC(n,e,t=!1){const s=await Cl(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return $i._forOperation(n,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HC(n,e,t=!1){const{auth:s}=n;if(un(s.app))return Promise.reject(Yr(s));const o="reauthenticate";try{const l=await Cl(n,B0(s,o,e,n),t);_e(l.idToken,s,"internal-error");const c=Np(l.idToken);_e(c,s,"internal-error");const{sub:d}=c;return _e(n.uid===d,s,"user-mismatch"),$i._forOperation(n,o,l)}catch(l){throw l?.code==="auth/user-not-found"&&bn(s,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function z0(n,e,t=!1){if(un(n.app))return Promise.reject(Yr(n));const s="signIn",o=await B0(n,s,e),l=await $i._fromIdTokenResponse(n,s,o);return t||await n._updateCurrentUser(l.user),l}async function WC(n,e){return z0(Zs(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function q0(n){const e=Zs(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function GC(n,e,t){if(un(n.app))return Promise.reject(Yr(n));const s=Zs(n),c=await Wf(s,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",zC).catch(f=>{throw f.code==="auth/password-does-not-meet-requirements"&&q0(n),f}),d=await $i._fromIdTokenResponse(s,"signIn",c);return await s._updateCurrentUser(d.user),d}function KC(n,e,t){return un(n.app)?Promise.reject(Yr(n)):WC(dt(n),ra.credential(e,t)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&q0(n),s})}function QC(n,e,t,s){return dt(n).onIdTokenChanged(e,t,s)}function YC(n,e,t){return dt(n).beforeAuthStateChanged(e,t)}function XC(n,e,t,s){return dt(n).onAuthStateChanged(e,t,s)}function JC(n){return dt(n).signOut()}const Qc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H0{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Qc,"1"),this.storage.removeItem(Qc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZC=1e3,ek=10;class W0 extends H0{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=M0(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),o=this.localCache[t];s!==o&&e(t,o,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,d,f)=>{this.notifyListeners(c,f)});return}const s=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const c=this.storage.getItem(s);!t&&this.localCache[s]===c||this.notifyListeners(s,c)},l=this.storage.getItem(s);yC()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,ek):o()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},ZC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}W0.type="LOCAL";const tk=W0;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G0 extends H0{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}G0.type="SESSION";const K0=G0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nk(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const s=new gh(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:o,data:l}=t.data,c=this.handlersMap[o];if(!c?.size)return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const d=Array.from(c).map(async m=>m(t.origin,l)),f=await nk(d);t.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:f})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}gh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mp(n="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rk{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,c;return new Promise((d,f)=>{const m=Mp("",20);o.port1.start();const _=setTimeout(()=>{f(new Error("unsupported_event"))},s);c={messageChannel:o,onMessage(x){const T=x;if(T.data.eventId===m)switch(T.data.status){case"ack":clearTimeout(_),l=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),d(T.data.response);break;default:clearTimeout(_),clearTimeout(l),f(new Error("invalid_response"));break}}},this.handlers.add(c),o.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:m,data:t},[o.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vr(){return window}function sk(n){vr().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q0(){return typeof vr().WorkerGlobalScope<"u"&&typeof vr().importScripts=="function"}async function ik(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function ok(){return navigator?.serviceWorker?.controller||null}function ak(){return Q0()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y0="firebaseLocalStorageDb",lk=1,Yc="firebaseLocalStorage",X0="fbase_key";class Wl{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function yh(n,e){return n.transaction([Yc],e?"readwrite":"readonly").objectStore(Yc)}function uk(){const n=indexedDB.deleteDatabase(Y0);return new Wl(n).toPromise()}function Gf(){const n=indexedDB.open(Y0,lk);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const s=n.result;try{s.createObjectStore(Yc,{keyPath:X0})}catch(o){t(o)}}),n.addEventListener("success",async()=>{const s=n.result;s.objectStoreNames.contains(Yc)?e(s):(s.close(),await uk(),e(await Gf()))})})}async function Tv(n,e,t){const s=yh(n,!0).put({[X0]:e,value:t});return new Wl(s).toPromise()}async function ck(n,e){const t=yh(n,!1).get(e),s=await new Wl(t).toPromise();return s===void 0?null:s.value}function Iv(n,e){const t=yh(n,!0).delete(e);return new Wl(t).toPromise()}const hk=800,dk=3;class J0{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Gf(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>dk)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Q0()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=gh._getInstance(ak()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await ik(),!this.activeServiceWorker)return;this.sender=new rk(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||ok()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Gf();return await Tv(e,Qc,"1"),await Iv(e,Qc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>Tv(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>ck(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Iv(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=yh(o,!1).getAll();return new Wl(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),hk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}J0.type="LOCAL";const fk=J0;new zl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z0(n,e){return e?Kr(e):(_e(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jp extends Op{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ho(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ho(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ho(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function pk(n){return z0(n.auth,new jp(n),n.bypassAuthState)}function mk(n){const{auth:e,user:t}=n;return _e(t,e,"internal-error"),HC(t,new jp(n),n.bypassAuthState)}async function gk(n){const{auth:e,user:t}=n;return _e(t,e,"internal-error"),qC(t,new jp(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ew{constructor(e,t,s,o,l=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:o,tenantId:l,error:c,type:d}=e;if(c){this.reject(c);return}const f={auth:this.auth,requestUri:t,sessionId:s,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(f))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return pk;case"linkViaPopup":case"linkViaRedirect":return gk;case"reauthViaPopup":case"reauthViaRedirect":return mk;default:bn(this.auth,"internal-error")}}resolve(e){es(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){es(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yk=new zl(2e3,1e4);async function vk(n,e,t){if(un(n.app))return Promise.reject(Wn(n,"operation-not-supported-in-this-environment"));const s=Zs(n);XS(n,e,Vp);const o=Z0(s,t);return new Oi(s,"signInViaPopup",e,o).executeNotNull()}class Oi extends ew{constructor(e,t,s,o,l){super(e,t,o,l),this.provider=s,this.authWindow=null,this.pollId=null,Oi.currentPopupAction&&Oi.currentPopupAction.cancel(),Oi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return _e(e,this.auth,"internal-error"),e}async onExecution(){es(this.filter.length===1,"Popup operations only handle one event");const e=Mp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Wn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Wn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Oi.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Wn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,yk.get())};e()}}Oi.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _k="pendingRedirect",Dc=new Map;class wk extends ew{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=Dc.get(this.auth._key());if(!e){try{const s=await Ek(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}Dc.set(this.auth._key(),e)}return this.bypassAuthState||Dc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Ek(n,e){const t=Ik(e),s=Tk(n);if(!await s._isAvailable())return!1;const o=await s._get(t)==="true";return await s._remove(t),o}function xk(n,e){Dc.set(n._key(),e)}function Tk(n){return Kr(n._redirectPersistence)}function Ik(n){return Nc(_k,n.config.apiKey,n.name)}async function Sk(n,e,t=!1){if(un(n.app))return Promise.reject(Yr(n));const s=Zs(n),o=Z0(s,e),c=await new wk(s,o,t).execute();return c&&!t&&(delete c.user._redirectEventId,await s._persistUserIfCurrent(c.user),await s._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ck=600*1e3;class kk{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Rk(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!tw(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Wn(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Ck&&this.cachedEventUids.clear(),this.cachedEventUids.has(Sv(e))}saveEventToCache(e){this.cachedEventUids.add(Sv(e)),this.lastProcessedEventTime=Date.now()}}function Sv(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function tw({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function Rk(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return tw(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ak(n,e={}){return Js(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pk=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,bk=/^https?/;async function Nk(n){if(n.config.emulator)return;const{authorizedDomains:e}=await Ak(n);for(const t of e)try{if(Dk(t))return}catch{}bn(n,"unauthorized-domain")}function Dk(n){const e=qf(),{protocol:t,hostname:s}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&s===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===s}if(!bk.test(t))return!1;if(Pk.test(n))return s===n;const o=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ok=new zl(3e4,6e4);function Cv(){const n=vr().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function Lk(n){return new Promise((e,t)=>{function s(){Cv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Cv(),t(Wn(n,"network-request-failed"))},timeout:Ok.get()})}if(vr().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(vr().gapi?.load)s();else{const o=CC("iframefcb");return vr()[o]=()=>{gapi.load?s():t(Wn(n,"network-request-failed"))},F0(`${SC()}?onload=${o}`).catch(l=>t(l))}}).catch(e=>{throw Oc=null,e})}let Oc=null;function Vk(n){return Oc=Oc||Lk(n),Oc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mk=new zl(5e3,15e3),jk="__/auth/iframe",Fk="emulator/auth/iframe",Uk={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},$k=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Bk(n){const e=n.config;_e(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?bp(e,Fk):`https://${n.config.authDomain}/${jk}`,s={apiKey:e.apiKey,appName:n.name,v:Wi},o=$k.get(n.config.apiHost);o&&(s.eid=o);const l=n._getFrameworks();return l.length&&(s.fw=l.join(",")),`${t}?${Bl(s).slice(1)}`}async function zk(n){const e=await Vk(n),t=vr().gapi;return _e(t,n,"internal-error"),e.open({where:document.body,url:Bk(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Uk,dontclear:!0},s=>new Promise(async(o,l)=>{await s.restyle({setHideOnLeave:!1});const c=Wn(n,"network-request-failed"),d=vr().setTimeout(()=>{l(c)},Mk.get());function f(){vr().clearTimeout(d),o(s)}s.ping(f).then(f,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qk={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Hk=500,Wk=600,Gk="_blank",Kk="http://localhost";class kv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Qk(n,e,t,s=Hk,o=Wk){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),c=Math.max((window.screen.availWidth-s)/2,0).toString();let d="";const f={...qk,width:s.toString(),height:o.toString(),top:l,left:c},m=Kt().toLowerCase();t&&(d=N0(m)?Gk:t),P0(m)&&(e=e||Kk,f.scrollbars="yes");const _=Object.entries(f).reduce((T,[P,N])=>`${T}${P}=${N},`,"");if(gC(m)&&d!=="_self")return Yk(e||"",d),new kv(null);const x=window.open(e||"",d,_);_e(x,n,"popup-blocked");try{x.focus()}catch{}return new kv(x)}function Yk(n,e){const t=document.createElement("a");t.href=n,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xk="__/auth/handler",Jk="emulator/auth/handler",Zk=encodeURIComponent("fac");async function Rv(n,e,t,s,o,l){_e(n.config.authDomain,n,"auth-domain-config-required"),_e(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:s,v:Wi,eventId:o};if(e instanceof Vp){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",MI(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,x]of Object.entries({}))c[_]=x}if(e instanceof Hl){const _=e.getScopes().filter(x=>x!=="");_.length>0&&(c.scopes=_.join(","))}n.tenantId&&(c.tid=n.tenantId);const d=c;for(const _ of Object.keys(d))d[_]===void 0&&delete d[_];const f=await n._getAppCheckToken(),m=f?`#${Zk}=${encodeURIComponent(f)}`:"";return`${eR(n)}?${Bl(d).slice(1)}${m}`}function eR({config:n}){return n.emulator?bp(n,Jk):`https://${n.authDomain}/${Xk}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wf="webStorageSupport";class tR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=K0,this._completeRedirectFn=Sk,this._overrideRedirectResult=xk}async _openPopup(e,t,s,o){es(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const l=await Rv(e,t,s,qf(),o);return Qk(e,l,Mp())}async _openRedirect(e,t,s,o){await this._originValidation(e);const l=await Rv(e,t,s,qf(),o);return sk(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(es(l,"If manager is not set, promise should be"),l)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await zk(e),s=new kk(e);return t.register("authEvent",o=>(_e(o?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(wf,{type:wf},o=>{const l=o?.[0]?.[wf];l!==void 0&&t(!!l),bn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Nk(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return M0()||b0()||Dp()}}const nR=tR;var Av="@firebase/auth",Pv="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rR{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){_e(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sR(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function iR(n){Fi(new qs("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=s.options;_e(c&&!c.includes(":"),"invalid-api-key",{appName:s.name});const f={apiKey:c,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:j0(n)},m=new xC(s,o,l,f);return NC(m,t),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),Fi(new qs("auth-internal",e=>{const t=Zs(e.getProvider("auth").getImmediate());return(s=>new rR(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),yr(Av,Pv,sR(n)),yr(Av,Pv,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oR=300,aR=g0("authIdTokenMaxAge")||oR;let bv=null;const lR=n=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>aR)return;const o=t?.token;bv!==o&&(bv=o,await fetch(n,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function uR(n=Rp()){const e=ph(n,"auth");if(e.isInitialized())return e.getImmediate();const t=bC(n,{popupRedirectResolver:nR,persistence:[fk,tk,K0]}),s=g0("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(s,location.origin);if(location.origin===l.origin){const c=lR(l.toString());YC(t,c,()=>c(t.currentUser)),QC(t,d=>c(d))}}const o=f0("auth");return o&&DC(t,`http://${o}`),t}function cR(){return document.getElementsByTagName("head")?.[0]??document}TC({loadJS(n){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",n),s.onload=e,s.onerror=o=>{const l=Wn("internal-error");l.customData=o,t(l)},s.type="text/javascript",s.charset="UTF-8",cR().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});iR("Browser");var hR="firebase",dR="12.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */yr(hR,dR,"app");var Nv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Bs,nw;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,S){function C(){}C.prototype=S.prototype,k.F=S.prototype,k.prototype=new C,k.prototype.constructor=k,k.D=function(b,D,F){for(var R=Array(arguments.length-2),Oe=2;Oe<arguments.length;Oe++)R[Oe-2]=arguments[Oe];return S.prototype[D].apply(b,R)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,t),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(k,S,C){C||(C=0);const b=Array(16);if(typeof S=="string")for(var D=0;D<16;++D)b[D]=S.charCodeAt(C++)|S.charCodeAt(C++)<<8|S.charCodeAt(C++)<<16|S.charCodeAt(C++)<<24;else for(D=0;D<16;++D)b[D]=S[C++]|S[C++]<<8|S[C++]<<16|S[C++]<<24;S=k.g[0],C=k.g[1],D=k.g[2];let F=k.g[3],R;R=S+(F^C&(D^F))+b[0]+3614090360&4294967295,S=C+(R<<7&4294967295|R>>>25),R=F+(D^S&(C^D))+b[1]+3905402710&4294967295,F=S+(R<<12&4294967295|R>>>20),R=D+(C^F&(S^C))+b[2]+606105819&4294967295,D=F+(R<<17&4294967295|R>>>15),R=C+(S^D&(F^S))+b[3]+3250441966&4294967295,C=D+(R<<22&4294967295|R>>>10),R=S+(F^C&(D^F))+b[4]+4118548399&4294967295,S=C+(R<<7&4294967295|R>>>25),R=F+(D^S&(C^D))+b[5]+1200080426&4294967295,F=S+(R<<12&4294967295|R>>>20),R=D+(C^F&(S^C))+b[6]+2821735955&4294967295,D=F+(R<<17&4294967295|R>>>15),R=C+(S^D&(F^S))+b[7]+4249261313&4294967295,C=D+(R<<22&4294967295|R>>>10),R=S+(F^C&(D^F))+b[8]+1770035416&4294967295,S=C+(R<<7&4294967295|R>>>25),R=F+(D^S&(C^D))+b[9]+2336552879&4294967295,F=S+(R<<12&4294967295|R>>>20),R=D+(C^F&(S^C))+b[10]+4294925233&4294967295,D=F+(R<<17&4294967295|R>>>15),R=C+(S^D&(F^S))+b[11]+2304563134&4294967295,C=D+(R<<22&4294967295|R>>>10),R=S+(F^C&(D^F))+b[12]+1804603682&4294967295,S=C+(R<<7&4294967295|R>>>25),R=F+(D^S&(C^D))+b[13]+4254626195&4294967295,F=S+(R<<12&4294967295|R>>>20),R=D+(C^F&(S^C))+b[14]+2792965006&4294967295,D=F+(R<<17&4294967295|R>>>15),R=C+(S^D&(F^S))+b[15]+1236535329&4294967295,C=D+(R<<22&4294967295|R>>>10),R=S+(D^F&(C^D))+b[1]+4129170786&4294967295,S=C+(R<<5&4294967295|R>>>27),R=F+(C^D&(S^C))+b[6]+3225465664&4294967295,F=S+(R<<9&4294967295|R>>>23),R=D+(S^C&(F^S))+b[11]+643717713&4294967295,D=F+(R<<14&4294967295|R>>>18),R=C+(F^S&(D^F))+b[0]+3921069994&4294967295,C=D+(R<<20&4294967295|R>>>12),R=S+(D^F&(C^D))+b[5]+3593408605&4294967295,S=C+(R<<5&4294967295|R>>>27),R=F+(C^D&(S^C))+b[10]+38016083&4294967295,F=S+(R<<9&4294967295|R>>>23),R=D+(S^C&(F^S))+b[15]+3634488961&4294967295,D=F+(R<<14&4294967295|R>>>18),R=C+(F^S&(D^F))+b[4]+3889429448&4294967295,C=D+(R<<20&4294967295|R>>>12),R=S+(D^F&(C^D))+b[9]+568446438&4294967295,S=C+(R<<5&4294967295|R>>>27),R=F+(C^D&(S^C))+b[14]+3275163606&4294967295,F=S+(R<<9&4294967295|R>>>23),R=D+(S^C&(F^S))+b[3]+4107603335&4294967295,D=F+(R<<14&4294967295|R>>>18),R=C+(F^S&(D^F))+b[8]+1163531501&4294967295,C=D+(R<<20&4294967295|R>>>12),R=S+(D^F&(C^D))+b[13]+2850285829&4294967295,S=C+(R<<5&4294967295|R>>>27),R=F+(C^D&(S^C))+b[2]+4243563512&4294967295,F=S+(R<<9&4294967295|R>>>23),R=D+(S^C&(F^S))+b[7]+1735328473&4294967295,D=F+(R<<14&4294967295|R>>>18),R=C+(F^S&(D^F))+b[12]+2368359562&4294967295,C=D+(R<<20&4294967295|R>>>12),R=S+(C^D^F)+b[5]+4294588738&4294967295,S=C+(R<<4&4294967295|R>>>28),R=F+(S^C^D)+b[8]+2272392833&4294967295,F=S+(R<<11&4294967295|R>>>21),R=D+(F^S^C)+b[11]+1839030562&4294967295,D=F+(R<<16&4294967295|R>>>16),R=C+(D^F^S)+b[14]+4259657740&4294967295,C=D+(R<<23&4294967295|R>>>9),R=S+(C^D^F)+b[1]+2763975236&4294967295,S=C+(R<<4&4294967295|R>>>28),R=F+(S^C^D)+b[4]+1272893353&4294967295,F=S+(R<<11&4294967295|R>>>21),R=D+(F^S^C)+b[7]+4139469664&4294967295,D=F+(R<<16&4294967295|R>>>16),R=C+(D^F^S)+b[10]+3200236656&4294967295,C=D+(R<<23&4294967295|R>>>9),R=S+(C^D^F)+b[13]+681279174&4294967295,S=C+(R<<4&4294967295|R>>>28),R=F+(S^C^D)+b[0]+3936430074&4294967295,F=S+(R<<11&4294967295|R>>>21),R=D+(F^S^C)+b[3]+3572445317&4294967295,D=F+(R<<16&4294967295|R>>>16),R=C+(D^F^S)+b[6]+76029189&4294967295,C=D+(R<<23&4294967295|R>>>9),R=S+(C^D^F)+b[9]+3654602809&4294967295,S=C+(R<<4&4294967295|R>>>28),R=F+(S^C^D)+b[12]+3873151461&4294967295,F=S+(R<<11&4294967295|R>>>21),R=D+(F^S^C)+b[15]+530742520&4294967295,D=F+(R<<16&4294967295|R>>>16),R=C+(D^F^S)+b[2]+3299628645&4294967295,C=D+(R<<23&4294967295|R>>>9),R=S+(D^(C|~F))+b[0]+4096336452&4294967295,S=C+(R<<6&4294967295|R>>>26),R=F+(C^(S|~D))+b[7]+1126891415&4294967295,F=S+(R<<10&4294967295|R>>>22),R=D+(S^(F|~C))+b[14]+2878612391&4294967295,D=F+(R<<15&4294967295|R>>>17),R=C+(F^(D|~S))+b[5]+4237533241&4294967295,C=D+(R<<21&4294967295|R>>>11),R=S+(D^(C|~F))+b[12]+1700485571&4294967295,S=C+(R<<6&4294967295|R>>>26),R=F+(C^(S|~D))+b[3]+2399980690&4294967295,F=S+(R<<10&4294967295|R>>>22),R=D+(S^(F|~C))+b[10]+4293915773&4294967295,D=F+(R<<15&4294967295|R>>>17),R=C+(F^(D|~S))+b[1]+2240044497&4294967295,C=D+(R<<21&4294967295|R>>>11),R=S+(D^(C|~F))+b[8]+1873313359&4294967295,S=C+(R<<6&4294967295|R>>>26),R=F+(C^(S|~D))+b[15]+4264355552&4294967295,F=S+(R<<10&4294967295|R>>>22),R=D+(S^(F|~C))+b[6]+2734768916&4294967295,D=F+(R<<15&4294967295|R>>>17),R=C+(F^(D|~S))+b[13]+1309151649&4294967295,C=D+(R<<21&4294967295|R>>>11),R=S+(D^(C|~F))+b[4]+4149444226&4294967295,S=C+(R<<6&4294967295|R>>>26),R=F+(C^(S|~D))+b[11]+3174756917&4294967295,F=S+(R<<10&4294967295|R>>>22),R=D+(S^(F|~C))+b[2]+718787259&4294967295,D=F+(R<<15&4294967295|R>>>17),R=C+(F^(D|~S))+b[9]+3951481745&4294967295,k.g[0]=k.g[0]+S&4294967295,k.g[1]=k.g[1]+(D+(R<<21&4294967295|R>>>11))&4294967295,k.g[2]=k.g[2]+D&4294967295,k.g[3]=k.g[3]+F&4294967295}s.prototype.v=function(k,S){S===void 0&&(S=k.length);const C=S-this.blockSize,b=this.C;let D=this.h,F=0;for(;F<S;){if(D==0)for(;F<=C;)o(this,k,F),F+=this.blockSize;if(typeof k=="string"){for(;F<S;)if(b[D++]=k.charCodeAt(F++),D==this.blockSize){o(this,b),D=0;break}}else for(;F<S;)if(b[D++]=k[F++],D==this.blockSize){o(this,b),D=0;break}}this.h=D,this.o+=S},s.prototype.A=function(){var k=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);k[0]=128;for(var S=1;S<k.length-8;++S)k[S]=0;S=this.o*8;for(var C=k.length-8;C<k.length;++C)k[C]=S&255,S/=256;for(this.v(k),k=Array(16),S=0,C=0;C<4;++C)for(let b=0;b<32;b+=8)k[S++]=this.g[C]>>>b&255;return k};function l(k,S){var C=d;return Object.prototype.hasOwnProperty.call(C,k)?C[k]:C[k]=S(k)}function c(k,S){this.h=S;const C=[];let b=!0;for(let D=k.length-1;D>=0;D--){const F=k[D]|0;b&&F==S||(C[D]=F,b=!1)}this.g=C}var d={};function f(k){return-128<=k&&k<128?l(k,function(S){return new c([S|0],S<0?-1:0)}):new c([k|0],k<0?-1:0)}function m(k){if(isNaN(k)||!isFinite(k))return x;if(k<0)return L(m(-k));const S=[];let C=1;for(let b=0;k>=C;b++)S[b]=k/C|0,C*=4294967296;return new c(S,0)}function _(k,S){if(k.length==0)throw Error("number format error: empty string");if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(k.charAt(0)=="-")return L(_(k.substring(1),S));if(k.indexOf("-")>=0)throw Error('number format error: interior "-" character');const C=m(Math.pow(S,8));let b=x;for(let F=0;F<k.length;F+=8){var D=Math.min(8,k.length-F);const R=parseInt(k.substring(F,F+D),S);D<8?(D=m(Math.pow(S,D)),b=b.j(D).add(m(R))):(b=b.j(C),b=b.add(m(R)))}return b}var x=f(0),T=f(1),P=f(16777216);n=c.prototype,n.m=function(){if(j(this))return-L(this).m();let k=0,S=1;for(let C=0;C<this.g.length;C++){const b=this.i(C);k+=(b>=0?b:4294967296+b)*S,S*=4294967296}return k},n.toString=function(k){if(k=k||10,k<2||36<k)throw Error("radix out of range: "+k);if(N(this))return"0";if(j(this))return"-"+L(this).toString(k);const S=m(Math.pow(k,6));var C=this;let b="";for(;;){const D=ne(C,S).g;C=W(C,D.j(S));let F=((C.g.length>0?C.g[0]:C.h)>>>0).toString(k);if(C=D,N(C))return F+b;for(;F.length<6;)F="0"+F;b=F+b}},n.i=function(k){return k<0?0:k<this.g.length?this.g[k]:this.h};function N(k){if(k.h!=0)return!1;for(let S=0;S<k.g.length;S++)if(k.g[S]!=0)return!1;return!0}function j(k){return k.h==-1}n.l=function(k){return k=W(this,k),j(k)?-1:N(k)?0:1};function L(k){const S=k.g.length,C=[];for(let b=0;b<S;b++)C[b]=~k.g[b];return new c(C,~k.h).add(T)}n.abs=function(){return j(this)?L(this):this},n.add=function(k){const S=Math.max(this.g.length,k.g.length),C=[];let b=0;for(let D=0;D<=S;D++){let F=b+(this.i(D)&65535)+(k.i(D)&65535),R=(F>>>16)+(this.i(D)>>>16)+(k.i(D)>>>16);b=R>>>16,F&=65535,R&=65535,C[D]=R<<16|F}return new c(C,C[C.length-1]&-2147483648?-1:0)};function W(k,S){return k.add(L(S))}n.j=function(k){if(N(this)||N(k))return x;if(j(this))return j(k)?L(this).j(L(k)):L(L(this).j(k));if(j(k))return L(this.j(L(k)));if(this.l(P)<0&&k.l(P)<0)return m(this.m()*k.m());const S=this.g.length+k.g.length,C=[];for(var b=0;b<2*S;b++)C[b]=0;for(b=0;b<this.g.length;b++)for(let D=0;D<k.g.length;D++){const F=this.i(b)>>>16,R=this.i(b)&65535,Oe=k.i(D)>>>16,_t=k.i(D)&65535;C[2*b+2*D]+=R*_t,G(C,2*b+2*D),C[2*b+2*D+1]+=F*_t,G(C,2*b+2*D+1),C[2*b+2*D+1]+=R*Oe,G(C,2*b+2*D+1),C[2*b+2*D+2]+=F*Oe,G(C,2*b+2*D+2)}for(k=0;k<S;k++)C[k]=C[2*k+1]<<16|C[2*k];for(k=S;k<2*S;k++)C[k]=0;return new c(C,0)};function G(k,S){for(;(k[S]&65535)!=k[S];)k[S+1]+=k[S]>>>16,k[S]&=65535,S++}function Z(k,S){this.g=k,this.h=S}function ne(k,S){if(N(S))throw Error("division by zero");if(N(k))return new Z(x,x);if(j(k))return S=ne(L(k),S),new Z(L(S.g),L(S.h));if(j(S))return S=ne(k,L(S)),new Z(L(S.g),S.h);if(k.g.length>30){if(j(k)||j(S))throw Error("slowDivide_ only works with positive integers.");for(var C=T,b=S;b.l(k)<=0;)C=ee(C),b=ee(b);var D=se(C,1),F=se(b,1);for(b=se(b,2),C=se(C,2);!N(b);){var R=F.add(b);R.l(k)<=0&&(D=D.add(C),F=R),b=se(b,1),C=se(C,1)}return S=W(k,D.j(S)),new Z(D,S)}for(D=x;k.l(S)>=0;){for(C=Math.max(1,Math.floor(k.m()/S.m())),b=Math.ceil(Math.log(C)/Math.LN2),b=b<=48?1:Math.pow(2,b-48),F=m(C),R=F.j(S);j(R)||R.l(k)>0;)C-=b,F=m(C),R=F.j(S);N(F)&&(F=T),D=D.add(F),k=W(k,R)}return new Z(D,k)}n.B=function(k){return ne(this,k).h},n.and=function(k){const S=Math.max(this.g.length,k.g.length),C=[];for(let b=0;b<S;b++)C[b]=this.i(b)&k.i(b);return new c(C,this.h&k.h)},n.or=function(k){const S=Math.max(this.g.length,k.g.length),C=[];for(let b=0;b<S;b++)C[b]=this.i(b)|k.i(b);return new c(C,this.h|k.h)},n.xor=function(k){const S=Math.max(this.g.length,k.g.length),C=[];for(let b=0;b<S;b++)C[b]=this.i(b)^k.i(b);return new c(C,this.h^k.h)};function ee(k){const S=k.g.length+1,C=[];for(let b=0;b<S;b++)C[b]=k.i(b)<<1|k.i(b-1)>>>31;return new c(C,k.h)}function se(k,S){const C=S>>5;S%=32;const b=k.g.length-C,D=[];for(let F=0;F<b;F++)D[F]=S>0?k.i(F+C)>>>S|k.i(F+C+1)<<32-S:k.i(F+C);return new c(D,k.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,nw=s,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=m,c.fromString=_,Bs=c}).apply(typeof Nv<"u"?Nv:typeof self<"u"?self:typeof window<"u"?window:{});var Ec=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var rw,cl,sw,Lc,Kf,iw,ow,aw;(function(){var n,e=Object.defineProperty;function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ec=="object"&&Ec];for(var v=0;v<u.length;++v){var w=u[v];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var s=t(this);function o(u,v){if(v)e:{var w=s;u=u.split(".");for(var I=0;I<u.length-1;I++){var B=u[I];if(!(B in w))break e;w=w[B]}u=u[u.length-1],I=w[u],v=v(I),v!=I&&v!=null&&e(w,u,{configurable:!0,writable:!0,value:v})}}o("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(u){return u||function(v){var w=[],I;for(I in v)Object.prototype.hasOwnProperty.call(v,I)&&w.push([I,v[I]]);return w}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},c=this||self;function d(u){var v=typeof u;return v=="object"&&u!=null||v=="function"}function f(u,v,w){return u.call.apply(u.bind,arguments)}function m(u,v,w){return m=f,m.apply(null,arguments)}function _(u,v){var w=Array.prototype.slice.call(arguments,1);return function(){var I=w.slice();return I.push.apply(I,arguments),u.apply(this,I)}}function x(u,v){function w(){}w.prototype=v.prototype,u.Z=v.prototype,u.prototype=new w,u.prototype.constructor=u,u.Ob=function(I,B,H){for(var ie=Array(arguments.length-2),Te=2;Te<arguments.length;Te++)ie[Te-2]=arguments[Te];return v.prototype[B].apply(I,ie)}}var T=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function P(u){const v=u.length;if(v>0){const w=Array(v);for(let I=0;I<v;I++)w[I]=u[I];return w}return[]}function N(u,v){for(let I=1;I<arguments.length;I++){const B=arguments[I];var w=typeof B;if(w=w!="object"?w:B?Array.isArray(B)?"array":w:"null",w=="array"||w=="object"&&typeof B.length=="number"){w=u.length||0;const H=B.length||0;u.length=w+H;for(let ie=0;ie<H;ie++)u[w+ie]=B[ie]}else u.push(B)}}class j{constructor(v,w){this.i=v,this.j=w,this.h=0,this.g=null}get(){let v;return this.h>0?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function L(u){c.setTimeout(()=>{throw u},0)}function W(){var u=k;let v=null;return u.g&&(v=u.g,u.g=u.g.next,u.g||(u.h=null),v.next=null),v}class G{constructor(){this.h=this.g=null}add(v,w){const I=Z.get();I.set(v,w),this.h?this.h.next=I:this.g=I,this.h=I}}var Z=new j(()=>new ne,u=>u.reset());class ne{constructor(){this.next=this.g=this.h=null}set(v,w){this.h=v,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let ee,se=!1,k=new G,S=()=>{const u=Promise.resolve(void 0);ee=()=>{u.then(C)}};function C(){for(var u;u=W();){try{u.h.call(u.g)}catch(w){L(w)}var v=Z;v.j(u),v.h<100&&(v.h++,u.next=v.g,v.g=u)}se=!1}function b(){this.u=this.u,this.C=this.C}b.prototype.u=!1,b.prototype.dispose=function(){this.u||(this.u=!0,this.N())},b.prototype[Symbol.dispose]=function(){this.dispose()},b.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(u,v){this.type=u,this.g=this.target=v,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var F=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var u=!1,v=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const w=()=>{};c.addEventListener("test",w,v),c.removeEventListener("test",w,v)}catch{}return u})();function R(u){return/^[\s\xa0]*$/.test(u)}function Oe(u,v){D.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,v)}x(Oe,D),Oe.prototype.init=function(u,v){const w=this.type=u.type,I=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=v,v=u.relatedTarget,v||(w=="mouseover"?v=u.fromElement:w=="mouseout"&&(v=u.toElement)),this.relatedTarget=v,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&Oe.Z.h.call(this)},Oe.prototype.h=function(){Oe.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var _t="closure_listenable_"+(Math.random()*1e6|0),wt=0;function Be(u,v,w,I,B){this.listener=u,this.proxy=null,this.src=v,this.type=w,this.capture=!!I,this.ha=B,this.key=++wt,this.da=this.fa=!1}function oe(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function ge(u,v,w){for(const I in u)v.call(w,u[I],I,u)}function ce(u,v){for(const w in u)v.call(void 0,u[w],w,u)}function U(u){const v={};for(const w in u)v[w]=u[w];return v}const Y="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Se(u,v){let w,I;for(let B=1;B<arguments.length;B++){I=arguments[B];for(w in I)u[w]=I[w];for(let H=0;H<Y.length;H++)w=Y[H],Object.prototype.hasOwnProperty.call(I,w)&&(u[w]=I[w])}}function Ce(u){this.src=u,this.g={},this.h=0}Ce.prototype.add=function(u,v,w,I,B){const H=u.toString();u=this.g[H],u||(u=this.g[H]=[],this.h++);const ie=Ae(u,v,I,B);return ie>-1?(v=u[ie],w||(v.fa=!1)):(v=new Be(v,this.src,H,!!I,B),v.fa=w,u.push(v)),v};function Re(u,v){const w=v.type;if(w in u.g){var I=u.g[w],B=Array.prototype.indexOf.call(I,v,void 0),H;(H=B>=0)&&Array.prototype.splice.call(I,B,1),H&&(oe(v),u.g[w].length==0&&(delete u.g[w],u.h--))}}function Ae(u,v,w,I){for(let B=0;B<u.length;++B){const H=u[B];if(!H.da&&H.listener==v&&H.capture==!!w&&H.ha==I)return B}return-1}var Ue="closure_lm_"+(Math.random()*1e6|0),Ve={};function qe(u,v,w,I,B){if(Array.isArray(v)){for(let H=0;H<v.length;H++)qe(u,v[H],w,I,B);return null}return w=ca(w),u&&u[_t]?u.J(v,w,d(I)?!!I.capture:!1,B):Qt(u,v,w,!1,I,B)}function Qt(u,v,w,I,B,H){if(!v)throw Error("Invalid event type");const ie=d(B)?!!B.capture:!!B;let Te=Xi(u);if(Te||(u[Ue]=Te=new Ce(u)),w=Te.add(v,w,I,ie,H),w.proxy)return w;if(I=Qi(),w.proxy=I,I.src=u,I.listener=w,u.addEventListener)F||(B=ie),B===void 0&&(B=!1),u.addEventListener(v.toString(),I,B);else if(u.attachEvent)u.attachEvent(Yi(v.toString()),I);else if(u.addListener&&u.removeListener)u.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return w}function Qi(){function u(w){return v.call(u.src,u.listener,w)}const v=nu;return u}function ua(u,v,w,I,B){if(Array.isArray(v))for(var H=0;H<v.length;H++)ua(u,v[H],w,I,B);else I=d(I)?!!I.capture:!!I,w=ca(w),u&&u[_t]?(u=u.i,H=String(v).toString(),H in u.g&&(v=u.g[H],w=Ae(v,w,I,B),w>-1&&(oe(v[w]),Array.prototype.splice.call(v,w,1),v.length==0&&(delete u.g[H],u.h--)))):u&&(u=Xi(u))&&(v=u.g[v.toString()],u=-1,v&&(u=Ae(v,w,I,B)),(w=u>-1?v[u]:null)&&rs(w))}function rs(u){if(typeof u!="number"&&u&&!u.da){var v=u.src;if(v&&v[_t])Re(v.i,u);else{var w=u.type,I=u.proxy;v.removeEventListener?v.removeEventListener(w,I,u.capture):v.detachEvent?v.detachEvent(Yi(w),I):v.addListener&&v.removeListener&&v.removeListener(I),(w=Xi(v))?(Re(w,u),w.h==0&&(w.src=null,v[Ue]=null)):oe(u)}}}function Yi(u){return u in Ve?Ve[u]:Ve[u]="on"+u}function nu(u,v){if(u.da)u=!0;else{v=new Oe(v,this);const w=u.listener,I=u.ha||u.src;u.fa&&rs(u),u=w.call(I,v)}return u}function Xi(u){return u=u[Ue],u instanceof Ce?u:null}var si="__closure_events_fn_"+(Math.random()*1e9>>>0);function ca(u){return typeof u=="function"?u:(u[si]||(u[si]=function(v){return u.handleEvent(v)}),u[si])}function ft(){b.call(this),this.i=new Ce(this),this.M=this,this.G=null}x(ft,b),ft.prototype[_t]=!0,ft.prototype.removeEventListener=function(u,v,w,I){ua(this,u,v,w,I)};function at(u,v){var w,I=u.G;if(I)for(w=[];I;I=I.G)w.push(I);if(u=u.M,I=v.type||v,typeof v=="string")v=new D(v,u);else if(v instanceof D)v.target=v.target||u;else{var B=v;v=new D(I,u),Se(v,B)}B=!0;let H,ie;if(w)for(ie=w.length-1;ie>=0;ie--)H=v.g=w[ie],B=On(H,I,!0,v)&&B;if(H=v.g=u,B=On(H,I,!0,v)&&B,B=On(H,I,!1,v)&&B,w)for(ie=0;ie<w.length;ie++)H=v.g=w[ie],B=On(H,I,!1,v)&&B}ft.prototype.N=function(){if(ft.Z.N.call(this),this.i){var u=this.i;for(const v in u.g){const w=u.g[v];for(let I=0;I<w.length;I++)oe(w[I]);delete u.g[v],u.h--}}this.G=null},ft.prototype.J=function(u,v,w,I){return this.i.add(String(u),v,!1,w,I)},ft.prototype.K=function(u,v,w,I){return this.i.add(String(u),v,!0,w,I)};function On(u,v,w,I){if(v=u.i.g[String(v)],!v)return!0;v=v.concat();let B=!0;for(let H=0;H<v.length;++H){const ie=v[H];if(ie&&!ie.da&&ie.capture==w){const Te=ie.listener,lt=ie.ha||ie.src;ie.fa&&Re(u.i,ie),B=Te.call(lt,I)!==!1&&B}}return B&&!I.defaultPrevented}function ha(u,v){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=m(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(v)>2147483647?-1:c.setTimeout(u,v||0)}function da(u){u.g=ha(()=>{u.g=null,u.i&&(u.i=!1,da(u))},u.l);const v=u.h;u.h=null,u.m.apply(null,v)}class ru extends b{constructor(v,w){super(),this.m=v,this.l=w,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:da(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ss(u){b.call(this),this.h=u,this.g={}}x(ss,b);var fa=[];function Ji(u){ge(u.g,function(v,w){this.g.hasOwnProperty(w)&&rs(v)},u),u.g={}}ss.prototype.N=function(){ss.Z.N.call(this),Ji(this)},ss.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var is=c.JSON.stringify,su=c.JSON.parse,ii=class{stringify(u){return c.JSON.stringify(u,void 0)}parse(u){return c.JSON.parse(u,void 0)}};function os(){}function iu(){}var as={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Zi(){D.call(this,"d")}x(Zi,D);function pa(){D.call(this,"c")}x(pa,D);var Ln={},eo=null;function ls(){return eo=eo||new ft}Ln.Ia="serverreachability";function to(u){D.call(this,Ln.Ia,u)}x(to,D);function Rr(u){const v=ls();at(v,new to(v))}Ln.STAT_EVENT="statevent";function Ar(u,v){D.call(this,Ln.STAT_EVENT,u),this.stat=v}x(Ar,D);function it(u){const v=ls();at(v,new Ar(v,u))}Ln.Ja="timingevent";function ma(u,v){D.call(this,Ln.Ja,u),this.size=v}x(ma,D);function us(u,v){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){u()},v)}function cs(){this.g=!0}cs.prototype.ua=function(){this.g=!1};function ou(u,v,w,I,B,H){u.info(function(){if(u.g)if(H){var ie="",Te=H.split("&");for(let ze=0;ze<Te.length;ze++){var lt=Te[ze].split("=");if(lt.length>1){const pt=lt[0];lt=lt[1];const gn=pt.split("_");ie=gn.length>=2&&gn[1]=="type"?ie+(pt+"="+lt+"&"):ie+(pt+"=redacted&")}}}else ie=null;else ie=H;return"XMLHTTP REQ ("+I+") [attempt "+B+"]: "+v+`
`+w+`
`+ie})}function au(u,v,w,I,B,H,ie){u.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+B+"]: "+v+`
`+w+`
`+H+" "+ie})}function Xn(u,v,w,I){u.info(function(){return"XMLHTTP TEXT ("+v+"): "+oi(u,w)+(I?" "+I:"")})}function lu(u,v){u.info(function(){return"TIMEOUT: "+v})}cs.prototype.info=function(){};function oi(u,v){if(!u.g)return v;if(!v)return null;try{const H=JSON.parse(v);if(H){for(u=0;u<H.length;u++)if(Array.isArray(H[u])){var w=H[u];if(!(w.length<2)){var I=w[1];if(Array.isArray(I)&&!(I.length<1)){var B=I[0];if(B!="noop"&&B!="stop"&&B!="close")for(let ie=1;ie<I.length;ie++)I[ie]=""}}}}return is(H)}catch{return v}}var hs={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ds={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},uu;function Pr(){}x(Pr,os),Pr.prototype.g=function(){return new XMLHttpRequest},uu=new Pr;function Jn(u){return encodeURIComponent(String(u))}function no(u){var v=1;u=u.split(":");const w=[];for(;v>0&&u.length;)w.push(u.shift()),v--;return u.length&&w.push(u.join(":")),w}function En(u,v,w,I){this.j=u,this.i=v,this.l=w,this.S=I||1,this.V=new ss(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new cu}function cu(){this.i=null,this.g="",this.h=!1}var hu={},ga={};function Vn(u,v,w){u.M=1,u.A=Nr(xn(v)),u.u=w,u.R=!0,ya(u,null)}function ya(u,v){u.F=Date.now(),ai(u),u.B=xn(u.A);var w=u.B,I=u.S;Array.isArray(I)||(I=[String(I)]),ka(w.i,"t",I),u.C=0,w=u.j.L,u.h=new cu,u.g=Eu(u.j,w?v:null,!u.u),u.P>0&&(u.O=new ru(m(u.Y,u,u.g),u.P)),v=u.V,w=u.g,I=u.ba;var B="readystatechange";Array.isArray(B)||(B&&(fa[0]=B.toString()),B=fa);for(let H=0;H<B.length;H++){const ie=qe(w,B[H],I||v.handleEvent,!1,v.h||v);if(!ie)break;v.g[ie.key]=ie}v=u.J?U(u.J):{},u.u?(u.v||(u.v="POST"),v["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,v)):(u.v="GET",u.g.ea(u.B,u.v,null,v)),Rr(),ou(u.i,u.v,u.B,u.l,u.S,u.u)}En.prototype.ba=function(u){u=u.target;const v=this.O;v&&ir(u)==3?v.j():this.Y(u)},En.prototype.Y=function(u){try{if(u==this.g)e:{const Te=ir(this.g),lt=this.g.ya(),ze=this.g.ca();if(!(Te<3)&&(Te!=3||this.g&&(this.h.h||this.g.la()||_u(this.g)))){this.K||Te!=4||lt==7||(lt==8||ze<=0?Rr(3):Rr(2)),ro(this);var v=this.g.ca();this.X=v;var w=du(this);if(this.o=v==200,au(this.i,this.v,this.B,this.l,this.S,Te,v),this.o){if(this.U&&!this.L){t:{if(this.g){var I,B=this.g;if((I=B.g?B.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!R(I)){var H=I;break t}}H=null}if(u=H)Xn(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ke(this,u);else{this.o=!1,this.m=3,it(12),br(this),li(this);break e}}if(this.R){u=!0;let pt;for(;!this.K&&this.C<w.length;)if(pt=pu(this,w),pt==ga){Te==4&&(this.m=4,it(14),u=!1),Xn(this.i,this.l,null,"[Incomplete Response]");break}else if(pt==hu){this.m=4,it(15),Xn(this.i,this.l,w,"[Invalid Chunk]"),u=!1;break}else Xn(this.i,this.l,pt,null),Ke(this,pt);if(fu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Te!=4||w.length!=0||this.h.h||(this.m=1,it(16),u=!1),this.o=this.o&&u,!u)Xn(this.i,this.l,w,"[Invalid Chunked Response]"),br(this),li(this);else if(w.length>0&&!this.W){this.W=!0;var ie=this.j;ie.g==this&&ie.aa&&!ie.P&&(ie.j.info("Great, no buffering proxy detected. Bytes received: "+w.length),yi(ie),ie.P=!0,it(11))}}else Xn(this.i,this.l,w,null),Ke(this,w);Te==4&&br(this),this.o&&!this.K&&(Te==4?po(this.j,this):(this.o=!1,ai(this)))}else Aa(this.g),v==400&&w.indexOf("Unknown SID")>0?(this.m=3,it(12)):(this.m=0,it(13)),br(this),li(this)}}}catch{}finally{}};function du(u){if(!fu(u))return u.g.la();const v=_u(u.g);if(v==="")return"";let w="";const I=v.length,B=ir(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return br(u),li(u),"";u.h.i=new c.TextDecoder}for(let H=0;H<I;H++)u.h.h=!0,w+=u.h.i.decode(v[H],{stream:!(B&&H==I-1)});return v.length=0,u.h.g+=w,u.C=0,u.h.g}function fu(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function pu(u,v){var w=u.C,I=v.indexOf(`
`,w);return I==-1?ga:(w=Number(v.substring(w,I)),isNaN(w)?hu:(I+=1,I+w>v.length?ga:(v=v.slice(I,I+w),u.C=I+w,v)))}En.prototype.cancel=function(){this.K=!0,br(this)};function ai(u){u.T=Date.now()+u.H,va(u,u.H)}function va(u,v){if(u.D!=null)throw Error("WatchDog timer not null");u.D=us(m(u.aa,u),v)}function ro(u){u.D&&(c.clearTimeout(u.D),u.D=null)}En.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(lu(this.i,this.B),this.M!=2&&(Rr(),it(17)),br(this),this.m=2,li(this)):va(this,this.T-u)};function li(u){u.j.I==0||u.K||po(u.j,u)}function br(u){ro(u);var v=u.O;v&&typeof v.dispose=="function"&&v.dispose(),u.O=null,Ji(u.V),u.g&&(v=u.g,u.g=null,v.abort(),v.dispose())}function Ke(u,v){try{var w=u.j;if(w.I!=0&&(w.g==u||wa(w.h,u))){if(!u.L&&wa(w.h,u)&&w.I==3){try{var I=w.Ba.g.parse(v)}catch{I=null}if(Array.isArray(I)&&I.length==3){var B=I;if(B[0]==0){e:if(!w.v){if(w.g)if(w.g.F+3e3<u.F)fo(w),pn(w);else break e;lr(w),it(18)}}else w.xa=B[1],0<w.xa-w.K&&B[2]<37500&&w.F&&w.A==0&&!w.C&&(w.C=us(m(w.Va,w),6e3));ui(w.h)<=1&&w.ta&&(w.ta=void 0)}else mn(w,11)}else if((u.L||w.g==u)&&fo(w),!R(v))for(B=w.Ba.g.parse(v),v=0;v<B.length;v++){let ze=B[v];const pt=ze[0];if(!(pt<=w.K))if(w.K=pt,ze=ze[1],w.I==2)if(ze[0]=="c"){w.M=ze[1],w.ba=ze[2];const gn=ze[3];gn!=null&&(w.ka=gn,w.j.info("VER="+w.ka));const Mr=ze[4];Mr!=null&&(w.za=Mr,w.j.info("SVER="+w.za));const ur=ze[5];ur!=null&&typeof ur=="number"&&ur>0&&(I=1.5*ur,w.O=I,w.j.info("backChannelRequestTimeoutMs_="+I)),I=w;const cr=u.g;if(cr){const yo=cr.g?cr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(yo){var H=I.h;H.g||yo.indexOf("spdy")==-1&&yo.indexOf("quic")==-1&&yo.indexOf("h2")==-1||(H.j=H.l,H.g=new Set,H.h&&(io(H,H.h),H.h=null))}if(I.G){const Na=cr.g?cr.g.getResponseHeader("X-HTTP-Session-Id"):null;Na&&(I.wa=Na,Fe(I.J,I.G,Na))}}w.I=3,w.l&&w.l.ra(),w.aa&&(w.T=Date.now()-u.F,w.j.info("Handshake RTT: "+w.T+"ms")),I=w;var ie=u;if(I.na=ba(I,I.L?I.ba:null,I.W),ie.L){ci(I.h,ie);var Te=ie,lt=I.O;lt&&(Te.H=lt),Te.D&&(ro(Te),ai(Te)),I.g=ie}else Ft(I);w.i.length>0&&Vr(w)}else ze[0]!="stop"&&ze[0]!="close"||mn(w,7);else w.I==3&&(ze[0]=="stop"||ze[0]=="close"?ze[0]=="stop"?mn(w,7):co(w):ze[0]!="noop"&&w.l&&w.l.qa(ze),w.A=0)}}Rr(4)}catch{}}var Mh=class{constructor(u,v){this.g=u,this.map=v}};function so(u){this.l=u||10,c.PerformanceNavigationTiming?(u=c.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function _a(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function ui(u){return u.h?1:u.g?u.g.size:0}function wa(u,v){return u.h?u.h==v:u.g?u.g.has(v):!1}function io(u,v){u.g?u.g.add(v):u.h=v}function ci(u,v){u.h&&u.h==v?u.h=null:u.g&&u.g.has(v)&&u.g.delete(v)}so.prototype.cancel=function(){if(this.i=hn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function hn(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let v=u.i;for(const w of u.g.values())v=v.concat(w.G);return v}return P(u.i)}var mu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function dn(u,v){if(u){u=u.split("&");for(let w=0;w<u.length;w++){const I=u[w].indexOf("=");let B,H=null;I>=0?(B=u[w].substring(0,I),H=u[w].substring(I+1)):B=u[w],v(B,H?decodeURIComponent(H.replace(/\+/g," ")):"")}}}function Zn(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let v;u instanceof Zn?(this.l=u.l,hi(this,u.j),this.o=u.o,this.g=u.g,er(this,u.u),this.h=u.h,fs(this,Ra(u.i)),this.m=u.m):u&&(v=String(u).match(mu))?(this.l=!1,hi(this,v[1]||"",!0),this.o=di(v[2]||""),this.g=di(v[3]||"",!0),er(this,v[4]),this.h=di(v[5]||"",!0),fs(this,v[6]||"",!0),this.m=di(v[7]||"")):(this.l=!1,this.i=new De(null,this.l))}Zn.prototype.toString=function(){const u=[];var v=this.j;v&&u.push(fi(v,xa,!0),":");var w=this.g;return(w||v=="file")&&(u.push("//"),(v=this.o)&&u.push(fi(v,xa,!0),"@"),u.push(Jn(w).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.u,w!=null&&u.push(":",String(w))),(w=this.h)&&(this.g&&w.charAt(0)!="/"&&u.push("/"),u.push(fi(w,w.charAt(0)=="/"?pi:Ta,!0))),(w=this.i.toString())&&u.push("?",w),(w=this.m)&&u.push("#",fi(w,Ia)),u.join("")},Zn.prototype.resolve=function(u){const v=xn(this);let w=!!u.j;w?hi(v,u.j):w=!!u.o,w?v.o=u.o:w=!!u.g,w?v.g=u.g:w=u.u!=null;var I=u.h;if(w)er(v,u.u);else if(w=!!u.h){if(I.charAt(0)!="/")if(this.g&&!this.h)I="/"+I;else{var B=v.h.lastIndexOf("/");B!=-1&&(I=v.h.slice(0,B+1)+I)}if(B=I,B==".."||B==".")I="";else if(B.indexOf("./")!=-1||B.indexOf("/.")!=-1){I=B.lastIndexOf("/",0)==0,B=B.split("/");const H=[];for(let ie=0;ie<B.length;){const Te=B[ie++];Te=="."?I&&ie==B.length&&H.push(""):Te==".."?((H.length>1||H.length==1&&H[0]!="")&&H.pop(),I&&ie==B.length&&H.push("")):(H.push(Te),I=!0)}I=H.join("/")}else I=B}return w?v.h=I:w=u.i.toString()!=="",w?fs(v,Ra(u.i)):w=!!u.m,w&&(v.m=u.m),v};function xn(u){return new Zn(u)}function hi(u,v,w){u.j=w?di(v,!0):v,u.j&&(u.j=u.j.replace(/:$/,""))}function er(u,v){if(v){if(v=Number(v),isNaN(v)||v<0)throw Error("Bad port number "+v);u.u=v}else u.u=null}function fs(u,v,w){v instanceof De?(u.i=v,ao(u.i,u.l)):(w||(v=fi(v,jh)),u.i=new De(v,u.l))}function Fe(u,v,w){u.i.set(v,w)}function Nr(u){return Fe(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function di(u,v){return u?v?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function fi(u,v,w){return typeof u=="string"?(u=encodeURI(u).replace(v,Ea),w&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Ea(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var xa=/[#\/\?@]/g,Ta=/[#\?:]/g,pi=/[#\?]/g,jh=/[#\?@]/g,Ia=/#/g;function De(u,v){this.h=this.g=null,this.i=u||null,this.j=!!v}function tr(u){u.g||(u.g=new Map,u.h=0,u.i&&dn(u.i,function(v,w){u.add(decodeURIComponent(v.replace(/\+/g," ")),w)}))}n=De.prototype,n.add=function(u,v){tr(this),this.i=null,u=nr(this,u);let w=this.g.get(u);return w||this.g.set(u,w=[]),w.push(v),this.h+=1,this};function Sa(u,v){tr(u),v=nr(u,v),u.g.has(v)&&(u.i=null,u.h-=u.g.get(v).length,u.g.delete(v))}function oo(u,v){return tr(u),v=nr(u,v),u.g.has(v)}n.forEach=function(u,v){tr(this),this.g.forEach(function(w,I){w.forEach(function(B){u.call(v,B,I,this)},this)},this)};function Ca(u,v){tr(u);let w=[];if(typeof v=="string")oo(u,v)&&(w=w.concat(u.g.get(nr(u,v))));else for(u=Array.from(u.g.values()),v=0;v<u.length;v++)w=w.concat(u[v]);return w}n.set=function(u,v){return tr(this),this.i=null,u=nr(this,u),oo(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[v]),this.h+=1,this},n.get=function(u,v){return u?(u=Ca(this,u),u.length>0?String(u[0]):v):v};function ka(u,v,w){Sa(u,v),w.length>0&&(u.i=null,u.g.set(nr(u,v),P(w)),u.h+=w.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],v=Array.from(this.g.keys());for(let I=0;I<v.length;I++){var w=v[I];const B=Jn(w);w=Ca(this,w);for(let H=0;H<w.length;H++){let ie=B;w[H]!==""&&(ie+="="+Jn(w[H])),u.push(ie)}}return this.i=u.join("&")};function Ra(u){const v=new De;return v.i=u.i,u.g&&(v.g=new Map(u.g),v.h=u.h),v}function nr(u,v){return v=String(v),u.j&&(v=v.toLowerCase()),v}function ao(u,v){v&&!u.j&&(tr(u),u.i=null,u.g.forEach(function(w,I){const B=I.toLowerCase();I!=B&&(Sa(this,I),ka(this,B,w))},u)),u.j=v}function rr(u,v){const w=new cs;if(c.Image){const I=new Image;I.onload=_(At,w,"TestLoadImage: loaded",!0,v,I),I.onerror=_(At,w,"TestLoadImage: error",!1,v,I),I.onabort=_(At,w,"TestLoadImage: abort",!1,v,I),I.ontimeout=_(At,w,"TestLoadImage: timeout",!1,v,I),c.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=u}else v(!1)}function sr(u,v){const w=new cs,I=new AbortController,B=setTimeout(()=>{I.abort(),At(w,"TestPingServer: timeout",!1,v)},1e4);fetch(u,{signal:I.signal}).then(H=>{clearTimeout(B),H.ok?At(w,"TestPingServer: ok",!0,v):At(w,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(B),At(w,"TestPingServer: error",!1,v)})}function At(u,v,w,I,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),I(w)}catch{}}function mi(){this.g=new ii}function Dr(u){this.i=u.Sb||null,this.h=u.ab||!1}x(Dr,os),Dr.prototype.g=function(){return new fn(this.i,this.h)};function fn(u,v){ft.call(this),this.H=u,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}x(fn,ft),n=fn.prototype,n.open=function(u,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=v,this.readyState=1,Mn(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const v={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(v.body=u),(this.H||c).fetch(new Request(this.D,v)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ps(this)),this.readyState=0},n.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Mn(this)),this.g&&(this.readyState=3,Mn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;gu(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function gu(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}n.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var v=u.value?u.value:new Uint8Array(0);(v=this.B.decode(v,{stream:!u.done}))&&(this.response=this.responseText+=v)}u.done?ps(this):Mn(this),this.readyState==3&&gu(this)}},n.Oa=function(u){this.g&&(this.response=this.responseText=u,ps(this))},n.Na=function(u){this.g&&(this.response=u,ps(this))},n.ga=function(){this.g&&ps(this)};function ps(u){u.readyState=4,u.l=null,u.j=null,u.B=null,Mn(u)}n.setRequestHeader=function(u,v){this.A.append(u,v)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],v=this.h.entries();for(var w=v.next();!w.done;)w=w.value,u.push(w[0]+": "+w[1]),w=v.next();return u.join(`\r
`)};function Mn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(fn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function yu(u){let v="";return ge(u,function(w,I){v+=I,v+=":",v+=w,v+=`\r
`}),v}function lo(u,v,w){e:{for(I in w){var I=!1;break e}I=!0}I||(w=yu(w),typeof u=="string"?w!=null&&Jn(w):Fe(u,v,w))}function He(u){ft.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}x(He,ft);var vu=/^https?$/i,Fh=["POST","PUT"];n=He.prototype,n.Fa=function(u){this.H=u},n.ea=function(u,v,w,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);v=v?v.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():uu.g(),this.g.onreadystatechange=T(m(this.Ca,this));try{this.B=!0,this.g.open(v,String(u),!0),this.B=!1}catch(H){ms(this,H);return}if(u=w||"",w=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var B in I)w.set(B,I[B]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const H of I.keys())w.set(H,I.get(H));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(w.keys()).find(H=>H.toLowerCase()=="content-type"),B=c.FormData&&u instanceof c.FormData,!(Array.prototype.indexOf.call(Fh,v,void 0)>=0)||I||B||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[H,ie]of w)this.g.setRequestHeader(H,ie);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(H){ms(this,H)}};function ms(u,v){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=v,u.o=5,gs(u),Lr(u)}function gs(u){u.A||(u.A=!0,at(u,"complete"),at(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,at(this,"complete"),at(this,"abort"),Lr(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Lr(this,!0)),He.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Or(this):this.Xa())},n.Xa=function(){Or(this)};function Or(u){if(u.h&&typeof l<"u"){if(u.v&&ir(u)==4)setTimeout(u.Ca.bind(u),0);else if(at(u,"readystatechange"),ir(u)==4){u.h=!1;try{const H=u.ca();e:switch(H){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var w;if(!(w=v)){var I;if(I=H===0){let ie=String(u.D).match(mu)[1]||null;!ie&&c.self&&c.self.location&&(ie=c.self.location.protocol.slice(0,-1)),I=!vu.test(ie?ie.toLowerCase():"")}w=I}if(w)at(u,"complete"),at(u,"success");else{u.o=6;try{var B=ir(u)>2?u.g.statusText:""}catch{B=""}u.l=B+" ["+u.ca()+"]",gs(u)}}finally{Lr(u)}}}}function Lr(u,v){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const w=u.g;u.g=null,v||at(u,"ready");try{w.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function ir(u){return u.g?u.g.readyState:0}n.ca=function(){try{return ir(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(u){if(this.g){var v=this.g.responseText;return u&&v.indexOf(u)==0&&(v=v.substring(u.length)),su(v)}};function _u(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Aa(u){const v={};u=(u.g&&ir(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<u.length;I++){if(R(u[I]))continue;var w=no(u[I]);const B=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const H=v[B]||[];v[B]=H,H.push(w)}ce(v,function(I){return I.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function or(u,v,w){return w&&w.internalChannelParams&&w.internalChannelParams[u]||v}function uo(u){this.za=0,this.i=[],this.j=new cs,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=or("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=or("baseRetryDelayMs",5e3,u),this.Za=or("retryDelaySeedMs",1e4,u),this.Ta=or("forwardChannelMaxRetries",2,u),this.va=or("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new so(u&&u.concurrentRequestLimit),this.Ba=new mi,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=uo.prototype,n.ka=8,n.I=1,n.connect=function(u,v,w,I){it(0),this.W=u,this.H=v||{},w&&I!==void 0&&(this.H.OSID=w,this.H.OAID=I),this.F=this.X,this.J=ba(this,null,this.W),Vr(this)};function co(u){if(ho(u),u.I==3){var v=u.V++,w=xn(u.J);if(Fe(w,"SID",u.M),Fe(w,"RID",v),Fe(w,"TYPE","terminate"),ar(u,w),v=new En(u,u.j,v),v.M=2,v.A=Nr(xn(w)),w=!1,c.navigator&&c.navigator.sendBeacon)try{w=c.navigator.sendBeacon(v.A.toString(),"")}catch{}!w&&c.Image&&(new Image().src=v.A,w=!0),w||(v.g=Eu(v.j,null),v.g.ea(v.A)),v.F=Date.now(),ai(v)}vi(u)}function pn(u){u.g&&(yi(u),u.g.cancel(),u.g=null)}function ho(u){pn(u),u.v&&(c.clearTimeout(u.v),u.v=null),fo(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&c.clearTimeout(u.m),u.m=null)}function Vr(u){if(!_a(u.h)&&!u.m){u.m=!0;var v=u.Ea;ee||S(),se||(ee(),se=!0),k.add(v,u),u.D=0}}function wu(u,v){return ui(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=v.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=us(m(u.Ea,u,v),mo(u,u.D)),u.D++,!0)}n.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const B=new En(this,this.j,u);let H=this.o;if(this.U&&(H?(H=U(H),Se(H,this.U)):H=this.U),this.u!==null||this.R||(B.J=H,H=null),this.S)e:{for(var v=0,w=0;w<this.i.length;w++){t:{var I=this.i[w];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(v+=I,v>4096){v=w;break e}if(v===4096||w===this.i.length-1){v=w+1;break e}}v=1e3}else v=1e3;v=Pa(this,B,v),w=xn(this.J),Fe(w,"RID",u),Fe(w,"CVER",22),this.G&&Fe(w,"X-HTTP-Session-Id",this.G),ar(this,w),H&&(this.R?v="headers="+Jn(yu(H))+"&"+v:this.u&&lo(w,this.u,H)),io(this.h,B),this.Ra&&Fe(w,"TYPE","init"),this.S?(Fe(w,"$req",v),Fe(w,"SID","null"),B.U=!0,Vn(B,w,null)):Vn(B,w,v),this.I=2}}else this.I==3&&(u?gi(this,u):this.i.length==0||_a(this.h)||gi(this))};function gi(u,v){var w;v?w=v.l:w=u.V++;const I=xn(u.J);Fe(I,"SID",u.M),Fe(I,"RID",w),Fe(I,"AID",u.K),ar(u,I),u.u&&u.o&&lo(I,u.u,u.o),w=new En(u,u.j,w,u.D+1),u.u===null&&(w.J=u.o),v&&(u.i=v.G.concat(u.i)),v=Pa(u,w,1e3),w.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),io(u.h,w),Vn(w,I,v)}function ar(u,v){u.H&&ge(u.H,function(w,I){Fe(v,I,w)}),u.l&&ge({},function(w,I){Fe(v,I,w)})}function Pa(u,v,w){w=Math.min(u.i.length,w);const I=u.l?m(u.l.Ka,u.l,u):null;e:{var B=u.i;let Te=-1;for(;;){const lt=["count="+w];Te==-1?w>0?(Te=B[0].g,lt.push("ofs="+Te)):Te=0:lt.push("ofs="+Te);let ze=!0;for(let pt=0;pt<w;pt++){var H=B[pt].g;const gn=B[pt].map;if(H-=Te,H<0)Te=Math.max(0,B[pt].g-100),ze=!1;else try{H="req"+H+"_"||"";try{var ie=gn instanceof Map?gn:Object.entries(gn);for(const[Mr,ur]of ie){let cr=ur;d(ur)&&(cr=is(ur)),lt.push(H+Mr+"="+encodeURIComponent(cr))}}catch(Mr){throw lt.push(H+"type="+encodeURIComponent("_badmap")),Mr}}catch{I&&I(gn)}}if(ze){ie=lt.join("&");break e}}ie=void 0}return u=u.i.splice(0,w),v.G=u,ie}function Ft(u){if(!u.g&&!u.v){u.Y=1;var v=u.Da;ee||S(),se||(ee(),se=!0),k.add(v,u),u.A=0}}function lr(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=us(m(u.Da,u),mo(u,u.A)),u.A++,!0)}n.Da=function(){if(this.v=null,ys(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=us(m(this.Wa,this),u)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,it(10),pn(this),ys(this))};function yi(u){u.B!=null&&(c.clearTimeout(u.B),u.B=null)}function ys(u){u.g=new En(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var v=xn(u.na);Fe(v,"RID","rpc"),Fe(v,"SID",u.M),Fe(v,"AID",u.K),Fe(v,"CI",u.F?"0":"1"),!u.F&&u.ia&&Fe(v,"TO",u.ia),Fe(v,"TYPE","xmlhttp"),ar(u,v),u.u&&u.o&&lo(v,u.u,u.o),u.O&&(u.g.H=u.O);var w=u.g;u=u.ba,w.M=1,w.A=Nr(xn(v)),w.u=null,w.R=!0,ya(w,u)}n.Va=function(){this.C!=null&&(this.C=null,pn(this),lr(this),it(19))};function fo(u){u.C!=null&&(c.clearTimeout(u.C),u.C=null)}function po(u,v){var w=null;if(u.g==v){fo(u),yi(u),u.g=null;var I=2}else if(wa(u.h,v))w=v.G,ci(u.h,v),I=1;else return;if(u.I!=0){if(v.o)if(I==1){w=v.u?v.u.length:0,v=Date.now()-v.F;var B=u.D;I=ls(),at(I,new ma(I,w)),Vr(u)}else Ft(u);else if(B=v.m,B==3||B==0&&v.X>0||!(I==1&&wu(u,v)||I==2&&lr(u)))switch(w&&w.length>0&&(v=u.h,v.i=v.i.concat(w)),B){case 1:mn(u,5);break;case 4:mn(u,10);break;case 3:mn(u,6);break;default:mn(u,2)}}}function mo(u,v){let w=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(w*=2),w*v}function mn(u,v){if(u.j.info("Error code "+v),v==2){var w=m(u.bb,u),I=u.Ua;const B=!I;I=new Zn(I||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||hi(I,"https"),Nr(I),B?rr(I.toString(),w):sr(I.toString(),w)}else it(2);u.I=0,u.l&&u.l.pa(v),vi(u),ho(u)}n.bb=function(u){u?(this.j.info("Successfully pinged google.com"),it(2)):(this.j.info("Failed to ping google.com"),it(1))};function vi(u){if(u.I=0,u.ja=[],u.l){const v=hn(u.h);(v.length!=0||u.i.length!=0)&&(N(u.ja,v),N(u.ja,u.i),u.h.i.length=0,P(u.i),u.i.length=0),u.l.oa()}}function ba(u,v,w){var I=w instanceof Zn?xn(w):new Zn(w);if(I.g!="")v&&(I.g=v+"."+I.g),er(I,I.u);else{var B=c.location;I=B.protocol,v=v?v+"."+B.hostname:B.hostname,B=+B.port;const H=new Zn(null);I&&hi(H,I),v&&(H.g=v),B&&er(H,B),w&&(H.h=w),I=H}return w=u.G,v=u.wa,w&&v&&Fe(I,w,v),Fe(I,"VER",u.ka),ar(u,I),I}function Eu(u,v,w){if(v&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return v=u.Aa&&!u.ma?new He(new Dr({ab:w})):new He(u.ma),v.Fa(u.L),v}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function xu(){}n=xu.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function go(){}go.prototype.g=function(u,v){return new Pt(u,v)};function Pt(u,v){ft.call(this),this.g=new uo(v),this.l=u,this.h=v&&v.messageUrlParams||null,u=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(u?u["X-WebChannel-Content-Type"]=v.messageContentType:u={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.sa&&(u?u["X-WebChannel-Client-Profile"]=v.sa:u={"X-WebChannel-Client-Profile":v.sa}),this.g.U=u,(u=v&&v.Qb)&&!R(u)&&(this.g.u=u),this.A=v&&v.supportsCrossDomainXhr||!1,this.v=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!R(v)&&(this.g.G=v,u=this.h,u!==null&&v in u&&(u=this.h,v in u&&delete u[v])),this.j=new vs(this)}x(Pt,ft),Pt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Pt.prototype.close=function(){co(this.g)},Pt.prototype.o=function(u){var v=this.g;if(typeof u=="string"){var w={};w.__data__=u,u=w}else this.v&&(w={},w.__data__=is(u),u=w);v.i.push(new Mh(v.Ya++,u)),v.I==3&&Vr(v)},Pt.prototype.N=function(){this.g.l=null,delete this.j,co(this.g),delete this.g,Pt.Z.N.call(this)};function Tu(u){Zi.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var v=u.__sm__;if(v){e:{for(const w in v){u=w;break e}u=void 0}(this.i=u)&&(u=this.i,v=v!==null&&u in v?v[u]:void 0),this.data=v}else this.data=u}x(Tu,Zi);function Iu(){pa.call(this),this.status=1}x(Iu,pa);function vs(u){this.g=u}x(vs,xu),vs.prototype.ra=function(){at(this.g,"a")},vs.prototype.qa=function(u){at(this.g,new Tu(u))},vs.prototype.pa=function(u){at(this.g,new Iu)},vs.prototype.oa=function(){at(this.g,"b")},go.prototype.createWebChannel=go.prototype.g,Pt.prototype.send=Pt.prototype.o,Pt.prototype.open=Pt.prototype.m,Pt.prototype.close=Pt.prototype.close,aw=function(){return new go},ow=function(){return ls()},iw=Ln,Kf={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},hs.NO_ERROR=0,hs.TIMEOUT=8,hs.HTTP_ERROR=6,Lc=hs,ds.COMPLETE="complete",sw=ds,iu.EventType=as,as.OPEN="a",as.CLOSE="b",as.ERROR="c",as.MESSAGE="d",ft.prototype.listen=ft.prototype.J,cl=iu,He.prototype.listenOnce=He.prototype.K,He.prototype.getLastError=He.prototype.Ha,He.prototype.getLastErrorCode=He.prototype.ya,He.prototype.getStatus=He.prototype.ca,He.prototype.getResponseJson=He.prototype.La,He.prototype.getResponseText=He.prototype.la,He.prototype.send=He.prototype.ea,He.prototype.setWithCredentials=He.prototype.Fa,rw=He}).apply(typeof Ec<"u"?Ec:typeof self<"u"?self:typeof window<"u"?window:{});const Dv="@firebase/firestore",Ov="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Wt.UNAUTHENTICATED=new Wt(null),Wt.GOOGLE_CREDENTIALS=new Wt("google-credentials-uid"),Wt.FIRST_PARTY=new Wt("first-party-uid"),Wt.MOCK_USER=new Wt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sa="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bi=new Cp("@firebase/firestore");function Fo(){return Bi.logLevel}function ue(n,...e){if(Bi.logLevel<=Pe.DEBUG){const t=e.map(Fp);Bi.debug(`Firestore (${sa}): ${n}`,...t)}}function ts(n,...e){if(Bi.logLevel<=Pe.ERROR){const t=e.map(Fp);Bi.error(`Firestore (${sa}): ${n}`,...t)}}function Ko(n,...e){if(Bi.logLevel<=Pe.WARN){const t=e.map(Fp);Bi.warn(`Firestore (${sa}): ${n}`,...t)}}function Fp(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function we(n,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,lw(n,s,t)}function lw(n,e,t){let s=`FIRESTORE (${sa}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw ts(s),new Error(s)}function $e(n,e,t,s){let o="Unexpected state";typeof t=="string"?o=t:s=t,n||lw(e,o,s)}function Ie(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ae extends Cr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uw{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class fR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Wt.UNAUTHENTICATED)))}shutdown(){}}class pR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class mR{constructor(e){this.t=e,this.currentUser=Wt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){$e(this.o===void 0,42304);let s=this.i;const o=f=>this.i!==s?(s=this.i,t(f)):Promise.resolve();let l=new Xr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Xr,e.enqueueRetryable((()=>o(this.currentUser)))};const c=()=>{const f=l;e.enqueueRetryable((async()=>{await f.promise,await o(this.currentUser)}))},d=f=>{ue("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((f=>d(f))),setTimeout((()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?d(f):(ue("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Xr)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(ue("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?($e(typeof s.accessToken=="string",31837,{l:s}),new uw(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return $e(e===null||typeof e=="string",2055,{h:e}),new Wt(e)}}class gR{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=Wt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class yR{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new gR(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Wt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Lv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class vR{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,un(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){$e(this.o===void 0,3512);const s=l=>{l.error!=null&&ue("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,ue("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>s(l)))};const o=l=>{ue("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>o(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):ue("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Lv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?($e(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Lv(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _R(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<n;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Up{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=_R(40);for(let l=0;l<o.length;++l)s.length<20&&o[l]<t&&(s+=e.charAt(o[l]%62))}return s}}function be(n,e){return n<e?-1:n>e?1:0}function Qf(n,e){const t=Math.min(n.length,e.length);for(let s=0;s<t;s++){const o=n.charAt(s),l=e.charAt(s);if(o!==l)return Ef(o)===Ef(l)?be(o,l):Ef(o)?1:-1}return be(n.length,e.length)}const wR=55296,ER=57343;function Ef(n){const e=n.charCodeAt(0);return e>=wR&&e<=ER}function Qo(n,e,t){return n.length===e.length&&n.every(((s,o)=>t(s,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vv="__name__";class gr{constructor(e,t,s){t===void 0?t=0:t>e.length&&we(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&we(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return gr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof gr?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let o=0;o<s;o++){const l=gr.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return be(e.length,t.length)}static compareSegments(e,t){const s=gr.isNumericId(e),o=gr.isNumericId(t);return s&&!o?-1:!s&&o?1:s&&o?gr.extractNumericId(e).compare(gr.extractNumericId(t)):Qf(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Bs.fromString(e.substring(4,e.length-2))}}class Ge extends gr{construct(e,t,s){return new Ge(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new ae(K.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((o=>o.length>0)))}return new Ge(t)}static emptyPath(){return new Ge([])}}const xR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Vt extends gr{construct(e,t,s){return new Vt(e,t,s)}static isValidIdentifier(e){return xR.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Vt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Vv}static keyField(){return new Vt([Vv])}static fromServerFormat(e){const t=[];let s="",o=0;const l=()=>{if(s.length===0)throw new ae(K.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let c=!1;for(;o<e.length;){const d=e[o];if(d==="\\"){if(o+1===e.length)throw new ae(K.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[o+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new ae(K.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=f,o+=2}else d==="`"?(c=!c,o++):d!=="."||c?(s+=d,o++):(l(),o++)}if(l(),c)throw new ae(K.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Vt(t)}static emptyPath(){return new Vt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class me{constructor(e){this.path=e}static fromPath(e){return new me(Ge.fromString(e))}static fromName(e){return new me(Ge.fromString(e).popFirst(5))}static empty(){return new me(Ge.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ge.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ge.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new me(new Ge(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cw(n,e,t){if(!t)throw new ae(K.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function TR(n,e,t,s){if(e===!0&&s===!0)throw new ae(K.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Mv(n){if(!me.isDocumentKey(n))throw new ae(K.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function jv(n){if(me.isDocumentKey(n))throw new ae(K.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function hw(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function vh(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":we(12329,{type:typeof n})}function Nn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ae(K.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=vh(n);throw new ae(K.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function IR(n,e){if(e<=0)throw new ae(K.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vt(n,e){const t={typeString:n};return e&&(t.value=e),t}function Gl(n,e){if(!hw(n))throw new ae(K.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const o=e[s].typeString,l="value"in e[s]?{value:e[s].value}:void 0;if(!(s in n)){t=`JSON missing required field: '${s}'`;break}const c=n[s];if(o&&typeof c!==o){t=`JSON field '${s}' must be a ${o}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${s}' field to equal '${l.value}'`;break}}if(t)throw new ae(K.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fv=-62135596800,Uv=1e6;class Xe{static now(){return Xe.fromMillis(Date.now())}static fromDate(e){return Xe.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*Uv);return new Xe(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ae(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ae(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Fv)throw new ae(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ae(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Uv}_compareTo(e){return this.seconds===e.seconds?be(this.nanoseconds,e.nanoseconds):be(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Xe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Gl(e,Xe._jsonSchema))return new Xe(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Fv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Xe._jsonSchemaVersion="firestore/timestamp/1.0",Xe._jsonSchema={type:vt("string",Xe._jsonSchemaVersion),seconds:vt("number"),nanoseconds:vt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{static fromTimestamp(e){return new xe(e)}static min(){return new xe(new Xe(0,0))}static max(){return new xe(new Xe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rl=-1;function SR(n,e){const t=n.toTimestamp().seconds,s=n.toTimestamp().nanoseconds+1,o=xe.fromTimestamp(s===1e9?new Xe(t+1,0):new Xe(t,s));return new Hs(o,me.empty(),e)}function CR(n){return new Hs(n.readTime,n.key,Rl)}class Hs{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new Hs(xe.min(),me.empty(),Rl)}static max(){return new Hs(xe.max(),me.empty(),Rl)}}function kR(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=me.comparator(n.documentKey,e.documentKey),t!==0?t:be(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class AR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ia(n){if(n.code!==K.FAILED_PRECONDITION||n.message!==RR)throw n;ue("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&we(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Q(((s,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(s,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Q?t:Q.resolve(t)}catch(t){return Q.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Q.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Q.reject(t)}static resolve(e){return new Q(((t,s)=>{t(e)}))}static reject(e){return new Q(((t,s)=>{s(e)}))}static waitFor(e){return new Q(((t,s)=>{let o=0,l=0,c=!1;e.forEach((d=>{++o,d.next((()=>{++l,c&&l===o&&t()}),(f=>s(f)))})),c=!0,l===o&&t()}))}static or(e){let t=Q.resolve(!1);for(const s of e)t=t.next((o=>o?Q.resolve(o):s()));return t}static forEach(e,t){const s=[];return e.forEach(((o,l)=>{s.push(t.call(this,o,l))})),this.waitFor(s)}static mapArray(e,t){return new Q(((s,o)=>{const l=e.length,c=new Array(l);let d=0;for(let f=0;f<l;f++){const m=f;t(e[m]).next((_=>{c[m]=_,++d,d===l&&s(c)}),(_=>o(_)))}}))}static doWhile(e,t){return new Q(((s,o)=>{const l=()=>{e()===!0?t().next((()=>{l()}),o):s()};l()}))}}function PR(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function oa(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}_h.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $p=-1;function wh(n){return n==null}function Xc(n){return n===0&&1/n==-1/0}function bR(n){return typeof n=="number"&&Number.isInteger(n)&&!Xc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dw="";function NR(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=$v(e)),e=DR(n.get(t),e);return $v(e)}function DR(n,e){let t=e;const s=n.length;for(let o=0;o<s;o++){const l=n.charAt(o);switch(l){case"\0":t+="";break;case dw:t+="";break;default:t+=l}}return t}function $v(n){return n+dw+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bv(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ei(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function fw(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(e,t){this.comparator=e,this.root=t||Ot.EMPTY}insert(e,t){return new st(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ot.BLACK,null,null))}remove(e){return new st(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ot.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return t+s.left.size;o<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new xc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new xc(this.root,e,this.comparator,!1)}getReverseIterator(){return new xc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new xc(this.root,e,this.comparator,!0)}}class xc{constructor(e,t,s,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?s(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ot{constructor(e,t,s,o,l){this.key=e,this.value=t,this.color=s??Ot.RED,this.left=o??Ot.EMPTY,this.right=l??Ot.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,o,l){return new Ot(e??this.key,t??this.value,s??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let o=this;const l=s(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,s),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Ot.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Ot.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ot.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ot.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw we(43730,{key:this.key,value:this.value});if(this.right.isRed())throw we(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw we(27949);return e+(this.isRed()?0:1)}}Ot.EMPTY=null,Ot.RED=!0,Ot.BLACK=!1;Ot.EMPTY=new class{constructor(){this.size=0}get key(){throw we(57766)}get value(){throw we(16141)}get color(){throw we(16727)}get left(){throw we(29726)}get right(){throw we(36894)}copy(e,t,s,o,l){return this}insert(e,t,s){return new Ot(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e){this.comparator=e,this.data=new st(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new zv(this.data.getIterator())}getIteratorFrom(e){return new zv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof Tt)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Tt(this.comparator);return t.data=e,t}}class zv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e){this.fields=e,e.sort(Vt.comparator)}static empty(){return new wn([])}unionWith(e){let t=new Tt(Vt.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new wn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Qo(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new pw("Invalid base64 string: "+l):l}})(e);return new Mt(t)}static fromUint8Array(e){const t=(function(o){let l="";for(let c=0;c<o.length;++c)l+=String.fromCharCode(o[c]);return l})(e);return new Mt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let o=0;o<t.length;o++)s[o]=t.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return be(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Mt.EMPTY_BYTE_STRING=new Mt("");const OR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ws(n){if($e(!!n,39018),typeof n=="string"){let e=0;const t=OR.exec(n);if($e(!!t,46558,{timestamp:n}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(n);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:ct(n.seconds),nanos:ct(n.nanos)}}function ct(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Gs(n){return typeof n=="string"?Mt.fromBase64String(n):Mt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mw="server_timestamp",gw="__type__",yw="__previous_value__",vw="__local_write_time__";function Bp(n){return(n?.mapValue?.fields||{})[gw]?.stringValue===mw}function Eh(n){const e=n.mapValue.fields[yw];return Bp(e)?Eh(e):e}function Al(n){const e=Ws(n.mapValue.fields[vw].timestampValue);return new Xe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LR{constructor(e,t,s,o,l,c,d,f,m,_){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=o,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=f,this.useFetchStreams=m,this.isUsingEmulator=_}}const Jc="(default)";class Pl{constructor(e,t){this.projectId=e,this.database=t||Jc}static empty(){return new Pl("","")}get isDefaultDatabase(){return this.database===Jc}isEqual(e){return e instanceof Pl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _w="__type__",VR="__max__",Tc={mapValue:{}},ww="__vector__",Zc="value";function Ks(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Bp(n)?4:jR(n)?9007199254740991:MR(n)?10:11:we(28295,{value:n})}function Tr(n,e){if(n===e)return!0;const t=Ks(n);if(t!==Ks(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Al(n).isEqual(Al(e));case 3:return(function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const c=Ws(o.timestampValue),d=Ws(l.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(o,l){return Gs(o.bytesValue).isEqual(Gs(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(o,l){return ct(o.geoPointValue.latitude)===ct(l.geoPointValue.latitude)&&ct(o.geoPointValue.longitude)===ct(l.geoPointValue.longitude)})(n,e);case 2:return(function(o,l){if("integerValue"in o&&"integerValue"in l)return ct(o.integerValue)===ct(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const c=ct(o.doubleValue),d=ct(l.doubleValue);return c===d?Xc(c)===Xc(d):isNaN(c)&&isNaN(d)}return!1})(n,e);case 9:return Qo(n.arrayValue.values||[],e.arrayValue.values||[],Tr);case 10:case 11:return(function(o,l){const c=o.mapValue.fields||{},d=l.mapValue.fields||{};if(Bv(c)!==Bv(d))return!1;for(const f in c)if(c.hasOwnProperty(f)&&(d[f]===void 0||!Tr(c[f],d[f])))return!1;return!0})(n,e);default:return we(52216,{left:n})}}function bl(n,e){return(n.values||[]).find((t=>Tr(t,e)))!==void 0}function Yo(n,e){if(n===e)return 0;const t=Ks(n),s=Ks(e);if(t!==s)return be(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return be(n.booleanValue,e.booleanValue);case 2:return(function(l,c){const d=ct(l.integerValue||l.doubleValue),f=ct(c.integerValue||c.doubleValue);return d<f?-1:d>f?1:d===f?0:isNaN(d)?isNaN(f)?0:-1:1})(n,e);case 3:return qv(n.timestampValue,e.timestampValue);case 4:return qv(Al(n),Al(e));case 5:return Qf(n.stringValue,e.stringValue);case 6:return(function(l,c){const d=Gs(l),f=Gs(c);return d.compareTo(f)})(n.bytesValue,e.bytesValue);case 7:return(function(l,c){const d=l.split("/"),f=c.split("/");for(let m=0;m<d.length&&m<f.length;m++){const _=be(d[m],f[m]);if(_!==0)return _}return be(d.length,f.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,c){const d=be(ct(l.latitude),ct(c.latitude));return d!==0?d:be(ct(l.longitude),ct(c.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return Hv(n.arrayValue,e.arrayValue);case 10:return(function(l,c){const d=l.fields||{},f=c.fields||{},m=d[Zc]?.arrayValue,_=f[Zc]?.arrayValue,x=be(m?.values?.length||0,_?.values?.length||0);return x!==0?x:Hv(m,_)})(n.mapValue,e.mapValue);case 11:return(function(l,c){if(l===Tc.mapValue&&c===Tc.mapValue)return 0;if(l===Tc.mapValue)return 1;if(c===Tc.mapValue)return-1;const d=l.fields||{},f=Object.keys(d),m=c.fields||{},_=Object.keys(m);f.sort(),_.sort();for(let x=0;x<f.length&&x<_.length;++x){const T=Qf(f[x],_[x]);if(T!==0)return T;const P=Yo(d[f[x]],m[_[x]]);if(P!==0)return P}return be(f.length,_.length)})(n.mapValue,e.mapValue);default:throw we(23264,{he:t})}}function qv(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return be(n,e);const t=Ws(n),s=Ws(e),o=be(t.seconds,s.seconds);return o!==0?o:be(t.nanos,s.nanos)}function Hv(n,e){const t=n.values||[],s=e.values||[];for(let o=0;o<t.length&&o<s.length;++o){const l=Yo(t[o],s[o]);if(l)return l}return be(t.length,s.length)}function Xo(n){return Yf(n)}function Yf(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const s=Ws(t);return`time(${s.seconds},${s.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Gs(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return me.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let s="[",o=!0;for(const l of t.values||[])o?o=!1:s+=",",s+=Yf(l);return s+"]"})(n.arrayValue):"mapValue"in n?(function(t){const s=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const c of s)l?l=!1:o+=",",o+=`${c}:${Yf(t.fields[c])}`;return o+"}"})(n.mapValue):we(61005,{value:n})}function Vc(n){switch(Ks(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Eh(n);return e?16+Vc(e):16;case 5:return 2*n.stringValue.length;case 6:return Gs(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,l)=>o+Vc(l)),0)})(n.arrayValue);case 10:case 11:return(function(s){let o=0;return ei(s.fields,((l,c)=>{o+=l.length+Vc(c)})),o})(n.mapValue);default:throw we(13486,{value:n})}}function Wv(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Xf(n){return!!n&&"integerValue"in n}function zp(n){return!!n&&"arrayValue"in n}function Gv(n){return!!n&&"nullValue"in n}function Kv(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Mc(n){return!!n&&"mapValue"in n}function MR(n){return(n?.mapValue?.fields||{})[_w]?.stringValue===ww}function vl(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return ei(n.mapValue.fields,((t,s)=>e.mapValue.fields[t]=vl(s))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=vl(n.arrayValue.values[t]);return e}return{...n}}function jR(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===VR}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e){this.value=e}static empty(){return new cn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!Mc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=vl(t)}setAll(e){let t=Vt.emptyPath(),s={},o=[];e.forEach(((c,d)=>{if(!t.isImmediateParentOf(d)){const f=this.getFieldsMap(t);this.applyChanges(f,s,o),s={},o=[],t=d.popLast()}c?s[d.lastSegment()]=vl(c):o.push(d.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,s,o)}delete(e){const t=this.field(e.popLast());Mc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Tr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=t.mapValue.fields[e.get(s)];Mc(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,s){ei(t,((o,l)=>e[o]=l));for(const o of s)delete e[o]}clone(){return new cn(vl(this.value))}}function Ew(n){const e=[];return ei(n.fields,((t,s)=>{const o=new Vt([t]);if(Mc(s)){const l=Ew(s.mapValue).fields;if(l.length===0)e.push(o);else for(const c of l)e.push(o.child(c))}else e.push(o)})),new wn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e,t,s,o,l,c,d){this.key=e,this.documentType=t,this.version=s,this.readTime=o,this.createTime=l,this.data=c,this.documentState=d}static newInvalidDocument(e){return new Gt(e,0,xe.min(),xe.min(),xe.min(),cn.empty(),0)}static newFoundDocument(e,t,s,o){return new Gt(e,1,t,xe.min(),s,o,0)}static newNoDocument(e,t){return new Gt(e,2,t,xe.min(),xe.min(),cn.empty(),0)}static newUnknownDocument(e,t){return new Gt(e,3,t,xe.min(),xe.min(),cn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(xe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=cn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=cn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=xe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Gt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Gt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eh{constructor(e,t){this.position=e,this.inclusive=t}}function Qv(n,e,t){let s=0;for(let o=0;o<n.position.length;o++){const l=e[o],c=n.position[o];if(l.field.isKeyField()?s=me.comparator(me.fromName(c.referenceValue),t.key):s=Yo(c,t.data.field(l.field)),l.dir==="desc"&&(s*=-1),s!==0)break}return s}function Yv(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Tr(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nl{constructor(e,t="asc"){this.field=e,this.dir=t}}function FR(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xw{}class yt extends xw{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new $R(e,t,s):t==="array-contains"?new qR(e,s):t==="in"?new HR(e,s):t==="not-in"?new WR(e,s):t==="array-contains-any"?new GR(e,s):new yt(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new BR(e,s):new zR(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Yo(t,this.value)):t!==null&&Ks(this.value)===Ks(t)&&this.matchesComparison(Yo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return we(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Kn extends xw{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Kn(e,t)}matches(e){return Tw(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Tw(n){return n.op==="and"}function Iw(n){return UR(n)&&Tw(n)}function UR(n){for(const e of n.filters)if(e instanceof Kn)return!1;return!0}function Jf(n){if(n instanceof yt)return n.field.canonicalString()+n.op.toString()+Xo(n.value);if(Iw(n))return n.filters.map((e=>Jf(e))).join(",");{const e=n.filters.map((t=>Jf(t))).join(",");return`${n.op}(${e})`}}function Sw(n,e){return n instanceof yt?(function(s,o){return o instanceof yt&&s.op===o.op&&s.field.isEqual(o.field)&&Tr(s.value,o.value)})(n,e):n instanceof Kn?(function(s,o){return o instanceof Kn&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((l,c,d)=>l&&Sw(c,o.filters[d])),!0):!1})(n,e):void we(19439)}function Cw(n){return n instanceof yt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Xo(t.value)}`})(n):n instanceof Kn?(function(t){return t.op.toString()+" {"+t.getFilters().map(Cw).join(" ,")+"}"})(n):"Filter"}class $R extends yt{constructor(e,t,s){super(e,t,s),this.key=me.fromName(s.referenceValue)}matches(e){const t=me.comparator(e.key,this.key);return this.matchesComparison(t)}}class BR extends yt{constructor(e,t){super(e,"in",t),this.keys=kw("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class zR extends yt{constructor(e,t){super(e,"not-in",t),this.keys=kw("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function kw(n,e){return(e.arrayValue?.values||[]).map((t=>me.fromName(t.referenceValue)))}class qR extends yt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return zp(t)&&bl(t.arrayValue,this.value)}}class HR extends yt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&bl(this.value.arrayValue,t)}}class WR extends yt{constructor(e,t){super(e,"not-in",t)}matches(e){if(bl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!bl(this.value.arrayValue,t)}}class GR extends yt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!zp(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>bl(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KR{constructor(e,t=null,s=[],o=[],l=null,c=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=o,this.limit=l,this.startAt=c,this.endAt=d,this.Te=null}}function Xv(n,e=null,t=[],s=[],o=null,l=null,c=null){return new KR(n,e,t,s,o,l,c)}function qp(n){const e=Ie(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>Jf(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(l){return l.field.canonicalString()+l.dir})(s))).join(","),wh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>Xo(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>Xo(s))).join(",")),e.Te=t}return e.Te}function Hp(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!FR(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Sw(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Yv(n.startAt,e.startAt)&&Yv(n.endAt,e.endAt)}function Zf(n){return me.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{constructor(e,t=null,s=[],o=[],l=null,c="F",d=null,f=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=o,this.limit=l,this.limitType=c,this.startAt=d,this.endAt=f,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function QR(n,e,t,s,o,l,c,d){return new aa(n,e,t,s,o,l,c,d)}function Wp(n){return new aa(n)}function Jv(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Rw(n){return n.collectionGroup!==null}function _l(n){const e=Ie(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new Tt(Vt.comparator);return c.filters.forEach((f=>{f.getFlattenedFilters().forEach((m=>{m.isInequality()&&(d=d.add(m.field))}))})),d})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new Nl(l,s))})),t.has(Vt.keyField().canonicalString())||e.Ie.push(new Nl(Vt.keyField(),s))}return e.Ie}function _r(n){const e=Ie(n);return e.Ee||(e.Ee=YR(e,_l(n))),e.Ee}function YR(n,e){if(n.limitType==="F")return Xv(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((o=>{const l=o.dir==="desc"?"asc":"desc";return new Nl(o.field,l)}));const t=n.endAt?new eh(n.endAt.position,n.endAt.inclusive):null,s=n.startAt?new eh(n.startAt.position,n.startAt.inclusive):null;return Xv(n.path,n.collectionGroup,e,n.filters,n.limit,t,s)}}function ep(n,e){const t=n.filters.concat([e]);return new aa(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function th(n,e,t){return new aa(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function xh(n,e){return Hp(_r(n),_r(e))&&n.limitType===e.limitType}function Aw(n){return`${qp(_r(n))}|lt:${n.limitType}`}function Uo(n){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((o=>Cw(o))).join(", ")}]`),wh(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((o=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(o))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((o=>Xo(o))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((o=>Xo(o))).join(",")),`Target(${s})`})(_r(n))}; limitType=${n.limitType})`}function Th(n,e){return e.isFoundDocument()&&(function(s,o){const l=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(l):me.isDocumentKey(s.path)?s.path.isEqual(l):s.path.isImmediateParentOf(l)})(n,e)&&(function(s,o){for(const l of _l(s))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(s,o){for(const l of s.filters)if(!l.matches(o))return!1;return!0})(n,e)&&(function(s,o){return!(s.startAt&&!(function(c,d,f){const m=Qv(c,d,f);return c.inclusive?m<=0:m<0})(s.startAt,_l(s),o)||s.endAt&&!(function(c,d,f){const m=Qv(c,d,f);return c.inclusive?m>=0:m>0})(s.endAt,_l(s),o))})(n,e)}function XR(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Pw(n){return(e,t)=>{let s=!1;for(const o of _l(n)){const l=JR(o,e,t);if(l!==0)return l;s=s||o.field.isKeyField()}return 0}}function JR(n,e,t){const s=n.field.isKeyField()?me.comparator(e.key,t.key):(function(l,c,d){const f=c.data.field(l),m=d.data.field(l);return f!==null&&m!==null?Yo(f,m):we(42886)})(n.field,e,t);switch(n.dir){case"asc":return s;case"desc":return-1*s;default:return we(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[o,l]of s)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[t]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){ei(this.inner,((t,s)=>{for(const[o,l]of s)e(o,l)}))}isEmpty(){return fw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZR=new st(me.comparator);function ns(){return ZR}const bw=new st(me.comparator);function hl(...n){let e=bw;for(const t of n)e=e.insert(t.key,t);return e}function Nw(n){let e=bw;return n.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function Li(){return wl()}function Dw(){return wl()}function wl(){return new Gi((n=>n.toString()),((n,e)=>n.isEqual(e)))}const eA=new st(me.comparator),tA=new Tt(me.comparator);function Ne(...n){let e=tA;for(const t of n)e=e.add(t);return e}const nA=new Tt(be);function rA(){return nA}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gp(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Xc(e)?"-0":e}}function Ow(n){return{integerValue:""+n}}function sA(n,e){return bR(e)?Ow(e):Gp(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ih{constructor(){this._=void 0}}function iA(n,e,t){return n instanceof Dl?(function(o,l){const c={fields:{[gw]:{stringValue:mw},[vw]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&Bp(l)&&(l=Eh(l)),l&&(c.fields[yw]=l),{mapValue:c}})(t,e):n instanceof Ol?Vw(n,e):n instanceof Ll?Mw(n,e):(function(o,l){const c=Lw(o,l),d=Zv(c)+Zv(o.Ae);return Xf(c)&&Xf(o.Ae)?Ow(d):Gp(o.serializer,d)})(n,e)}function oA(n,e,t){return n instanceof Ol?Vw(n,e):n instanceof Ll?Mw(n,e):t}function Lw(n,e){return n instanceof nh?(function(s){return Xf(s)||(function(l){return!!l&&"doubleValue"in l})(s)})(e)?e:{integerValue:0}:null}class Dl extends Ih{}class Ol extends Ih{constructor(e){super(),this.elements=e}}function Vw(n,e){const t=jw(e);for(const s of n.elements)t.some((o=>Tr(o,s)))||t.push(s);return{arrayValue:{values:t}}}class Ll extends Ih{constructor(e){super(),this.elements=e}}function Mw(n,e){let t=jw(e);for(const s of n.elements)t=t.filter((o=>!Tr(o,s)));return{arrayValue:{values:t}}}class nh extends Ih{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Zv(n){return ct(n.integerValue||n.doubleValue)}function jw(n){return zp(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aA{constructor(e,t){this.field=e,this.transform=t}}function lA(n,e){return n.field.isEqual(e.field)&&(function(s,o){return s instanceof Ol&&o instanceof Ol||s instanceof Ll&&o instanceof Ll?Qo(s.elements,o.elements,Tr):s instanceof nh&&o instanceof nh?Tr(s.Ae,o.Ae):s instanceof Dl&&o instanceof Dl})(n.transform,e.transform)}class uA{constructor(e,t){this.version=e,this.transformResults=t}}class Zt{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Zt}static exists(e){return new Zt(void 0,e)}static updateTime(e){return new Zt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function jc(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Sh{}function Fw(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Ch(n.key,Zt.none()):new Kl(n.key,n.data,Zt.none());{const t=n.data,s=cn.empty();let o=new Tt(Vt.comparator);for(let l of e.fields)if(!o.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?s.delete(l):s.set(l,c),o=o.add(l)}return new ti(n.key,s,new wn(o.toArray()),Zt.none())}}function cA(n,e,t){n instanceof Kl?(function(o,l,c){const d=o.value.clone(),f=t_(o.fieldTransforms,l,c.transformResults);d.setAll(f),l.convertToFoundDocument(c.version,d).setHasCommittedMutations()})(n,e,t):n instanceof ti?(function(o,l,c){if(!jc(o.precondition,l))return void l.convertToUnknownDocument(c.version);const d=t_(o.fieldTransforms,l,c.transformResults),f=l.data;f.setAll(Uw(o)),f.setAll(d),l.convertToFoundDocument(c.version,f).setHasCommittedMutations()})(n,e,t):(function(o,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function El(n,e,t,s){return n instanceof Kl?(function(l,c,d,f){if(!jc(l.precondition,c))return d;const m=l.value.clone(),_=n_(l.fieldTransforms,f,c);return m.setAll(_),c.convertToFoundDocument(c.version,m).setHasLocalMutations(),null})(n,e,t,s):n instanceof ti?(function(l,c,d,f){if(!jc(l.precondition,c))return d;const m=n_(l.fieldTransforms,f,c),_=c.data;return _.setAll(Uw(l)),_.setAll(m),c.convertToFoundDocument(c.version,_).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((x=>x.field)))})(n,e,t,s):(function(l,c,d){return jc(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d})(n,e,t)}function hA(n,e){let t=null;for(const s of n.fieldTransforms){const o=e.data.field(s.field),l=Lw(s.transform,o||null);l!=null&&(t===null&&(t=cn.empty()),t.set(s.field,l))}return t||null}function e_(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&Qo(s,o,((l,c)=>lA(l,c)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Kl extends Sh{constructor(e,t,s,o=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class ti extends Sh{constructor(e,t,s,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function Uw(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=n.data.field(t);e.set(t,s)}})),e}function t_(n,e,t){const s=new Map;$e(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let o=0;o<t.length;o++){const l=n[o],c=l.transform,d=e.data.field(l.field);s.set(l.field,oA(c,d,t[o]))}return s}function n_(n,e,t){const s=new Map;for(const o of n){const l=o.transform,c=t.data.field(o.field);s.set(o.field,iA(l,c,e))}return s}class Ch extends Sh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class dA extends Sh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fA{constructor(e,t,s,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&cA(l,e,s[o])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=El(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=El(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=Dw();return this.mutations.forEach((o=>{const l=e.get(o.key),c=l.overlayedDocument;let d=this.applyToLocalView(c,l.mutatedFields);d=t.has(o.key)?null:d;const f=Fw(c,d);f!==null&&s.set(o.key,f),c.isValidDocument()||c.convertToNoDocument(xe.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ne())}isEqual(e){return this.batchId===e.batchId&&Qo(this.mutations,e.mutations,((t,s)=>e_(t,s)))&&Qo(this.baseMutations,e.baseMutations,((t,s)=>e_(t,s)))}}class Kp{constructor(e,t,s,o){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=o}static from(e,t,s){$e(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let o=(function(){return eA})();const l=e.mutations;for(let c=0;c<l.length;c++)o=o.insert(l[c].key,s[c].version);return new Kp(e,t,s,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pA{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mA{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gt,Le;function gA(n){switch(n){case K.OK:return we(64938);case K.CANCELLED:case K.UNKNOWN:case K.DEADLINE_EXCEEDED:case K.RESOURCE_EXHAUSTED:case K.INTERNAL:case K.UNAVAILABLE:case K.UNAUTHENTICATED:return!1;case K.INVALID_ARGUMENT:case K.NOT_FOUND:case K.ALREADY_EXISTS:case K.PERMISSION_DENIED:case K.FAILED_PRECONDITION:case K.ABORTED:case K.OUT_OF_RANGE:case K.UNIMPLEMENTED:case K.DATA_LOSS:return!0;default:return we(15467,{code:n})}}function $w(n){if(n===void 0)return ts("GRPC error has no .code"),K.UNKNOWN;switch(n){case gt.OK:return K.OK;case gt.CANCELLED:return K.CANCELLED;case gt.UNKNOWN:return K.UNKNOWN;case gt.DEADLINE_EXCEEDED:return K.DEADLINE_EXCEEDED;case gt.RESOURCE_EXHAUSTED:return K.RESOURCE_EXHAUSTED;case gt.INTERNAL:return K.INTERNAL;case gt.UNAVAILABLE:return K.UNAVAILABLE;case gt.UNAUTHENTICATED:return K.UNAUTHENTICATED;case gt.INVALID_ARGUMENT:return K.INVALID_ARGUMENT;case gt.NOT_FOUND:return K.NOT_FOUND;case gt.ALREADY_EXISTS:return K.ALREADY_EXISTS;case gt.PERMISSION_DENIED:return K.PERMISSION_DENIED;case gt.FAILED_PRECONDITION:return K.FAILED_PRECONDITION;case gt.ABORTED:return K.ABORTED;case gt.OUT_OF_RANGE:return K.OUT_OF_RANGE;case gt.UNIMPLEMENTED:return K.UNIMPLEMENTED;case gt.DATA_LOSS:return K.DATA_LOSS;default:return we(39323,{code:n})}}(Le=gt||(gt={}))[Le.OK=0]="OK",Le[Le.CANCELLED=1]="CANCELLED",Le[Le.UNKNOWN=2]="UNKNOWN",Le[Le.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Le[Le.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Le[Le.NOT_FOUND=5]="NOT_FOUND",Le[Le.ALREADY_EXISTS=6]="ALREADY_EXISTS",Le[Le.PERMISSION_DENIED=7]="PERMISSION_DENIED",Le[Le.UNAUTHENTICATED=16]="UNAUTHENTICATED",Le[Le.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Le[Le.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Le[Le.ABORTED=10]="ABORTED",Le[Le.OUT_OF_RANGE=11]="OUT_OF_RANGE",Le[Le.UNIMPLEMENTED=12]="UNIMPLEMENTED",Le[Le.INTERNAL=13]="INTERNAL",Le[Le.UNAVAILABLE=14]="UNAVAILABLE",Le[Le.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yA(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vA=new Bs([4294967295,4294967295],0);function r_(n){const e=yA().encode(n),t=new nw;return t.update(e),new Uint8Array(t.digest())}function s_(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Bs([t,s],0),new Bs([o,l],0)]}class Qp{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new dl(`Invalid padding: ${t}`);if(s<0)throw new dl(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new dl(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new dl(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Bs.fromNumber(this.ge)}ye(e,t,s){let o=e.add(t.multiply(Bs.fromNumber(s)));return o.compare(vA)===1&&(o=new Bs([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=r_(e),[s,o]=s_(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(s,o,l);if(!this.we(c))return!1}return!0}static create(e,t,s){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new Qp(l,o,t);return s.forEach((d=>c.insert(d))),c}insert(e){if(this.ge===0)return;const t=r_(e),[s,o]=s_(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(s,o,l);this.Se(c)}}Se(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class dl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh{constructor(e,t,s,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const o=new Map;return o.set(e,Ql.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new kh(xe.min(),o,new st(be),ns(),Ne())}}class Ql{constructor(e,t,s,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new Ql(s,t,Ne(),Ne(),Ne())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc{constructor(e,t,s,o){this.be=e,this.removedTargetIds=t,this.key=s,this.De=o}}class Bw{constructor(e,t){this.targetId=e,this.Ce=t}}class zw{constructor(e,t,s=Mt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=o}}class i_{constructor(){this.ve=0,this.Fe=o_(),this.Me=Mt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ne(),t=Ne(),s=Ne();return this.Fe.forEach(((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:s=s.add(o);break;default:we(38017,{changeType:l})}})),new Ql(this.Me,this.xe,e,t,s)}qe(){this.Oe=!1,this.Fe=o_()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,$e(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class _A{constructor(e){this.Ge=e,this.ze=new Map,this.je=ns(),this.Je=Ic(),this.He=Ic(),this.Ye=new st(be)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:we(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((s,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,s=e.Ce.count,o=this.ot(t);if(o){const l=o.target;if(Zf(l))if(s===0){const c=new me(l.path);this.et(t,c,Gt.newNoDocument(c,xe.min()))}else $e(s===1,20013,{expectedCount:s});else{const c=this._t(t);if(c!==s){const d=this.ut(e),f=d?this.ct(d,e,c):1;if(f!==0){this.it(t);const m=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,m)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:l=0}=t;let c,d;try{c=Gs(s).toUint8Array()}catch(f){if(f instanceof pw)return Ko("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{d=new Qp(c,o,l)}catch(f){return Ko(f instanceof dl?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return d.ge===0?null:d}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let o=0;return s.forEach((l=>{const c=this.Ge.ht(),d=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.et(t,l,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((l,c)=>{const d=this.ot(c);if(d){if(l.current&&Zf(d.target)){const f=new me(d.target.path);this.It(f).has(c)||this.Et(c,f)||this.et(c,f,Gt.newNoDocument(f,e))}l.Be&&(t.set(c,l.ke()),l.qe())}}));let s=Ne();this.He.forEach(((l,c)=>{let d=!0;c.forEachWhile((f=>{const m=this.ot(f);return!m||m.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(s=s.add(l))})),this.je.forEach(((l,c)=>c.setReadTime(e)));const o=new kh(e,t,this.Ye,this.je,s);return this.je=ns(),this.Je=Ic(),this.He=Ic(),this.Ye=new st(be),o}Xe(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,s),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.Qe(t,1):o.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new i_,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Tt(be),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Tt(be),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ue("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new i_),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Ic(){return new st(me.comparator)}function o_(){return new st(me.comparator)}const wA={asc:"ASCENDING",desc:"DESCENDING"},EA={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},xA={and:"AND",or:"OR"};class TA{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function tp(n,e){return n.useProto3Json||wh(e)?e:{value:e}}function rh(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function qw(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function IA(n,e){return rh(n,e.toTimestamp())}function wr(n){return $e(!!n,49232),xe.fromTimestamp((function(t){const s=Ws(t);return new Xe(s.seconds,s.nanos)})(n))}function Yp(n,e){return np(n,e).canonicalString()}function np(n,e){const t=(function(o){return new Ge(["projects",o.projectId,"databases",o.database])})(n).child("documents");return e===void 0?t:t.child(e)}function Hw(n){const e=Ge.fromString(n);return $e(Yw(e),10190,{key:e.toString()}),e}function rp(n,e){return Yp(n.databaseId,e.path)}function xf(n,e){const t=Hw(e);if(t.get(1)!==n.databaseId.projectId)throw new ae(K.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ae(K.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new me(Gw(t))}function Ww(n,e){return Yp(n.databaseId,e)}function SA(n){const e=Hw(n);return e.length===4?Ge.emptyPath():Gw(e)}function sp(n){return new Ge(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Gw(n){return $e(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function a_(n,e,t){return{name:rp(n,e),fields:t.value.mapValue.fields}}function CA(n,e){let t;if("targetChange"in e){e.targetChange;const s=(function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:we(39313,{state:m})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=(function(m,_){return m.useProto3Json?($e(_===void 0||typeof _=="string",58123),Mt.fromBase64String(_||"")):($e(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),Mt.fromUint8Array(_||new Uint8Array))})(n,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&(function(m){const _=m.code===void 0?K.UNKNOWN:$w(m.code);return new ae(_,m.message||"")})(c);t=new zw(s,o,l,d||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=xf(n,s.document.name),l=wr(s.document.updateTime),c=s.document.createTime?wr(s.document.createTime):xe.min(),d=new cn({mapValue:{fields:s.document.fields}}),f=Gt.newFoundDocument(o,l,c,d),m=s.targetIds||[],_=s.removedTargetIds||[];t=new Fc(m,_,f.key,f)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=xf(n,s.document),l=s.readTime?wr(s.readTime):xe.min(),c=Gt.newNoDocument(o,l),d=s.removedTargetIds||[];t=new Fc([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=xf(n,s.document),l=s.removedTargetIds||[];t=new Fc([],l,o,null)}else{if(!("filter"in e))return we(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:l}=s,c=new mA(o,l),d=s.targetId;t=new Bw(d,c)}}return t}function kA(n,e){let t;if(e instanceof Kl)t={update:a_(n,e.key,e.value)};else if(e instanceof Ch)t={delete:rp(n,e.key)};else if(e instanceof ti)t={update:a_(n,e.key,e.data),updateMask:VA(e.fieldMask)};else{if(!(e instanceof dA))return we(16599,{Vt:e.type});t={verify:rp(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(l,c){const d=c.transform;if(d instanceof Dl)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Ol)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Ll)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof nh)return{fieldPath:c.field.canonicalString(),increment:d.Ae};throw we(20930,{transform:c.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(o,l){return l.updateTime!==void 0?{updateTime:IA(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:we(27497)})(n,e.precondition)),t}function RA(n,e){return n&&n.length>0?($e(e!==void 0,14353),n.map((t=>(function(o,l){let c=o.updateTime?wr(o.updateTime):wr(l);return c.isEqual(xe.min())&&(c=wr(l)),new uA(c,o.transformResults||[])})(t,e)))):[]}function AA(n,e){return{documents:[Ww(n,e.path)]}}function PA(n,e){const t={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=Ww(n,o);const l=(function(m){if(m.length!==0)return Qw(Kn.create(m,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const c=(function(m){if(m.length!==0)return m.map((_=>(function(T){return{field:$o(T.field),direction:DA(T.dir)}})(_)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const d=tp(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(m){return{before:m.inclusive,values:m.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(m){return{before:!m.inclusive,values:m.position}})(e.endAt)),{ft:t,parent:o}}function bA(n){let e=SA(n.parent);const t=n.structuredQuery,s=t.from?t.from.length:0;let o=null;if(s>0){$e(s===1,65062);const _=t.from[0];_.allDescendants?o=_.collectionId:e=e.child(_.collectionId)}let l=[];t.where&&(l=(function(x){const T=Kw(x);return T instanceof Kn&&Iw(T)?T.getFilters():[T]})(t.where));let c=[];t.orderBy&&(c=(function(x){return x.map((T=>(function(N){return new Nl(Bo(N.field),(function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(N.direction))})(T)))})(t.orderBy));let d=null;t.limit&&(d=(function(x){let T;return T=typeof x=="object"?x.value:x,wh(T)?null:T})(t.limit));let f=null;t.startAt&&(f=(function(x){const T=!!x.before,P=x.values||[];return new eh(P,T)})(t.startAt));let m=null;return t.endAt&&(m=(function(x){const T=!x.before,P=x.values||[];return new eh(P,T)})(t.endAt)),QR(e,o,c,l,d,"F",f,m)}function NA(n,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return we(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Kw(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=Bo(t.unaryFilter.field);return yt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=Bo(t.unaryFilter.field);return yt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Bo(t.unaryFilter.field);return yt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Bo(t.unaryFilter.field);return yt.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return we(61313);default:return we(60726)}})(n):n.fieldFilter!==void 0?(function(t){return yt.create(Bo(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return we(58110);default:return we(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Kn.create(t.compositeFilter.filters.map((s=>Kw(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return we(1026)}})(t.compositeFilter.op))})(n):we(30097,{filter:n})}function DA(n){return wA[n]}function OA(n){return EA[n]}function LA(n){return xA[n]}function $o(n){return{fieldPath:n.canonicalString()}}function Bo(n){return Vt.fromServerFormat(n.fieldPath)}function Qw(n){return n instanceof yt?(function(t){if(t.op==="=="){if(Kv(t.value))return{unaryFilter:{field:$o(t.field),op:"IS_NAN"}};if(Gv(t.value))return{unaryFilter:{field:$o(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Kv(t.value))return{unaryFilter:{field:$o(t.field),op:"IS_NOT_NAN"}};if(Gv(t.value))return{unaryFilter:{field:$o(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:$o(t.field),op:OA(t.op),value:t.value}}})(n):n instanceof Kn?(function(t){const s=t.getFilters().map((o=>Qw(o)));return s.length===1?s[0]:{compositeFilter:{op:LA(t.op),filters:s}}})(n):we(54877,{filter:n})}function VA(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function Yw(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js{constructor(e,t,s,o,l=xe.min(),c=xe.min(),d=Mt.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=f}withSequenceNumber(e){return new js(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new js(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new js(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new js(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MA{constructor(e){this.yt=e}}function jA(n){const e=bA({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?th(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FA{constructor(){this.Cn=new UA}addToCollectionParentIndex(e,t){return this.Cn.add(t),Q.resolve()}getCollectionParents(e,t){return Q.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return Q.resolve()}deleteFieldIndex(e,t){return Q.resolve()}deleteAllFieldIndexes(e){return Q.resolve()}createTargetIndexes(e,t){return Q.resolve()}getDocumentsMatchingTarget(e,t){return Q.resolve(null)}getIndexType(e,t){return Q.resolve(0)}getFieldIndexes(e,t){return Q.resolve([])}getNextCollectionGroupToUpdate(e){return Q.resolve(null)}getMinOffset(e,t){return Q.resolve(Hs.min())}getMinOffsetFromCollectionGroup(e,t){return Q.resolve(Hs.min())}updateCollectionGroup(e,t,s){return Q.resolve()}updateIndexEntries(e,t){return Q.resolve()}}class UA{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t]||new Tt(Ge.comparator),l=!o.has(s);return this.index[t]=o.add(s),l}has(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t];return o&&o.has(s)}getEntries(e){return(this.index[e]||new Tt(Ge.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Xw=41943040;class ln{static withCacheSize(e){return new ln(e,ln.DEFAULT_COLLECTION_PERCENTILE,ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ln.DEFAULT_COLLECTION_PERCENTILE=10,ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ln.DEFAULT=new ln(Xw,ln.DEFAULT_COLLECTION_PERCENTILE,ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ln.DISABLED=new ln(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Jo(0)}static cr(){return new Jo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u_="LruGarbageCollector",$A=1048576;function c_([n,e],[t,s]){const o=be(n,t);return o===0?be(e,s):o}class BA{constructor(e){this.Ir=e,this.buffer=new Tt(c_),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();c_(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class zA{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ue(u_,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){oa(t)?ue(u_,"Ignoring IndexedDB error during garbage collection: ",t):await ia(t)}await this.Vr(3e5)}))}}class qA{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return Q.resolve(_h.ce);const s=new BA(t);return this.mr.forEachTarget(e,(o=>s.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>s.Ar(o))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.mr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ue("LruGarbageCollector","Garbage collection skipped; disabled"),Q.resolve(l_)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(ue("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),l_):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let s,o,l,c,d,f,m;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((x=>(x>this.params.maximumSequenceNumbersToCollect?(ue("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${x}`),o=this.params.maximumSequenceNumbersToCollect):o=x,c=Date.now(),this.nthSequenceNumber(e,o)))).next((x=>(s=x,d=Date.now(),this.removeTargets(e,s,t)))).next((x=>(l=x,f=Date.now(),this.removeOrphanedDocuments(e,s)))).next((x=>(m=Date.now(),Fo()<=Pe.DEBUG&&ue("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-_}ms
	Determined least recently used ${o} in `+(d-c)+`ms
	Removed ${l} targets in `+(f-d)+`ms
	Removed ${x} documents in `+(m-f)+`ms
Total Duration: ${m-_}ms`),Q.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:x}))))}}function HA(n,e){return new qA(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WA{constructor(){this.changes=new Gi((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Gt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?Q.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GA{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KA{constructor(e,t,s,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(s=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(s!==null&&El(s.mutation,o,wn.empty(),Xe.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,Ne()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=Ne()){const o=Li();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,s).next((l=>{let c=hl();return l.forEach(((d,f)=>{c=c.insert(d,f.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const s=Li();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,Ne())))}populateOverlays(e,t,s){const o=[];return s.forEach((l=>{t.has(l)||o.push(l)})),this.documentOverlayCache.getOverlays(e,o).next((l=>{l.forEach(((c,d)=>{t.set(c,d)}))}))}computeViews(e,t,s,o){let l=ns();const c=wl(),d=(function(){return wl()})();return t.forEach(((f,m)=>{const _=s.get(m.key);o.has(m.key)&&(_===void 0||_.mutation instanceof ti)?l=l.insert(m.key,m):_!==void 0?(c.set(m.key,_.mutation.getFieldMask()),El(_.mutation,m,_.mutation.getFieldMask(),Xe.now())):c.set(m.key,wn.empty())})),this.recalculateAndSaveOverlays(e,l).next((f=>(f.forEach(((m,_)=>c.set(m,_))),t.forEach(((m,_)=>d.set(m,new GA(_,c.get(m)??null)))),d)))}recalculateAndSaveOverlays(e,t){const s=wl();let o=new st(((c,d)=>c-d)),l=Ne();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const d of c)d.keys().forEach((f=>{const m=t.get(f);if(m===null)return;let _=s.get(f)||wn.empty();_=d.applyToLocalView(m,_),s.set(f,_);const x=(o.get(d.batchId)||Ne()).add(f);o=o.insert(d.batchId,x)}))})).next((()=>{const c=[],d=o.getReverseIterator();for(;d.hasNext();){const f=d.getNext(),m=f.key,_=f.value,x=Dw();_.forEach((T=>{if(!l.has(T)){const P=Fw(t.get(T),s.get(T));P!==null&&x.set(T,P),l=l.add(T)}})),c.push(this.documentOverlayCache.saveOverlays(e,m,x))}return Q.waitFor(c)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,o){return(function(c){return me.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Rw(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,o):this.getDocumentsMatchingCollectionQuery(e,t,s,o)}getNextDocuments(e,t,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,o).next((l=>{const c=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,o-l.size):Q.resolve(Li());let d=Rl,f=l;return c.next((m=>Q.forEach(m,((_,x)=>(d<x.largestBatchId&&(d=x.largestBatchId),l.get(_)?Q.resolve():this.remoteDocumentCache.getEntry(e,_).next((T=>{f=f.insert(_,T)}))))).next((()=>this.populateOverlays(e,m,l))).next((()=>this.computeViews(e,f,m,Ne()))).next((_=>({batchId:d,changes:Nw(_)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new me(t)).next((s=>{let o=hl();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,o){const l=t.collectionGroup;let c=hl();return this.indexManager.getCollectionParents(e,l).next((d=>Q.forEach(d,(f=>{const m=(function(x,T){return new aa(T,null,x.explicitOrderBy.slice(),x.filters.slice(),x.limit,x.limitType,x.startAt,x.endAt)})(t,f.child(l));return this.getDocumentsMatchingCollectionQuery(e,m,s,o).next((_=>{_.forEach(((x,T)=>{c=c.insert(x,T)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,s,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,l,o)))).next((c=>{l.forEach(((f,m)=>{const _=m.getKey();c.get(_)===null&&(c=c.insert(_,Gt.newInvalidDocument(_)))}));let d=hl();return c.forEach(((f,m)=>{const _=l.get(f);_!==void 0&&El(_.mutation,m,wn.empty(),Xe.now()),Th(t,m)&&(d=d.insert(f,m))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QA{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return Q.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:wr(o.createTime)}})(t)),Q.resolve()}getNamedQuery(e,t){return Q.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(o){return{name:o.name,query:jA(o.bundledQuery),readTime:wr(o.readTime)}})(t)),Q.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YA{constructor(){this.overlays=new st(me.comparator),this.qr=new Map}getOverlay(e,t){return Q.resolve(this.overlays.get(t))}getOverlays(e,t){const s=Li();return Q.forEach(t,(o=>this.getOverlay(e,o).next((l=>{l!==null&&s.set(o,l)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((o,l)=>{this.St(e,t,l)})),Q.resolve()}removeOverlaysForBatchId(e,t,s){const o=this.qr.get(s);return o!==void 0&&(o.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(s)),Q.resolve()}getOverlaysForCollection(e,t,s){const o=Li(),l=t.length+1,c=new me(t.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const f=d.getNext().value,m=f.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===l&&f.largestBatchId>s&&o.set(f.getKey(),f)}return Q.resolve(o)}getOverlaysForCollectionGroup(e,t,s,o){let l=new st(((m,_)=>m-_));const c=this.overlays.getIterator();for(;c.hasNext();){const m=c.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>s){let _=l.get(m.largestBatchId);_===null&&(_=Li(),l=l.insert(m.largestBatchId,_)),_.set(m.getKey(),m)}}const d=Li(),f=l.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach(((m,_)=>d.set(m,_))),!(d.size()>=o)););return Q.resolve(d)}St(e,t,s){const o=this.overlays.get(s.key);if(o!==null){const c=this.qr.get(o.largestBatchId).delete(s.key);this.qr.set(o.largestBatchId,c)}this.overlays=this.overlays.insert(s.key,new pA(t,s));let l=this.qr.get(t);l===void 0&&(l=Ne(),this.qr.set(t,l)),this.qr.set(t,l.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XA{constructor(){this.sessionToken=Mt.EMPTY_BYTE_STRING}getSessionToken(e){return Q.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Q.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xp{constructor(){this.Qr=new Tt(Rt.$r),this.Ur=new Tt(Rt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const s=new Rt(e,t);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Gr(new Rt(e,t))}zr(e,t){e.forEach((s=>this.removeReference(s,t)))}jr(e){const t=new me(new Ge([])),s=new Rt(t,e),o=new Rt(t,e+1),l=[];return this.Ur.forEachInRange([s,o],(c=>{this.Gr(c),l.push(c.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new me(new Ge([])),s=new Rt(t,e),o=new Rt(t,e+1);let l=Ne();return this.Ur.forEachInRange([s,o],(c=>{l=l.add(c.key)})),l}containsKey(e){const t=new Rt(e,0),s=this.Qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class Rt{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return me.comparator(e.key,t.key)||be(e.Yr,t.Yr)}static Kr(e,t){return be(e.Yr,t.Yr)||me.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JA{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Tt(Rt.$r)}checkEmpty(e){return Q.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,o){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new fA(l,t,s,o);this.mutationQueue.push(c);for(const d of o)this.Zr=this.Zr.add(new Rt(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return Q.resolve(c)}lookupMutationBatch(e,t){return Q.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,o=this.ei(s),l=o<0?0:o;return Q.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return Q.resolve(this.mutationQueue.length===0?$p:this.tr-1)}getAllMutationBatches(e){return Q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new Rt(t,0),o=new Rt(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([s,o],(c=>{const d=this.Xr(c.Yr);l.push(d)})),Q.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Tt(be);return t.forEach((o=>{const l=new Rt(o,0),c=new Rt(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,c],(d=>{s=s.add(d.Yr)}))})),Q.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,o=s.length+1;let l=s;me.isDocumentKey(l)||(l=l.child(""));const c=new Rt(new me(l),0);let d=new Tt(be);return this.Zr.forEachWhile((f=>{const m=f.key.path;return!!s.isPrefixOf(m)&&(m.length===o&&(d=d.add(f.Yr)),!0)}),c),Q.resolve(this.ti(d))}ti(e){const t=[];return e.forEach((s=>{const o=this.Xr(s);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){$e(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return Q.forEach(t.mutations,(o=>{const l=new Rt(o.key,t.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,t){const s=new Rt(t,0),o=this.Zr.firstAfterOrEqual(s);return Q.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,Q.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZA{constructor(e){this.ri=e,this.docs=(function(){return new st(me.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,o=this.docs.get(s),l=o?o.size:0,c=this.ri(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return Q.resolve(s?s.document.mutableCopy():Gt.newInvalidDocument(t))}getEntries(e,t){let s=ns();return t.forEach((o=>{const l=this.docs.get(o);s=s.insert(o,l?l.document.mutableCopy():Gt.newInvalidDocument(o))})),Q.resolve(s)}getDocumentsMatchingQuery(e,t,s,o){let l=ns();const c=t.path,d=new me(c.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(d);for(;f.hasNext();){const{key:m,value:{document:_}}=f.getNext();if(!c.isPrefixOf(m.path))break;m.path.length>c.length+1||kR(CR(_),s)<=0||(o.has(_.key)||Th(t,_))&&(l=l.insert(_.key,_.mutableCopy()))}return Q.resolve(l)}getAllFromCollectionGroup(e,t,s,o){we(9500)}ii(e,t){return Q.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new eP(this)}getSize(e){return Q.resolve(this.size)}}class eP extends WA{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?t.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(s)})),Q.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tP{constructor(e){this.persistence=e,this.si=new Gi((t=>qp(t)),Hp),this.lastRemoteSnapshotVersion=xe.min(),this.highestTargetId=0,this.oi=0,this._i=new Xp,this.targetCount=0,this.ai=Jo.ur()}forEachTarget(e,t){return this.si.forEach(((s,o)=>t(o))),Q.resolve()}getLastRemoteSnapshotVersion(e){return Q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Q.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Q.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.oi&&(this.oi=t),Q.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Jo(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,Q.resolve()}updateTargetData(e,t){return this.Pr(t),Q.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,Q.resolve()}removeTargets(e,t,s){let o=0;const l=[];return this.si.forEach(((c,d)=>{d.sequenceNumber<=t&&s.get(d.targetId)===null&&(this.si.delete(c),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),o++)})),Q.waitFor(l).next((()=>o))}getTargetCount(e){return Q.resolve(this.targetCount)}getTargetData(e,t){const s=this.si.get(t)||null;return Q.resolve(s)}addMatchingKeys(e,t,s){return this._i.Wr(t,s),Q.resolve()}removeMatchingKeys(e,t,s){this._i.zr(t,s);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach((c=>{l.push(o.markPotentiallyOrphaned(e,c))})),Q.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),Q.resolve()}getMatchingKeysForTargetId(e,t){const s=this._i.Hr(t);return Q.resolve(s)}containsKey(e,t){return Q.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jw{constructor(e,t){this.ui={},this.overlays={},this.ci=new _h(0),this.li=!1,this.li=!0,this.hi=new XA,this.referenceDelegate=e(this),this.Pi=new tP(this),this.indexManager=new FA,this.remoteDocumentCache=(function(o){return new ZA(o)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new MA(t),this.Ii=new QA(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new YA,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ui[e.toKey()];return s||(s=new JA(t,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,s){ue("MemoryPersistence","Starting transaction:",e);const o=new nP(this.ci.next());return this.referenceDelegate.Ei(),s(o).next((l=>this.referenceDelegate.di(o).next((()=>l)))).toPromise().then((l=>(o.raiseOnCommittedEvent(),l)))}Ai(e,t){return Q.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,t))))}}class nP extends AR{constructor(e){super(),this.currentSequenceNumber=e}}class Jp{constructor(e){this.persistence=e,this.Ri=new Xp,this.Vi=null}static mi(e){return new Jp(e)}get fi(){if(this.Vi)return this.Vi;throw we(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.fi.delete(s.toString()),Q.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.fi.add(s.toString()),Q.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),Q.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((o=>this.fi.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((l=>this.fi.add(l.toString())))})).next((()=>s.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Q.forEach(this.fi,(s=>{const o=me.fromPath(s);return this.gi(e,o).next((l=>{l||t.removeEntry(o,xe.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((s=>{s?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return Q.or([()=>Q.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class sh{constructor(e,t){this.persistence=e,this.pi=new Gi((s=>NR(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=HA(this,t)}static mi(e,t){return new sh(e,t)}Ei(){}di(e){return Q.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((o=>s+o))))}wr(e){let t=0;return this.pr(e,(s=>{t++})).next((()=>t))}pr(e,t){return Q.forEach(this.pi,((s,o)=>this.br(e,s,o).next((l=>l?Q.resolve():t(o)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.ii(e,(c=>this.br(e,c,t).next((d=>{d||(s++,l.removeEntry(c,xe.min()))})))).next((()=>l.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),Q.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),Q.resolve()}removeReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),Q.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),Q.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Vc(e.data.value)),t}br(e,t,s){return Q.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.pi.get(t);return Q.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zp{constructor(e,t,s,o){this.targetId=e,this.fromCache=t,this.Es=s,this.ds=o}static As(e,t){let s=Ne(),o=Ne();for(const l of t.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new Zp(e,t.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rP{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sP{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return bI()?8:PR(Kt())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,o){const l={result:null};return this.ys(e,t).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ws(e,t,o,s).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new rP;return this.Ss(e,t,c).next((d=>{if(l.result=d,this.Vs)return this.bs(e,t,c,d.size)}))})).next((()=>l.result))}bs(e,t,s,o){return s.documentReadCount<this.fs?(Fo()<=Pe.DEBUG&&ue("QueryEngine","SDK will not create cache indexes for query:",Uo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Q.resolve()):(Fo()<=Pe.DEBUG&&ue("QueryEngine","Query:",Uo(t),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.gs*o?(Fo()<=Pe.DEBUG&&ue("QueryEngine","The SDK decides to create cache indexes for query:",Uo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,_r(t))):Q.resolve())}ys(e,t){if(Jv(t))return Q.resolve(null);let s=_r(t);return this.indexManager.getIndexType(e,s).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=th(t,null,"F"),s=_r(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((l=>{const c=Ne(...l);return this.ps.getDocuments(e,c).next((d=>this.indexManager.getMinOffset(e,s).next((f=>{const m=this.Ds(t,d);return this.Cs(t,m,c,f.readTime)?this.ys(e,th(t,null,"F")):this.vs(e,m,t,f)}))))})))))}ws(e,t,s,o){return Jv(t)||o.isEqual(xe.min())?Q.resolve(null):this.ps.getDocuments(e,s).next((l=>{const c=this.Ds(t,l);return this.Cs(t,c,s,o)?Q.resolve(null):(Fo()<=Pe.DEBUG&&ue("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Uo(t)),this.vs(e,c,t,SR(o,Rl)).next((d=>d)))}))}Ds(e,t){let s=new Tt(Pw(e));return t.forEach(((o,l)=>{Th(e,l)&&(s=s.add(l))})),s}Cs(e,t,s,o){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}Ss(e,t,s){return Fo()<=Pe.DEBUG&&ue("QueryEngine","Using full collection scan to execute query:",Uo(t)),this.ps.getDocumentsMatchingQuery(e,t,Hs.min(),s)}vs(e,t,s,o){return this.ps.getDocumentsMatchingQuery(e,s,o).next((l=>(t.forEach((c=>{l=l.insert(c.key,c)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const em="LocalStore",iP=3e8;class oP{constructor(e,t,s,o){this.persistence=e,this.Fs=t,this.serializer=o,this.Ms=new st(be),this.xs=new Gi((l=>qp(l)),Hp),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new KA(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function aP(n,e,t,s){return new oP(n,e,t,s)}async function Zw(n,e){const t=Ie(n);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return t.mutationQueue.getAllMutationBatches(s).next((l=>(o=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(s)))).next((l=>{const c=[],d=[];let f=Ne();for(const m of o){c.push(m.batchId);for(const _ of m.mutations)f=f.add(_.key)}for(const m of l){d.push(m.batchId);for(const _ of m.mutations)f=f.add(_.key)}return t.localDocuments.getDocuments(s,f).next((m=>({Ls:m,removedBatchIds:c,addedBatchIds:d})))}))}))}function lP(n,e){const t=Ie(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(d,f,m,_){const x=m.batch,T=x.keys();let P=Q.resolve();return T.forEach((N=>{P=P.next((()=>_.getEntry(f,N))).next((j=>{const L=m.docVersions.get(N);$e(L!==null,48541),j.version.compareTo(L)<0&&(x.applyToRemoteDocument(j,m),j.isValidDocument()&&(j.setReadTime(m.commitVersion),_.addEntry(j)))}))})),P.next((()=>d.mutationQueue.removeMutationBatch(f,x)))})(t,s,e,l).next((()=>l.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(d){let f=Ne();for(let m=0;m<d.mutationResults.length;++m)d.mutationResults[m].transformResults.length>0&&(f=f.add(d.batch.mutations[m].key));return f})(e)))).next((()=>t.localDocuments.getDocuments(s,o)))}))}function eE(n){const e=Ie(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function uP(n,e){const t=Ie(n),s=e.snapshotVersion;let o=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=t.Ns.newChangeBuffer({trackRemovals:!0});o=t.Ms;const d=[];e.targetChanges.forEach(((_,x)=>{const T=o.get(x);if(!T)return;d.push(t.Pi.removeMatchingKeys(l,_.removedDocuments,x).next((()=>t.Pi.addMatchingKeys(l,_.addedDocuments,x))));let P=T.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(x)!==null?P=P.withResumeToken(Mt.EMPTY_BYTE_STRING,xe.min()).withLastLimboFreeSnapshotVersion(xe.min()):_.resumeToken.approximateByteSize()>0&&(P=P.withResumeToken(_.resumeToken,s)),o=o.insert(x,P),(function(j,L,W){return j.resumeToken.approximateByteSize()===0||L.snapshotVersion.toMicroseconds()-j.snapshotVersion.toMicroseconds()>=iP?!0:W.addedDocuments.size+W.modifiedDocuments.size+W.removedDocuments.size>0})(T,P,_)&&d.push(t.Pi.updateTargetData(l,P))}));let f=ns(),m=Ne();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(l,_))})),d.push(cP(l,c,e.documentUpdates).next((_=>{f=_.ks,m=_.qs}))),!s.isEqual(xe.min())){const _=t.Pi.getLastRemoteSnapshotVersion(l).next((x=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,s)));d.push(_)}return Q.waitFor(d).next((()=>c.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,f,m))).next((()=>f))})).then((l=>(t.Ms=o,l)))}function cP(n,e,t){let s=Ne(),o=Ne();return t.forEach((l=>s=s.add(l))),e.getEntries(n,s).next((l=>{let c=ns();return t.forEach(((d,f)=>{const m=l.get(d);f.isFoundDocument()!==m.isFoundDocument()&&(o=o.add(d)),f.isNoDocument()&&f.version.isEqual(xe.min())?(e.removeEntry(d,f.readTime),c=c.insert(d,f)):!m.isValidDocument()||f.version.compareTo(m.version)>0||f.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(f),c=c.insert(d,f)):ue(em,"Ignoring outdated watch update for ",d,". Current version:",m.version," Watch version:",f.version)})),{ks:c,qs:o}}))}function hP(n,e){const t=Ie(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=$p),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function dP(n,e){const t=Ie(n);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return t.Pi.getTargetData(s,e).next((l=>l?(o=l,Q.resolve(o)):t.Pi.allocateTargetId(s).next((c=>(o=new js(e,c,"TargetPurposeListen",s.currentSequenceNumber),t.Pi.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=t.Ms.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(s.targetId,s),t.xs.set(e,s.targetId)),s}))}async function ip(n,e,t){const s=Ie(n),o=s.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",l,(c=>s.persistence.referenceDelegate.removeTarget(c,o)))}catch(c){if(!oa(c))throw c;ue(em,`Failed to update sequence numbers for target ${e}: ${c}`)}s.Ms=s.Ms.remove(e),s.xs.delete(o.target)}function h_(n,e,t){const s=Ie(n);let o=xe.min(),l=Ne();return s.persistence.runTransaction("Execute query","readwrite",(c=>(function(f,m,_){const x=Ie(f),T=x.xs.get(_);return T!==void 0?Q.resolve(x.Ms.get(T)):x.Pi.getTargetData(m,_)})(s,c,_r(e)).next((d=>{if(d)return o=d.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(c,d.targetId).next((f=>{l=f}))})).next((()=>s.Fs.getDocumentsMatchingQuery(c,e,t?o:xe.min(),t?l:Ne()))).next((d=>(fP(s,XR(e),d),{documents:d,Qs:l})))))}function fP(n,e,t){let s=n.Os.get(e)||xe.min();t.forEach(((o,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)})),n.Os.set(e,s)}class d_{constructor(){this.activeTargetIds=rA()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class pP{constructor(){this.Mo=new d_,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,s){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new d_,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mP{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f_="ConnectivityMonitor";class p_{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ue(f_,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ue(f_,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sc=null;function op(){return Sc===null?Sc=(function(){return 268435456+Math.round(2147483648*Math.random())})():Sc++,"0x"+Sc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tf="RestConnection",gP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class yP{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${s}/databases/${o}`,this.Wo=this.databaseId.database===Jc?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Go(e,t,s,o,l){const c=op(),d=this.zo(e,t.toUriEncodedString());ue(Tf,`Sending RPC '${e}' ${c}:`,d,s);const f={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(f,o,l);const{host:m}=new URL(d),_=Hi(m);return this.Jo(e,d,f,s,_).then((x=>(ue(Tf,`Received RPC '${e}' ${c}: `,x),x)),(x=>{throw Ko(Tf,`RPC '${e}' ${c} failed with error: `,x,"url: ",d,"request:",s),x}))}Ho(e,t,s,o,l,c){return this.Go(e,t,s,o,l)}jo(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+sa})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,l)=>e[l]=o)),s&&s.headers.forEach(((o,l)=>e[l]=o))}zo(e,t){const s=gP[e];return`${this.Uo}/v1/${t}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vP{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qt="WebChannelConnection";class _P extends yP{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,s,o,l){const c=op();return new Promise(((d,f)=>{const m=new rw;m.setWithCredentials(!0),m.listenOnce(sw.COMPLETE,(()=>{try{switch(m.getLastErrorCode()){case Lc.NO_ERROR:const x=m.getResponseJson();ue(qt,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(x)),d(x);break;case Lc.TIMEOUT:ue(qt,`RPC '${e}' ${c} timed out`),f(new ae(K.DEADLINE_EXCEEDED,"Request time out"));break;case Lc.HTTP_ERROR:const T=m.getStatus();if(ue(qt,`RPC '${e}' ${c} failed with status:`,T,"response text:",m.getResponseText()),T>0){let P=m.getResponseJson();Array.isArray(P)&&(P=P[0]);const N=P?.error;if(N&&N.status&&N.message){const j=(function(W){const G=W.toLowerCase().replace(/_/g,"-");return Object.values(K).indexOf(G)>=0?G:K.UNKNOWN})(N.status);f(new ae(j,N.message))}else f(new ae(K.UNKNOWN,"Server responded with status "+m.getStatus()))}else f(new ae(K.UNAVAILABLE,"Connection failed."));break;default:we(9055,{l_:e,streamId:c,h_:m.getLastErrorCode(),P_:m.getLastError()})}}finally{ue(qt,`RPC '${e}' ${c} completed.`)}}));const _=JSON.stringify(o);ue(qt,`RPC '${e}' ${c} sending request:`,o),m.send(t,"POST",_,s,15)}))}T_(e,t,s){const o=op(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=aw(),d=ow(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(f.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(f.useFetchStreams=!0),this.jo(f.initMessageHeaders,t,s),f.encodeInitMessageHeaders=!0;const _=l.join("");ue(qt,`Creating RPC '${e}' stream ${o}: ${_}`,f);const x=c.createWebChannel(_,f);this.I_(x);let T=!1,P=!1;const N=new vP({Yo:L=>{P?ue(qt,`Not sending because RPC '${e}' stream ${o} is closed:`,L):(T||(ue(qt,`Opening RPC '${e}' stream ${o} transport.`),x.open(),T=!0),ue(qt,`RPC '${e}' stream ${o} sending:`,L),x.send(L))},Zo:()=>x.close()}),j=(L,W,G)=>{L.listen(W,(Z=>{try{G(Z)}catch(ne){setTimeout((()=>{throw ne}),0)}}))};return j(x,cl.EventType.OPEN,(()=>{P||(ue(qt,`RPC '${e}' stream ${o} transport opened.`),N.o_())})),j(x,cl.EventType.CLOSE,(()=>{P||(P=!0,ue(qt,`RPC '${e}' stream ${o} transport closed`),N.a_(),this.E_(x))})),j(x,cl.EventType.ERROR,(L=>{P||(P=!0,Ko(qt,`RPC '${e}' stream ${o} transport errored. Name:`,L.name,"Message:",L.message),N.a_(new ae(K.UNAVAILABLE,"The operation could not be completed")))})),j(x,cl.EventType.MESSAGE,(L=>{if(!P){const W=L.data[0];$e(!!W,16349);const G=W,Z=G?.error||G[0]?.error;if(Z){ue(qt,`RPC '${e}' stream ${o} received error:`,Z);const ne=Z.status;let ee=(function(S){const C=gt[S];if(C!==void 0)return $w(C)})(ne),se=Z.message;ee===void 0&&(ee=K.INTERNAL,se="Unknown error status: "+ne+" with message "+Z.message),P=!0,N.a_(new ae(ee,se)),x.close()}else ue(qt,`RPC '${e}' stream ${o} received:`,W),N.u_(W)}})),j(d,iw.STAT_EVENT,(L=>{L.stat===Kf.PROXY?ue(qt,`RPC '${e}' stream ${o} detected buffering proxy`):L.stat===Kf.NOPROXY&&ue(qt,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{N.__()}),0),N}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function If(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rh(n){return new TA(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tE{constructor(e,t,s=1e3,o=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=s,this.A_=o,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-s);o>0&&ue("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m_="PersistentStream";class nE{constructor(e,t,s,o,l,c,d,f){this.Mi=e,this.S_=s,this.b_=o,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=f,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new tE(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===K.RESOURCE_EXHAUSTED?(ts(t.toString()),ts("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===K.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.D_===t&&this.G_(s,o)}),(s=>{e((()=>{const o=new ae(K.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)}))}))}G_(e,t){const s=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{s((()=>this.z_(o)))})),this.stream.onMessage((o=>{s((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ue(m_,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(ue(m_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class wP extends nE{constructor(e,t,s,o,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,o,c),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=CA(this.serializer,e),s=(function(l){if(!("targetChange"in l))return xe.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?xe.min():c.readTime?wr(c.readTime):xe.min()})(e);return this.listener.H_(t,s)}Y_(e){const t={};t.database=sp(this.serializer),t.addTarget=(function(l,c){let d;const f=c.target;if(d=Zf(f)?{documents:AA(l,f)}:{query:PA(l,f).ft},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=qw(l,c.resumeToken);const m=tp(l,c.expectedCount);m!==null&&(d.expectedCount=m)}else if(c.snapshotVersion.compareTo(xe.min())>0){d.readTime=rh(l,c.snapshotVersion.toTimestamp());const m=tp(l,c.expectedCount);m!==null&&(d.expectedCount=m)}return d})(this.serializer,e);const s=NA(this.serializer,e);s&&(t.labels=s),this.q_(t)}Z_(e){const t={};t.database=sp(this.serializer),t.removeTarget=e,this.q_(t)}}class EP extends nE{constructor(e,t,s,o,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,o,c),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return $e(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,$e(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){$e(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=RA(e.writeResults,e.commitTime),s=wr(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=sp(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>kA(this.serializer,s)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xP{}class TP extends xP{constructor(e,t,s,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new ae(K.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Go(e,np(t,s),o,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ae(K.UNKNOWN,l.toString())}))}Ho(e,t,s,o,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Ho(e,np(t,s),o,c,d,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ae(K.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class IP{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ts(t),this.aa=!1):ue("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zi="RemoteStore";class SP{constructor(e,t,s,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((c=>{s.enqueueAndForget((async()=>{Ki(this)&&(ue(zi,"Restarting streams for network reachability change."),await(async function(f){const m=Ie(f);m.Ea.add(4),await Yl(m),m.Ra.set("Unknown"),m.Ea.delete(4),await Ah(m)})(this))}))})),this.Ra=new IP(s,o)}}async function Ah(n){if(Ki(n))for(const e of n.da)await e(!0)}async function Yl(n){for(const e of n.da)await e(!1)}function rE(n,e){const t=Ie(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),sm(t)?rm(t):la(t).O_()&&nm(t,e))}function tm(n,e){const t=Ie(n),s=la(t);t.Ia.delete(e),s.O_()&&sE(t,e),t.Ia.size===0&&(s.O_()?s.L_():Ki(t)&&t.Ra.set("Unknown"))}function nm(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(xe.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}la(n).Y_(e)}function sE(n,e){n.Va.Ue(e),la(n).Z_(e)}function rm(n){n.Va=new _A({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),la(n).start(),n.Ra.ua()}function sm(n){return Ki(n)&&!la(n).x_()&&n.Ia.size>0}function Ki(n){return Ie(n).Ea.size===0}function iE(n){n.Va=void 0}async function CP(n){n.Ra.set("Online")}async function kP(n){n.Ia.forEach(((e,t)=>{nm(n,e)}))}async function RP(n,e){iE(n),sm(n)?(n.Ra.ha(e),rm(n)):n.Ra.set("Unknown")}async function AP(n,e,t){if(n.Ra.set("Online"),e instanceof zw&&e.state===2&&e.cause)try{await(async function(o,l){const c=l.cause;for(const d of l.targetIds)o.Ia.has(d)&&(await o.remoteSyncer.rejectListen(d,c),o.Ia.delete(d),o.Va.removeTarget(d))})(n,e)}catch(s){ue(zi,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await ih(n,s)}else if(e instanceof Fc?n.Va.Ze(e):e instanceof Bw?n.Va.st(e):n.Va.tt(e),!t.isEqual(xe.min()))try{const s=await eE(n.localStore);t.compareTo(s)>=0&&await(function(l,c){const d=l.Va.Tt(c);return d.targetChanges.forEach(((f,m)=>{if(f.resumeToken.approximateByteSize()>0){const _=l.Ia.get(m);_&&l.Ia.set(m,_.withResumeToken(f.resumeToken,c))}})),d.targetMismatches.forEach(((f,m)=>{const _=l.Ia.get(f);if(!_)return;l.Ia.set(f,_.withResumeToken(Mt.EMPTY_BYTE_STRING,_.snapshotVersion)),sE(l,f);const x=new js(_.target,f,m,_.sequenceNumber);nm(l,x)})),l.remoteSyncer.applyRemoteEvent(d)})(n,t)}catch(s){ue(zi,"Failed to raise snapshot:",s),await ih(n,s)}}async function ih(n,e,t){if(!oa(e))throw e;n.Ea.add(1),await Yl(n),n.Ra.set("Offline"),t||(t=()=>eE(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{ue(zi,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Ah(n)}))}function oE(n,e){return e().catch((t=>ih(n,t,e)))}async function Ph(n){const e=Ie(n),t=Qs(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:$p;for(;PP(e);)try{const o=await hP(e.localStore,s);if(o===null){e.Ta.length===0&&t.L_();break}s=o.batchId,bP(e,o)}catch(o){await ih(e,o)}aE(e)&&lE(e)}function PP(n){return Ki(n)&&n.Ta.length<10}function bP(n,e){n.Ta.push(e);const t=Qs(n);t.O_()&&t.X_&&t.ea(e.mutations)}function aE(n){return Ki(n)&&!Qs(n).x_()&&n.Ta.length>0}function lE(n){Qs(n).start()}async function NP(n){Qs(n).ra()}async function DP(n){const e=Qs(n);for(const t of n.Ta)e.ea(t.mutations)}async function OP(n,e,t){const s=n.Ta.shift(),o=Kp.from(s,e,t);await oE(n,(()=>n.remoteSyncer.applySuccessfulWrite(o))),await Ph(n)}async function LP(n,e){e&&Qs(n).X_&&await(async function(s,o){if((function(c){return gA(c)&&c!==K.ABORTED})(o.code)){const l=s.Ta.shift();Qs(s).B_(),await oE(s,(()=>s.remoteSyncer.rejectFailedWrite(l.batchId,o))),await Ph(s)}})(n,e),aE(n)&&lE(n)}async function g_(n,e){const t=Ie(n);t.asyncQueue.verifyOperationInProgress(),ue(zi,"RemoteStore received new credentials");const s=Ki(t);t.Ea.add(3),await Yl(t),s&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Ah(t)}async function VP(n,e){const t=Ie(n);e?(t.Ea.delete(2),await Ah(t)):e||(t.Ea.add(2),await Yl(t),t.Ra.set("Unknown"))}function la(n){return n.ma||(n.ma=(function(t,s,o){const l=Ie(t);return l.sa(),new wP(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(n.datastore,n.asyncQueue,{Xo:CP.bind(null,n),t_:kP.bind(null,n),r_:RP.bind(null,n),H_:AP.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),sm(n)?rm(n):n.Ra.set("Unknown")):(await n.ma.stop(),iE(n))}))),n.ma}function Qs(n){return n.fa||(n.fa=(function(t,s,o){const l=Ie(t);return l.sa(),new EP(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:NP.bind(null,n),r_:LP.bind(null,n),ta:DP.bind(null,n),na:OP.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await Ph(n)):(await n.fa.stop(),n.Ta.length>0&&(ue(zi,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class im{constructor(e,t,s,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=o,this.removalCallback=l,this.deferred=new Xr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,o,l){const c=Date.now()+s,d=new im(e,t,c,o,l);return d.start(s),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ae(K.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function om(n,e){if(ts("AsyncQueue",`${e}: ${n}`),oa(n))return new ae(K.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo{static emptySet(e){return new Wo(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||me.comparator(t.key,s.key):(t,s)=>me.comparator(t.key,s.key),this.keyedMap=hl(),this.sortedSet=new st(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Wo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new Wo;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y_{constructor(){this.ga=new st(me.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):we(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,s)=>{e.push(s)})),e}}class Zo{constructor(e,t,s,o,l,c,d,f,m){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=f,this.hasCachedResults=m}static fromInitialDocuments(e,t,s,o,l){const c=[];return t.forEach((d=>{c.push({type:0,doc:d})})),new Zo(e,t,Wo.emptySet(t),c,s,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&xh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==s[o].type||!t[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MP{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class jP{constructor(){this.queries=v_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const o=Ie(t),l=o.queries;o.queries=v_(),l.forEach(((c,d)=>{for(const f of d.Sa)f.onError(s)}))})(this,new ae(K.ABORTED,"Firestore shutting down"))}}function v_(){return new Gi((n=>Aw(n)),xh)}async function uE(n,e){const t=Ie(n);let s=3;const o=e.query;let l=t.queries.get(o);l?!l.ba()&&e.Da()&&(s=2):(l=new MP,s=e.Da()?0:1);try{switch(s){case 0:l.wa=await t.onListen(o,!0);break;case 1:l.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(c){const d=om(c,`Initialization of query '${Uo(e.query)}' failed`);return void e.onError(d)}t.queries.set(o,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&am(t)}async function cE(n,e){const t=Ie(n),s=e.query;let o=3;const l=t.queries.get(s);if(l){const c=l.Sa.indexOf(e);c>=0&&(l.Sa.splice(c,1),l.Sa.length===0?o=e.Da()?0:1:!l.ba()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function FP(n,e){const t=Ie(n);let s=!1;for(const o of e){const l=o.query,c=t.queries.get(l);if(c){for(const d of c.Sa)d.Fa(o)&&(s=!0);c.wa=o}}s&&am(t)}function UP(n,e,t){const s=Ie(n),o=s.queries.get(e);if(o)for(const l of o.Sa)l.onError(t);s.queries.delete(e)}function am(n){n.Ca.forEach((e=>{e.next()}))}var ap,__;(__=ap||(ap={})).Ma="default",__.Cache="cache";class hE{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new Zo(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Zo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==ap.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dE{constructor(e){this.key=e}}class fE{constructor(e){this.key=e}}class $P{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ne(),this.mutatedKeys=Ne(),this.eu=Pw(e),this.tu=new Wo(this.eu)}get nu(){return this.Ya}ru(e,t){const s=t?t.iu:new y_,o=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,c=o,d=!1;const f=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,m=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((_,x)=>{const T=o.get(_),P=Th(this.query,x)?x:null,N=!!T&&this.mutatedKeys.has(T.key),j=!!P&&(P.hasLocalMutations||this.mutatedKeys.has(P.key)&&P.hasCommittedMutations);let L=!1;T&&P?T.data.isEqual(P.data)?N!==j&&(s.track({type:3,doc:P}),L=!0):this.su(T,P)||(s.track({type:2,doc:P}),L=!0,(f&&this.eu(P,f)>0||m&&this.eu(P,m)<0)&&(d=!0)):!T&&P?(s.track({type:0,doc:P}),L=!0):T&&!P&&(s.track({type:1,doc:T}),L=!0,(f||m)&&(d=!0)),L&&(P?(c=c.add(P),l=j?l.add(_):l.delete(_)):(c=c.delete(_),l=l.delete(_)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const _=this.query.limitType==="F"?c.last():c.first();c=c.delete(_.key),l=l.delete(_.key),s.track({type:1,doc:_})}return{tu:c,iu:s,Cs:d,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,o){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((_,x)=>(function(P,N){const j=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return we(20277,{Rt:L})}};return j(P)-j(N)})(_.type,x.type)||this.eu(_.doc,x.doc))),this.ou(s),o=o??!1;const d=t&&!o?this._u():[],f=this.Xa.size===0&&this.current&&!o?1:0,m=f!==this.Za;return this.Za=f,c.length!==0||m?{snapshot:new Zo(this.query,e.tu,l,c,e.mutatedKeys,f===0,m,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:d}:{au:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new y_,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ne(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const t=[];return e.forEach((s=>{this.Xa.has(s)||t.push(new fE(s))})),this.Xa.forEach((s=>{e.has(s)||t.push(new dE(s))})),t}cu(e){this.Ya=e.Qs,this.Xa=Ne();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Zo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const lm="SyncEngine";class BP{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class zP{constructor(e){this.key=e,this.hu=!1}}class qP{constructor(e,t,s,o,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new Gi((d=>Aw(d)),xh),this.Iu=new Map,this.Eu=new Set,this.du=new st(me.comparator),this.Au=new Map,this.Ru=new Xp,this.Vu={},this.mu=new Map,this.fu=Jo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function HP(n,e,t=!0){const s=_E(n);let o;const l=s.Tu.get(e);return l?(s.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.lu()):o=await pE(s,e,t,!0),o}async function WP(n,e){const t=_E(n);await pE(t,e,!0,!1)}async function pE(n,e,t,s){const o=await dP(n.localStore,_r(e)),l=o.targetId,c=n.sharedClientState.addLocalQueryTarget(l,t);let d;return s&&(d=await GP(n,e,l,c==="current",o.resumeToken)),n.isPrimaryClient&&t&&rE(n.remoteStore,o),d}async function GP(n,e,t,s,o){n.pu=(x,T,P)=>(async function(j,L,W,G){let Z=L.view.ru(W);Z.Cs&&(Z=await h_(j.localStore,L.query,!1).then((({documents:k})=>L.view.ru(k,Z))));const ne=G&&G.targetChanges.get(L.targetId),ee=G&&G.targetMismatches.get(L.targetId)!=null,se=L.view.applyChanges(Z,j.isPrimaryClient,ne,ee);return E_(j,L.targetId,se.au),se.snapshot})(n,x,T,P);const l=await h_(n.localStore,e,!0),c=new $P(e,l.Qs),d=c.ru(l.documents),f=Ql.createSynthesizedTargetChangeForCurrentChange(t,s&&n.onlineState!=="Offline",o),m=c.applyChanges(d,n.isPrimaryClient,f);E_(n,t,m.au);const _=new BP(e,t,c);return n.Tu.set(e,_),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),m.snapshot}async function KP(n,e,t){const s=Ie(n),o=s.Tu.get(e),l=s.Iu.get(o.targetId);if(l.length>1)return s.Iu.set(o.targetId,l.filter((c=>!xh(c,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await ip(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),t&&tm(s.remoteStore,o.targetId),lp(s,o.targetId)})).catch(ia)):(lp(s,o.targetId),await ip(s.localStore,o.targetId,!0))}async function QP(n,e){const t=Ie(n),s=t.Tu.get(e),o=t.Iu.get(s.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),tm(t.remoteStore,s.targetId))}async function YP(n,e,t){const s=rb(n);try{const o=await(function(c,d){const f=Ie(c),m=Xe.now(),_=d.reduce(((P,N)=>P.add(N.key)),Ne());let x,T;return f.persistence.runTransaction("Locally write mutations","readwrite",(P=>{let N=ns(),j=Ne();return f.Ns.getEntries(P,_).next((L=>{N=L,N.forEach(((W,G)=>{G.isValidDocument()||(j=j.add(W))}))})).next((()=>f.localDocuments.getOverlayedDocuments(P,N))).next((L=>{x=L;const W=[];for(const G of d){const Z=hA(G,x.get(G.key).overlayedDocument);Z!=null&&W.push(new ti(G.key,Z,Ew(Z.value.mapValue),Zt.exists(!0)))}return f.mutationQueue.addMutationBatch(P,m,W,d)})).next((L=>{T=L;const W=L.applyToLocalDocumentSet(x,j);return f.documentOverlayCache.saveOverlays(P,L.batchId,W)}))})).then((()=>({batchId:T.batchId,changes:Nw(x)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),(function(c,d,f){let m=c.Vu[c.currentUser.toKey()];m||(m=new st(be)),m=m.insert(d,f),c.Vu[c.currentUser.toKey()]=m})(s,o.batchId,t),await Xl(s,o.changes),await Ph(s.remoteStore)}catch(o){const l=om(o,"Failed to persist write");t.reject(l)}}async function mE(n,e){const t=Ie(n);try{const s=await uP(t.localStore,e);e.targetChanges.forEach(((o,l)=>{const c=t.Au.get(l);c&&($e(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?c.hu=!0:o.modifiedDocuments.size>0?$e(c.hu,14607):o.removedDocuments.size>0&&($e(c.hu,42227),c.hu=!1))})),await Xl(t,s,e)}catch(s){await ia(s)}}function w_(n,e,t){const s=Ie(n);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const o=[];s.Tu.forEach(((l,c)=>{const d=c.view.va(e);d.snapshot&&o.push(d.snapshot)})),(function(c,d){const f=Ie(c);f.onlineState=d;let m=!1;f.queries.forEach(((_,x)=>{for(const T of x.Sa)T.va(d)&&(m=!0)})),m&&am(f)})(s.eventManager,e),o.length&&s.Pu.H_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function XP(n,e,t){const s=Ie(n);s.sharedClientState.updateQueryState(e,"rejected",t);const o=s.Au.get(e),l=o&&o.key;if(l){let c=new st(me.comparator);c=c.insert(l,Gt.newNoDocument(l,xe.min()));const d=Ne().add(l),f=new kh(xe.min(),new Map,new st(be),c,d);await mE(s,f),s.du=s.du.remove(l),s.Au.delete(e),um(s)}else await ip(s.localStore,e,!1).then((()=>lp(s,e,t))).catch(ia)}async function JP(n,e){const t=Ie(n),s=e.batch.batchId;try{const o=await lP(t.localStore,e);yE(t,s,null),gE(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await Xl(t,o)}catch(o){await ia(o)}}async function ZP(n,e,t){const s=Ie(n);try{const o=await(function(c,d){const f=Ie(c);return f.persistence.runTransaction("Reject batch","readwrite-primary",(m=>{let _;return f.mutationQueue.lookupMutationBatch(m,d).next((x=>($e(x!==null,37113),_=x.keys(),f.mutationQueue.removeMutationBatch(m,x)))).next((()=>f.mutationQueue.performConsistencyCheck(m))).next((()=>f.documentOverlayCache.removeOverlaysForBatchId(m,_,d))).next((()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,_))).next((()=>f.localDocuments.getDocuments(m,_)))}))})(s.localStore,e);yE(s,e,t),gE(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await Xl(s,o)}catch(o){await ia(o)}}function gE(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function yE(n,e,t){const s=Ie(n);let o=s.Vu[s.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),s.Vu[s.currentUser.toKey()]=o}}function lp(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const s of n.Iu.get(e))n.Tu.delete(s),t&&n.Pu.yu(s,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((s=>{n.Ru.containsKey(s)||vE(n,s)}))}function vE(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(tm(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),um(n))}function E_(n,e,t){for(const s of t)s instanceof dE?(n.Ru.addReference(s.key,e),eb(n,s)):s instanceof fE?(ue(lm,"Document no longer in limbo: "+s.key),n.Ru.removeReference(s.key,e),n.Ru.containsKey(s.key)||vE(n,s.key)):we(19791,{wu:s})}function eb(n,e){const t=e.key,s=t.path.canonicalString();n.du.get(t)||n.Eu.has(s)||(ue(lm,"New document in limbo: "+t),n.Eu.add(s),um(n))}function um(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new me(Ge.fromString(e)),s=n.fu.next();n.Au.set(s,new zP(t)),n.du=n.du.insert(t,s),rE(n.remoteStore,new js(_r(Wp(t.path)),s,"TargetPurposeLimboResolution",_h.ce))}}async function Xl(n,e,t){const s=Ie(n),o=[],l=[],c=[];s.Tu.isEmpty()||(s.Tu.forEach(((d,f)=>{c.push(s.pu(f,e,t).then((m=>{if((m||t)&&s.isPrimaryClient){const _=m?!m.fromCache:t?.targetChanges.get(f.targetId)?.current;s.sharedClientState.updateQueryState(f.targetId,_?"current":"not-current")}if(m){o.push(m);const _=Zp.As(f.targetId,m);l.push(_)}})))})),await Promise.all(c),s.Pu.H_(o),await(async function(f,m){const _=Ie(f);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(x=>Q.forEach(m,(T=>Q.forEach(T.Es,(P=>_.persistence.referenceDelegate.addReference(x,T.targetId,P))).next((()=>Q.forEach(T.ds,(P=>_.persistence.referenceDelegate.removeReference(x,T.targetId,P)))))))))}catch(x){if(!oa(x))throw x;ue(em,"Failed to update sequence numbers: "+x)}for(const x of m){const T=x.targetId;if(!x.fromCache){const P=_.Ms.get(T),N=P.snapshotVersion,j=P.withLastLimboFreeSnapshotVersion(N);_.Ms=_.Ms.insert(T,j)}}})(s.localStore,l))}async function tb(n,e){const t=Ie(n);if(!t.currentUser.isEqual(e)){ue(lm,"User change. New user:",e.toKey());const s=await Zw(t.localStore,e);t.currentUser=e,(function(l,c){l.mu.forEach((d=>{d.forEach((f=>{f.reject(new ae(K.CANCELLED,c))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Xl(t,s.Ls)}}function nb(n,e){const t=Ie(n),s=t.Au.get(e);if(s&&s.hu)return Ne().add(s.key);{let o=Ne();const l=t.Iu.get(e);if(!l)return o;for(const c of l){const d=t.Tu.get(c);o=o.unionWith(d.view.nu)}return o}}function _E(n){const e=Ie(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=mE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=nb.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=XP.bind(null,e),e.Pu.H_=FP.bind(null,e.eventManager),e.Pu.yu=UP.bind(null,e.eventManager),e}function rb(n){const e=Ie(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=JP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=ZP.bind(null,e),e}class oh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Rh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return aP(this.persistence,new sP,e.initialUser,this.serializer)}Cu(e){return new Jw(Jp.mi,this.serializer)}Du(e){return new pP}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}oh.provider={build:()=>new oh};class sb extends oh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){$e(this.persistence.referenceDelegate instanceof sh,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new zA(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?ln.withCacheSize(this.cacheSizeBytes):ln.DEFAULT;return new Jw((s=>sh.mi(s,t)),this.serializer)}}class up{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>w_(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=tb.bind(null,this.syncEngine),await VP(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new jP})()}createDatastore(e){const t=Rh(e.databaseInfo.databaseId),s=(function(l){return new _P(l)})(e.databaseInfo);return(function(l,c,d,f){return new TP(l,c,d,f)})(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,o,l,c,d){return new SP(s,o,l,c,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>w_(this.syncEngine,t,0)),(function(){return p_.v()?new p_:new mP})())}createSyncEngine(e,t){return(function(o,l,c,d,f,m,_){const x=new qP(o,l,c,d,f,m);return _&&(x.gu=!0),x})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const s=Ie(t);ue(zi,"RemoteStore shutting down."),s.Ea.add(5),await Yl(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}up.provider={build:()=>new up};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wE{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ts("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ys="FirestoreClient";class ib{constructor(e,t,s,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=o,this.user=Wt.UNAUTHENTICATED,this.clientId=Up.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(s,(async c=>{ue(Ys,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(s,(c=>(ue(Ys,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Xr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=om(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function Sf(n,e){n.asyncQueue.verifyOperationInProgress(),ue(Ys,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let s=t.initialUser;n.setCredentialChangeListener((async o=>{s.isEqual(o)||(await Zw(e.localStore,o),s=o)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function x_(n,e){n.asyncQueue.verifyOperationInProgress();const t=await ob(n);ue(Ys,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((s=>g_(e.remoteStore,s))),n.setAppCheckTokenChangeListener(((s,o)=>g_(e.remoteStore,o))),n._onlineComponents=e}async function ob(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ue(Ys,"Using user provided OfflineComponentProvider");try{await Sf(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===K.FAILED_PRECONDITION||o.code===K.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;Ko("Error using user provided cache. Falling back to memory cache: "+t),await Sf(n,new oh)}}else ue(Ys,"Using default OfflineComponentProvider"),await Sf(n,new sb(void 0));return n._offlineComponents}async function EE(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ue(Ys,"Using user provided OnlineComponentProvider"),await x_(n,n._uninitializedComponentsProvider._online)):(ue(Ys,"Using default OnlineComponentProvider"),await x_(n,new up))),n._onlineComponents}function ab(n){return EE(n).then((e=>e.syncEngine))}async function xE(n){const e=await EE(n),t=e.eventManager;return t.onListen=HP.bind(null,e.syncEngine),t.onUnlisten=KP.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=WP.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=QP.bind(null,e.syncEngine),t}function lb(n,e,t={}){const s=new Xr;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,d,f,m){const _=new wE({next:T=>{_.Nu(),c.enqueueAndForget((()=>cE(l,x)));const P=T.docs.has(d);!P&&T.fromCache?m.reject(new ae(K.UNAVAILABLE,"Failed to get document because the client is offline.")):P&&T.fromCache&&f&&f.source==="server"?m.reject(new ae(K.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(T)},error:T=>m.reject(T)}),x=new hE(Wp(d.path),_,{includeMetadataChanges:!0,qa:!0});return uE(l,x)})(await xE(n),n.asyncQueue,e,t,s))),s.promise}function ub(n,e,t={}){const s=new Xr;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,d,f,m){const _=new wE({next:T=>{_.Nu(),c.enqueueAndForget((()=>cE(l,x))),T.fromCache&&f.source==="server"?m.reject(new ae(K.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(T)},error:T=>m.reject(T)}),x=new hE(d,_,{includeMetadataChanges:!0,qa:!0});return uE(l,x)})(await xE(n),n.asyncQueue,e,t,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TE(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T_=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IE="firestore.googleapis.com",I_=!0;class S_{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ae(K.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=IE,this.ssl=I_}else this.host=e.host,this.ssl=e.ssl??I_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Xw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<$A)throw new ae(K.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}TR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=TE(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ae(K.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ae(K.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ae(K.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class bh{constructor(e,t,s,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new S_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ae(K.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ae(K.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new S_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new fR;switch(s.type){case"firstParty":return new yR(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new ae(K.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=T_.get(t);s&&(ue("ComponentProvider","Removing Datastore"),T_.delete(t),s.terminate())})(this),Promise.resolve()}}function cb(n,e,t,s={}){n=Nn(n,bh);const o=Hi(e),l=n._getSettings(),c={...l,emulatorOptions:n._getEmulatorOptions()},d=`${e}:${t}`;o&&(Ip(`https://${d}`),Sp("Firestore",!0)),l.host!==IE&&l.host!==d&&Ko("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const f={...l,host:d,ssl:o,emulatorOptions:s};if(!ji(f,c)&&(n._setSettings(f),s.mockUserToken)){let m,_;if(typeof s.mockUserToken=="string")m=s.mockUserToken,_=Wt.MOCK_USER;else{m=y0(s.mockUserToken,n._app?.options.projectId);const x=s.mockUserToken.sub||s.mockUserToken.user_id;if(!x)throw new ae(K.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new Wt(x)}n._authCredentials=new pR(new uw(m,_))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new ni(this.firestore,e,this._query)}}class ht{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new zs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ht(this.firestore,e,this._key)}toJSON(){return{type:ht._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(Gl(t,ht._jsonSchema))return new ht(e,s||null,new me(Ge.fromString(t.referencePath)))}}ht._jsonSchemaVersion="firestore/documentReference/1.0",ht._jsonSchema={type:vt("string",ht._jsonSchemaVersion),referencePath:vt("string")};class zs extends ni{constructor(e,t,s){super(e,t,Wp(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ht(this.firestore,null,new me(e))}withConverter(e){return new zs(this.firestore,e,this._path)}}function Os(n,e,...t){if(n=dt(n),cw("collection","path",e),n instanceof bh){const s=Ge.fromString(e,...t);return jv(s),new zs(n,null,s)}{if(!(n instanceof ht||n instanceof zs))throw new ae(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(Ge.fromString(e,...t));return jv(s),new zs(n.firestore,null,s)}}function Jt(n,e,...t){if(n=dt(n),arguments.length===1&&(e=Up.newId()),cw("doc","path",e),n instanceof bh){const s=Ge.fromString(e,...t);return Mv(s),new ht(n,null,new me(s))}{if(!(n instanceof ht||n instanceof zs))throw new ae(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(Ge.fromString(e,...t));return Mv(s),new ht(n.firestore,n instanceof zs?n.converter:null,new me(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C_="AsyncQueue";class k_{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new tE(this,"async_queue_retry"),this._c=()=>{const s=If();s&&ue(C_,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=If();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=If();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Xr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!oa(e))throw e;ue(C_,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,ts("INTERNAL UNHANDLED ERROR: ",R_(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=im.createAndSchedule(this,e,t,s,(l=>this.hc(l)));return this.tc.push(o),o}uc(){this.nc&&we(47125,{Pc:R_(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function R_(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class ri extends bh{constructor(e,t,s,o){super(e,t,s,o),this.type="firestore",this._queue=new k_,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new k_(e),this._firestoreClient=void 0,await e}}}function hb(n,e){const t=typeof n=="object"?n:Rp(),s=typeof n=="string"?n:Jc,o=ph(t,"firestore").getImmediate({identifier:s});if(!o._initialized){const l=p0("firestore");l&&cb(o,...l)}return o}function Nh(n){if(n._terminated)throw new ae(K.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||db(n),n._firestoreClient}function db(n){const e=n._freezeSettings(),t=(function(o,l,c,d){return new LR(o,l,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,TE(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new ib(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(o){const l=o?._online.build();return{_offline:o?._offline.build(l),_online:l}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Pn(Mt.fromBase64String(e))}catch(t){throw new ae(K.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Pn(Mt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Pn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Gl(e,Pn._jsonSchema))return Pn.fromBase64String(e.bytes)}}Pn._jsonSchemaVersion="firestore/bytes/1.0",Pn._jsonSchema={type:vt("string",Pn._jsonSchemaVersion),bytes:vt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jl{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ae(K.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Vt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dh{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ae(K.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ae(K.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return be(this._lat,e._lat)||be(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Er._jsonSchemaVersion}}static fromJSON(e){if(Gl(e,Er._jsonSchema))return new Er(e.latitude,e.longitude)}}Er._jsonSchemaVersion="firestore/geoPoint/1.0",Er._jsonSchema={type:vt("string",Er._jsonSchemaVersion),latitude:vt("number"),longitude:vt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,o){if(s.length!==o.length)return!1;for(let l=0;l<s.length;++l)if(s[l]!==o[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:xr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Gl(e,xr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new xr(e.vectorValues);throw new ae(K.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}xr._jsonSchemaVersion="firestore/vectorValue/1.0",xr._jsonSchema={type:vt("string",xr._jsonSchemaVersion),vectorValues:vt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fb=/^__.*__$/;class pb{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new ti(e,this.data,this.fieldMask,t,this.fieldTransforms):new Kl(e,this.data,t,this.fieldTransforms)}}class SE{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new ti(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function CE(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw we(40011,{Ac:n})}}class cm{constructor(e,t,s,o,l,c){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=o,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new cm({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),s=this.Vc({path:t,fc:!1});return s.gc(e),s}yc(e){const t=this.path?.child(e),s=this.Vc({path:t,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return ah(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(CE(this.Ac)&&fb.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class mb{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||Rh(e)}Cc(e,t,s,o=!1){return new cm({Ac:e,methodName:t,Dc:s,path:Vt.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Zl(n){const e=n._freezeSettings(),t=Rh(n._databaseId);return new mb(n._databaseId,!!e.ignoreUndefinedProperties,t)}function hm(n,e,t,s,o,l={}){const c=n.Cc(l.merge||l.mergeFields?2:0,e,t,o);fm("Data must be an object, but it was:",c,s);const d=AE(s,c);let f,m;if(l.merge)f=new wn(c.fieldMask),m=c.fieldTransforms;else if(l.mergeFields){const _=[];for(const x of l.mergeFields){const T=cp(e,x,t);if(!c.contains(T))throw new ae(K.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);bE(_,T)||_.push(T)}f=new wn(_),m=c.fieldTransforms.filter((x=>f.covers(x.field)))}else f=null,m=c.fieldTransforms;return new pb(new cn(d),f,m)}class Oh extends Dh{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Oh}}class dm extends Dh{_toFieldTransform(e){return new aA(e.path,new Dl)}isEqual(e){return e instanceof dm}}function kE(n,e,t,s){const o=n.Cc(1,e,t);fm("Data must be an object, but it was:",o,s);const l=[],c=cn.empty();ei(s,((f,m)=>{const _=pm(e,f,t);m=dt(m);const x=o.yc(_);if(m instanceof Oh)l.push(_);else{const T=eu(m,x);T!=null&&(l.push(_),c.set(_,T))}}));const d=new wn(l);return new SE(c,d,o.fieldTransforms)}function RE(n,e,t,s,o,l){const c=n.Cc(1,e,t),d=[cp(e,s,t)],f=[o];if(l.length%2!=0)throw new ae(K.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<l.length;T+=2)d.push(cp(e,l[T])),f.push(l[T+1]);const m=[],_=cn.empty();for(let T=d.length-1;T>=0;--T)if(!bE(m,d[T])){const P=d[T];let N=f[T];N=dt(N);const j=c.yc(P);if(N instanceof Oh)m.push(P);else{const L=eu(N,j);L!=null&&(m.push(P),_.set(P,L))}}const x=new wn(m);return new SE(_,x,c.fieldTransforms)}function gb(n,e,t,s=!1){return eu(t,n.Cc(s?4:3,e))}function eu(n,e){if(PE(n=dt(n)))return fm("Unsupported field value:",e,n),AE(n,e);if(n instanceof Dh)return(function(s,o){if(!CE(o.Ac))throw o.Sc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${s._methodName}() is not currently supported inside arrays`);const l=s._toFieldTransform(o);l&&o.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,o){const l=[];let c=0;for(const d of s){let f=eu(d,o.wc(c));f==null&&(f={nullValue:"NULL_VALUE"}),l.push(f),c++}return{arrayValue:{values:l}}})(n,e)}return(function(s,o){if((s=dt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return sA(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const l=Xe.fromDate(s);return{timestampValue:rh(o.serializer,l)}}if(s instanceof Xe){const l=new Xe(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:rh(o.serializer,l)}}if(s instanceof Er)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Pn)return{bytesValue:qw(o.serializer,s._byteString)};if(s instanceof ht){const l=o.databaseId,c=s.firestore._databaseId;if(!c.isEqual(l))throw o.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Yp(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof xr)return(function(c,d){return{mapValue:{fields:{[_w]:{stringValue:ww},[Zc]:{arrayValue:{values:c.toArray().map((m=>{if(typeof m!="number")throw d.Sc("VectorValues must only contain numeric values.");return Gp(d.serializer,m)}))}}}}}})(s,o);throw o.Sc(`Unsupported field value: ${vh(s)}`)})(n,e)}function AE(n,e){const t={};return fw(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ei(n,((s,o)=>{const l=eu(o,e.mc(s));l!=null&&(t[s]=l)})),{mapValue:{fields:t}}}function PE(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Xe||n instanceof Er||n instanceof Pn||n instanceof ht||n instanceof Dh||n instanceof xr)}function fm(n,e,t){if(!PE(t)||!hw(t)){const s=vh(t);throw s==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+s)}}function cp(n,e,t){if((e=dt(e))instanceof Jl)return e._internalPath;if(typeof e=="string")return pm(n,e);throw ah("Field path arguments must be of type string or ",n,!1,void 0,t)}const yb=new RegExp("[~\\*/\\[\\]]");function pm(n,e,t){if(e.search(yb)>=0)throw ah(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Jl(...e.split("."))._internalPath}catch{throw ah(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function ah(n,e,t,s,o){const l=s&&!s.isEmpty(),c=o!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let f="";return(l||c)&&(f+=" (found",l&&(f+=` in field ${s}`),c&&(f+=` in document ${o}`),f+=")"),new ae(K.INVALID_ARGUMENT,d+n+f)}function bE(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NE{constructor(e,t,s,o,l){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new ht(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new vb(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Lh("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class vb extends NE{data(){return super.data()}}function Lh(n,e){return typeof e=="string"?pm(n,e):e instanceof Jl?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _b(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ae(K.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class mm{}class gm extends mm{}function il(n,e,...t){let s=[];e instanceof mm&&s.push(e),s=s.concat(t),(function(l){const c=l.filter((f=>f instanceof ym)).length,d=l.filter((f=>f instanceof Vh)).length;if(c>1||c>0&&d>0)throw new ae(K.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const o of s)n=o._apply(n);return n}class Vh extends gm{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new Vh(e,t,s)}_apply(e){const t=this._parse(e);return DE(e._query,t),new ni(e.firestore,e.converter,ep(e._query,t))}_parse(e){const t=Zl(e.firestore);return(function(l,c,d,f,m,_,x){let T;if(m.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new ae(K.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){P_(x,_);const N=[];for(const j of x)N.push(A_(f,l,j));T={arrayValue:{values:N}}}else T=A_(f,l,x)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||P_(x,_),T=gb(d,c,x,_==="in"||_==="not-in");return yt.create(m,_,T)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function jo(n,e,t){const s=e,o=Lh("where",n);return Vh._create(o,s,t)}class ym extends mm{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new ym(e,t)}_parse(e){const t=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return t.length===1?t[0]:Kn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,l){let c=o;const d=l.getFlattenedFilters();for(const f of d)DE(c,f),c=ep(c,f)})(e._query,t),new ni(e.firestore,e.converter,ep(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class vm extends gm{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new vm(e,t)}_apply(e){const t=(function(o,l,c){if(o.startAt!==null)throw new ae(K.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new ae(K.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Nl(l,c)})(e._query,this._field,this._direction);return new ni(e.firestore,e.converter,(function(o,l){const c=o.explicitOrderBy.concat([l]);return new aa(o.path,o.collectionGroup,c,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,t))}}function Cc(n,e="asc"){const t=e,s=Lh("orderBy",n);return vm._create(s,t)}class _m extends gm{constructor(e,t,s){super(),this.type=e,this._limit=t,this._limitType=s}static _create(e,t,s){return new _m(e,t,s)}_apply(e){return new ni(e.firestore,e.converter,th(e._query,this._limit,this._limitType))}}function wb(n){return IR("limit",n),_m._create("limit",n,"F")}function A_(n,e,t){if(typeof(t=dt(t))=="string"){if(t==="")throw new ae(K.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Rw(e)&&t.indexOf("/")!==-1)throw new ae(K.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(Ge.fromString(t));if(!me.isDocumentKey(s))throw new ae(K.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Wv(n,new me(s))}if(t instanceof ht)return Wv(n,t._key);throw new ae(K.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${vh(t)}.`)}function P_(n,e){if(!Array.isArray(n)||n.length===0)throw new ae(K.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function DE(n,e){const t=(function(o,l){for(const c of o)for(const d of c.getFlattenedFilters())if(l.indexOf(d.op)>=0)return d.op;return null})(n.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new ae(K.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ae(K.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class Eb{convertValue(e,t="none"){switch(Ks(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ct(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Gs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw we(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return ei(e,((o,l)=>{s[o]=this.convertValue(l,t)})),s}convertVectorValue(e){const t=e.fields?.[Zc].arrayValue?.values?.map((s=>ct(s.doubleValue)));return new xr(t)}convertGeoPoint(e){return new Er(ct(e.latitude),ct(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=Eh(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(Al(e));default:return null}}convertTimestamp(e){const t=Ws(e);return new Xe(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=Ge.fromString(e);$e(Yw(s),9688,{name:e});const o=new Pl(s.get(1),s.get(3)),l=new me(s.popFirst(5));return o.isEqual(t)||ts(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wm(n,e,t){let s;return s=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,s}class fl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Vi extends NE{constructor(e,t,s,o,l,c){super(e,t,s,o,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Uc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(Lh("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ae(K.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Vi._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Vi._jsonSchemaVersion="firestore/documentSnapshot/1.0",Vi._jsonSchema={type:vt("string",Vi._jsonSchemaVersion),bundleSource:vt("string","DocumentSnapshot"),bundleName:vt("string"),bundle:vt("string")};class Uc extends Vi{data(e={}){return super.data(e)}}class Go{constructor(e,t,s,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new fl(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new Uc(this._firestore,this._userDataWriter,s.key,s,new fl(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ae(K.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,l){if(o._snapshot.oldDocs.isEmpty()){let c=0;return o._snapshot.docChanges.map((d=>{const f=new Uc(o._firestore,o._userDataWriter,d.doc.key,d.doc,new fl(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);return d.doc,{type:"added",doc:f,oldIndex:-1,newIndex:c++}}))}{let c=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((d=>l||d.type!==3)).map((d=>{const f=new Uc(o._firestore,o._userDataWriter,d.doc.key,d.doc,new fl(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);let m=-1,_=-1;return d.type!==0&&(m=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),_=c.indexOf(d.doc.key)),{type:xb(d.type),doc:f,oldIndex:m,newIndex:_}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ae(K.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Go._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Up.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],o=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),s.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),o.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function xb(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return we(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ni(n){n=Nn(n,ht);const e=Nn(n.firestore,ri);return lb(Nh(e),n._key).then((t=>Ib(e,n,t)))}Go._jsonSchemaVersion="firestore/querySnapshot/1.0",Go._jsonSchema={type:vt("string",Go._jsonSchemaVersion),bundleSource:vt("string","QuerySnapshot"),bundleName:vt("string"),bundle:vt("string")};class OE extends Eb{constructor(e){super(),this.firestore=e}convertBytes(e){return new Pn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ht(this.firestore,null,t)}}function ol(n){n=Nn(n,ni);const e=Nn(n.firestore,ri),t=Nh(e),s=new OE(e);return _b(n._query),ub(t,n._query).then((o=>new Go(e,s,n,o)))}function pl(n,e,t){n=Nn(n,ht);const s=Nn(n.firestore,ri),o=wm(n.converter,e,t);return tu(s,[hm(Zl(s),"setDoc",n._key,o,n.converter!==null,t).toMutation(n._key,Zt.none())])}function kc(n,e,t,...s){n=Nn(n,ht);const o=Nn(n.firestore,ri),l=Zl(o);let c;return c=typeof(e=dt(e))=="string"||e instanceof Jl?RE(l,"updateDoc",n._key,e,t,s):kE(l,"updateDoc",n._key,e),tu(o,[c.toMutation(n._key,Zt.exists(!0))])}function Tb(n){return tu(Nn(n.firestore,ri),[new Ch(n._key,Zt.none())])}function Cf(n,e){const t=Nn(n.firestore,ri),s=Jt(n),o=wm(n.converter,e);return tu(t,[hm(Zl(n.firestore),"addDoc",s._key,o,n.converter!==null,{}).toMutation(s._key,Zt.exists(!1))]).then((()=>s))}function tu(n,e){return(function(s,o){const l=new Xr;return s.asyncQueue.enqueueAndForget((async()=>YP(await ab(s),o,l))),l.promise})(Nh(n),e)}function Ib(n,e,t){const s=t.docs.get(e._key),o=new OE(n);return new Vi(n,o,e._key,s,new fl(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sb{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Zl(e)}set(e,t,s){this._verifyNotCommitted();const o=kf(e,this._firestore),l=wm(o.converter,t,s),c=hm(this._dataReader,"WriteBatch.set",o._key,l,o.converter!==null,s);return this._mutations.push(c.toMutation(o._key,Zt.none())),this}update(e,t,s,...o){this._verifyNotCommitted();const l=kf(e,this._firestore);let c;return c=typeof(t=dt(t))=="string"||t instanceof Jl?RE(this._dataReader,"WriteBatch.update",l._key,t,s,o):kE(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(c.toMutation(l._key,Zt.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=kf(e,this._firestore);return this._mutations=this._mutations.concat(new Ch(t._key,Zt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ae(K.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function kf(n,e){if((n=dt(n)).firestore!==e)throw new ae(K.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}function Dt(){return new dm("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cb(n){return Nh(n=Nn(n,ri)),new Sb(n,(e=>tu(n,e)))}(function(e,t=!0){(function(o){sa=o})(Wi),Fi(new qs("firestore",((s,{instanceIdentifier:o,options:l})=>{const c=s.getProvider("app").getImmediate(),d=new ri(new mR(s.getProvider("auth-internal")),new vR(c,s.getProvider("app-check-internal")),(function(m,_){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new ae(K.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Pl(m.options.projectId,_)})(c,o),c);return l={useFetchStreams:t,...l},d._setSettings(l),d}),"PUBLIC").setMultipleInstances(!0)),yr(Dv,Ov,e),yr(Dv,Ov,"esm2020")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LE="firebasestorage.googleapis.com",kb="storageBucket",Rb=120*1e3,Ab=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr extends Cr{constructor(e,t,s=0){super(Rf(e),`Firebase Storage: ${t} (${Rf(e)})`),this.status_=s,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,kr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Rf(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ir;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ir||(Ir={}));function Rf(n){return"storage/"+n}function Pb(){const n="An unknown error occurred, please check the error payload for server response.";return new kr(Ir.UNKNOWN,n)}function bb(){return new kr(Ir.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Nb(){return new kr(Ir.CANCELED,"User canceled the upload/download.")}function Db(n){return new kr(Ir.INVALID_URL,"Invalid URL '"+n+"'.")}function Ob(n){return new kr(Ir.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function b_(n){return new kr(Ir.INVALID_ARGUMENT,n)}function VE(){return new kr(Ir.APP_DELETED,"The Firebase app was deleted.")}function Lb(n){return new kr(Ir.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let s;try{s=Hn.makeFromUrl(e,t)}catch{return new Hn(e,"")}if(s.path==="")return s;throw Ob(e)}static makeFromUrl(e,t){let s=null;const o="([A-Za-z0-9.\\-_]+)";function l(ne){ne.path.charAt(ne.path.length-1)==="/"&&(ne.path_=ne.path_.slice(0,-1))}const c="(/(.*))?$",d=new RegExp("^gs://"+o+c,"i"),f={bucket:1,path:3};function m(ne){ne.path_=decodeURIComponent(ne.path)}const _="v[A-Za-z0-9_]+",x=t.replace(/[.]/g,"\\."),T="(/([^?#]*).*)?$",P=new RegExp(`^https?://${x}/${_}/b/${o}/o${T}`,"i"),N={bucket:1,path:3},j=t===LE?"(?:storage.googleapis.com|storage.cloud.google.com)":t,L="([^?#]*)",W=new RegExp(`^https?://${j}/${o}/${L}`,"i"),Z=[{regex:d,indices:f,postModify:l},{regex:P,indices:N,postModify:m},{regex:W,indices:{bucket:1,path:2},postModify:m}];for(let ne=0;ne<Z.length;ne++){const ee=Z[ne],se=ee.regex.exec(e);if(se){const k=se[ee.indices.bucket];let S=se[ee.indices.path];S||(S=""),s=new Hn(k,S),ee.postModify(s);break}}if(s==null)throw Db(e);return s}}class Vb{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mb(n,e,t){let s=1,o=null,l=null,c=!1,d=0;function f(){return d===2}let m=!1;function _(...L){m||(m=!0,e.apply(null,L))}function x(L){o=setTimeout(()=>{o=null,n(P,f())},L)}function T(){l&&clearTimeout(l)}function P(L,...W){if(m){T();return}if(L){T(),_.call(null,L,...W);return}if(f()||c){T(),_.call(null,L,...W);return}s<64&&(s*=2);let Z;d===1?(d=2,Z=0):Z=(s+Math.random())*1e3,x(Z)}let N=!1;function j(L){N||(N=!0,T(),!m&&(o!==null?(L||(d=2),clearTimeout(o),x(0)):L||(d=1)))}return x(0),l=setTimeout(()=>{c=!0,j(!0)},t),j}function jb(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fb(n){return n!==void 0}function N_(n,e,t,s){if(s<e)throw b_(`Invalid value for '${n}'. Expected ${e} or greater.`);if(s>t)throw b_(`Invalid value for '${n}'. Expected ${t} or less.`)}function Ub(n){const e=encodeURIComponent;let t="?";for(const s in n)if(n.hasOwnProperty(s)){const o=e(s)+"="+e(n[s]);t=t+o+"&"}return t=t.slice(0,-1),t}var lh;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(lh||(lh={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $b(n,e){const t=n>=500&&n<600,o=[408,429].indexOf(n)!==-1,l=e.indexOf(n)!==-1;return t||o||l}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bb{constructor(e,t,s,o,l,c,d,f,m,_,x,T=!0,P=!1){this.url_=e,this.method_=t,this.headers_=s,this.body_=o,this.successCodes_=l,this.additionalRetryCodes_=c,this.callback_=d,this.errorCallback_=f,this.timeout_=m,this.progressCallback_=_,this.connectionFactory_=x,this.retry=T,this.isUsingEmulator=P,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((N,j)=>{this.resolve_=N,this.reject_=j,this.start_()})}start_(){const e=(s,o)=>{if(o){s(!1,new Rc(!1,null,!0));return}const l=this.connectionFactory_();this.pendingConnection_=l;const c=d=>{const f=d.loaded,m=d.lengthComputable?d.total:-1;this.progressCallback_!==null&&this.progressCallback_(f,m)};this.progressCallback_!==null&&l.addUploadProgressListener(c),l.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&l.removeUploadProgressListener(c),this.pendingConnection_=null;const d=l.getErrorCode()===lh.NO_ERROR,f=l.getStatus();if(!d||$b(f,this.additionalRetryCodes_)&&this.retry){const _=l.getErrorCode()===lh.ABORT;s(!1,new Rc(!1,null,_));return}const m=this.successCodes_.indexOf(f)!==-1;s(!0,new Rc(m,l))})},t=(s,o)=>{const l=this.resolve_,c=this.reject_,d=o.connection;if(o.wasSuccessCode)try{const f=this.callback_(d,d.getResponse());Fb(f)?l(f):l()}catch(f){c(f)}else if(d!==null){const f=Pb();f.serverResponse=d.getErrorText(),this.errorCallback_?c(this.errorCallback_(d,f)):c(f)}else if(o.canceled){const f=this.appDelete_?VE():Nb();c(f)}else{const f=bb();c(f)}};this.canceled_?t(!1,new Rc(!1,null,!0)):this.backoffId_=Mb(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&jb(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Rc{constructor(e,t,s){this.wasSuccessCode=e,this.connection=t,this.canceled=!!s}}function zb(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function qb(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function Hb(n,e){e&&(n["X-Firebase-GMPID"]=e)}function Wb(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function Gb(n,e,t,s,o,l,c=!0,d=!1){const f=Ub(n.urlParams),m=n.url+f,_=Object.assign({},n.headers);return Hb(_,e),zb(_,t),qb(_,l),Wb(_,s),new Bb(m,n.method,_,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,o,c,d)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kb(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function Qb(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uh{constructor(e,t){this._service=e,t instanceof Hn?this._location=t:this._location=Hn.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new uh(e,t)}get root(){const e=new Hn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Qb(this._location.path)}get storage(){return this._service}get parent(){const e=Kb(this._location.path);if(e===null)return null;const t=new Hn(this._location.bucket,e);return new uh(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw Lb(e)}}function D_(n,e){const t=e?.[kb];return t==null?null:Hn.makeFromBucketSpec(t,n)}function Yb(n,e,t,s={}){n.host=`${e}:${t}`;const o=Hi(e);o&&(Ip(`https://${n.host}/b`),Sp("Storage",!0)),n._isUsingEmulator=!0,n._protocol=o?"https":"http";const{mockUserToken:l}=s;l&&(n._overrideAuthToken=typeof l=="string"?l:y0(l,n.app.options.projectId))}class Xb{constructor(e,t,s,o,l,c=!1){this.app=e,this._authProvider=t,this._appCheckProvider=s,this._url=o,this._firebaseVersion=l,this._isUsingEmulator=c,this._bucket=null,this._host=LE,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Rb,this._maxUploadRetryTime=Ab,this._requests=new Set,o!=null?this._bucket=Hn.makeFromBucketSpec(o,this._host):this._bucket=D_(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Hn.makeFromBucketSpec(this._url,e):this._bucket=D_(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){N_("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){N_("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(un(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new uh(this,e)}_makeRequest(e,t,s,o,l=!0){if(this._deleted)return new Vb(VE());{const c=Gb(e,this._appId,s,o,t,this._firebaseVersion,l,this._isUsingEmulator);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}async makeRequestWithTokens(e,t){const[s,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,s,o).getPromise()}}const O_="@firebase/storage",L_="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ME="storage";function Jb(n=Rp(),e){n=dt(n);const s=ph(n,ME).getImmediate({identifier:e}),o=p0("storage");return o&&Zb(s,...o),s}function Zb(n,e,t,s={}){Yb(n,e,t,s)}function eN(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),s=n.getProvider("auth-internal"),o=n.getProvider("app-check-internal");return new Xb(t,s,o,e,Wi)}function tN(){Fi(new qs(ME,eN,"PUBLIC").setMultipleInstances(!0)),yr(O_,L_,""),yr(O_,L_,"esm2020")}tN();const nN={apiKey:"AIzaSyDKQnbvoUXS8ZRooIY1rRLngM-XVVp3Etg",authDomain:"eco-friendly-pledge.firebaseapp.com",projectId:"eco-friendly-pledge",storageBucket:"eco-friendly-pledge.appspot.com",messagingSenderId:"778357402671",appId:"1:778357402671:web:9cb27f2a65bda5a4d23a11"};console.log("Firebase configuration check:");console.log("API Key available:",!0);console.log("API Key value:","AIzaSyDKQnbvoUXS8ZRooIY1rRLngM-XVVp3Etg");console.log("Auth Domain:","eco-friendly-pledge.firebaseapp.com");console.log("Project ID:","eco-friendly-pledge");console.log("Storage Bucket:","eco-friendly-pledge.appspot.com");console.log("Messaging Sender ID:","778357402671");console.log("App ID:","1:778357402671:web:9cb27f2a65bda5a4d23a11");const Em=w0(nN),kt=uR(Em),Ze=hb(Em);Jb(Em);class Ht{static async createUser(e){try{if(!e.uid)throw new Error("User UID is required");const t={...e,createdAt:Dt(),updatedAt:Dt()},s=Jt(Ze,"users",e.uid);return await pl(s,t),console.log("User created successfully in Firestore with UID:",e.uid),{id:e.uid,...e}}catch(t){throw console.error("Error creating user in Firestore:",t),t}}static async getUser(e){try{const t=await Ni(Jt(Ze,"users",e));return t.exists()?(console.log("User found in Firestore:",e),{id:t.id,...t.data()}):(console.log("User not found in Firestore:",e),null)}catch(t){throw console.error("Error getting user from Firestore:",t),t}}static async updateUser(e,t){try{const s=Jt(Ze,"users",e);return(await Ni(s)).exists()?await kc(s,{...t,updatedAt:Dt()}):(console.log("User document does not exist, creating new document"),await pl(s,{uid:e,...t,createdAt:Dt(),updatedAt:Dt()})),console.log("User updated successfully in Firestore:",e),!0}catch(s){throw console.error("Error updating user in Firestore:",s),s}}static async createPledge(e,t){try{if(!t||!t.uid)throw new Error("User not authenticated");const s={...e,userId:t.uid,userEmail:t.email,createdAt:Dt(),updatedAt:Dt(),status:"active"};return console.log("Creating pledge document with data:",s),{id:(await Cf(Os(Ze,"pledges"),s)).id,...e}}catch(s){throw console.error("Error creating pledge:",s),s.code==="permission-denied"?new Error("You do not have permission to create a pledge. Please try logging out and logging in again."):s}}static async getUserPledges(e=null){try{const t=e||kt.currentUser?.uid;if(!t)throw new Error("User not authenticated");const s=il(Os(Ze,"pledges"),jo("userId","==",t),Cc("createdAt","desc"));return(await ol(s)).docs.map(l=>({id:l.id,...l.data()}))}catch(t){throw console.error("Error getting user pledges:",t),t}}static async updatePledge(e,t){try{const s=Jt(Ze,"pledges",e);return await kc(s,{...t,updatedAt:Dt()}),!0}catch(s){throw console.error("Error updating pledge:",s),s}}static async deletePledge(e){try{return await Tb(Jt(Ze,"pledges",e)),!0}catch(t){throw console.error("Error deleting pledge:",t),t}}static async createCertificate(e){try{const t=kt.currentUser;if(!t)throw new Error("User not authenticated");const s={...e,userId:t.uid,userEmail:t.email,createdAt:Dt(),downloadCount:0};return{id:(await Cf(Os(Ze,"certificates"),s)).id,...e}}catch(t){throw console.error("Error creating certificate:",t),t}}static async getUserCertificates(e=null){try{const t=e||kt.currentUser?.uid;if(!t)throw new Error("User not authenticated");const s=il(Os(Ze,"certificates"),jo("userId","==",t),Cc("createdAt","desc"));return(await ol(s)).docs.map(l=>({id:l.id,...l.data()}))}catch(t){throw console.error("Error getting user certificates:",t),t}}static async updateCertificateDownloadCount(e){try{const t=Jt(Ze,"certificates",e),s=await Ni(t);if(s.exists()){const o=s.data().downloadCount||0;await kc(t,{downloadCount:o+1,lastDownloaded:Dt()})}return!0}catch(t){throw console.error("Error updating certificate download count:",t),t}}static async saveAIInteraction(e){try{const t=kt.currentUser;if(!t)throw new Error("User not authenticated");const s={...e,userId:t.uid,timestamp:Dt()};return{id:(await Cf(Os(Ze,"aiInteractions"),s)).id,...e}}catch(t){throw console.error("Error saving AI interaction:",t),t}}static async getUserAIHistory(e=null,t=50){try{const s=e||kt.currentUser?.uid;if(!s)throw new Error("User not authenticated");const o=il(Os(Ze,"aiInteractions"),jo("userId","==",s),Cc("timestamp","desc"),wb(t));return(await ol(o)).docs.map(c=>({id:c.id,...c.data()}))}catch(s){throw console.error("Error getting AI history:",s),s}}static async updateUserProgress(e){try{const t=kt.currentUser;if(!t)throw new Error("User not authenticated");const s=Jt(Ze,"userProgress",t.uid);return(await Ni(s)).exists()?await kc(s,{...e,lastUpdated:Dt()}):(console.log("User progress document does not exist, creating new document"),await pl(s,{userId:t.uid,...e,lastUpdated:Dt()})),console.log("User progress updated successfully in Firestore:",t.uid),!0}catch(t){throw console.error("Error updating user progress in Firestore:",t),t}}static async getUserProgress(e=null){try{const t=e||kt.currentUser?.uid;if(!t)throw new Error("User not authenticated");const s=await Ni(Jt(Ze,"userProgress",t));return s.exists()?{id:s.id,...s.data()}:null}catch(t){throw console.error("Error getting user progress:",t),t}}static async getPublicStatistics(){try{const e=await Ni(Jt(Ze,"statistics","global"));return e.exists()?e.data():{totalPledges:0,totalUsers:0,totalCertificates:0,impactMetrics:{}}}catch(e){throw console.error("Error getting public statistics:",e),e}}static async batchUpdateUserData(e,t){try{const s=Cb(Ze);if(t.user){const o=Jt(Ze,"users",e);s.update(o,{...t.user,updatedAt:Dt()})}if(t.progress){const o=Jt(Ze,"userProgress",e);s.update(o,{...t.progress,lastUpdated:Dt()})}return await s.commit(),!0}catch(s){throw console.error("Error in batch update:",s),s}}static async searchPledges(e,t=null){try{const s=t||kt.currentUser?.uid;if(!s)throw new Error("User not authenticated");const o=il(Os(Ze,"pledges"),jo("userId","==",s));return(await ol(o)).docs.map(d=>({id:d.id,...d.data()})).filter(d=>d.title?.toLowerCase().includes(e.toLowerCase())||d.description?.toLowerCase().includes(e.toLowerCase())||d.category?.toLowerCase().includes(e.toLowerCase()))}catch(s){throw console.error("Error searching pledges:",s),s}}static async recordDailyCheckIn(e,t){try{const s=kt.currentUser;if(!s)throw new Error("User not authenticated");const o=new Date;o.setHours(0,0,0,0);const l=o.toISOString().split("T")[0],c={userId:s.uid,pledgeId:e,date:l,timestamp:Dt(),completed:!0,tasks:t.tasks||[],notes:t.notes||""},d=`${s.uid}_${e}_${l}`,f=Jt(Ze,"dailyCheckIns",d);return await pl(f,c),console.log("Daily check-in recorded:",d),{id:d,...c}}catch(s){throw console.error("Error recording daily check-in:",s),s}}static async getDailyCheckIns(e,t=null){try{const s=t||kt.currentUser?.uid;if(!s)throw new Error("User not authenticated");const o=il(Os(Ze,"dailyCheckIns"),jo("userId","==",s),jo("pledgeId","==",e),Cc("date","desc"));return(await ol(o)).docs.map(c=>({id:c.id,...c.data()}))}catch(s){throw console.error("Error getting daily check-ins:",s),s}}static async checkCertificateEligibility(e,t=null){try{const s=t||kt.currentUser?.uid;if(!s)throw new Error("User not authenticated");const o=await this.getDailyCheckIns(e,s);if(o.length<7)return{eligible:!1,daysCompleted:o.length,daysRequired:7,message:`Complete ${7-o.length} more day${7-o.length>1?"s":""} to earn your certificate`};const l=o.map(m=>new Date(m.date)).sort((m,_)=>_-m);let c=1,d=1;for(let m=0;m<l.length-1;m++){const _=new Date(l[m]),x=new Date(l[m+1]);if(Math.floor((_-x)/(1e3*60*60*24))===1?(c++,d=Math.max(d,c)):c=1,d>=7)break}const f=d>=7;return{eligible:f,daysCompleted:o.length,consecutiveDays:d,daysRequired:7,message:f?"Congratulations! You are eligible to generate your certificate!":`You need ${7-d} more consecutive day${7-d>1?"s":""} to earn your certificate`}}catch(s){throw console.error("Error checking certificate eligibility:",s),s}}static async getWeeklyProgress(e,t=null){try{const s=t||kt.currentUser?.uid;if(!s)throw new Error("User not authenticated");const o=await this.getDailyCheckIns(e,s),l=[],c=new Date;for(let d=6;d>=0;d--){const f=new Date(c);f.setDate(f.getDate()-d),f.setHours(0,0,0,0);const m=f.toISOString().split("T")[0],_=o.find(x=>x.date===m);l.push({date:m,dayName:f.toLocaleDateString("en-US",{weekday:"short"}),completed:!!_,tasks:_?.tasks||[]})}return l}catch(s){throw console.error("Error getting weekly progress:",s),s}}}const jE=V.createContext(void 0),Af=n=>{const e={"auth/email-already-in-use":"An account with this email already exists","auth/invalid-email":"Please enter a valid email address","auth/operation-not-allowed":"This authentication method is not enabled","auth/weak-password":"Please use a stronger password (at least 6 characters)","auth/user-disabled":"This account has been disabled","auth/user-not-found":"No account found with this email","auth/wrong-password":"Incorrect password","auth/popup-closed-by-user":"Sign in was cancelled","auth/popup-blocked":"Sign in popup was blocked by your browser","auth/network-request-failed":"Network error occurred. Please check your connection",default:"An error occurred during authentication"};return e[n]||e.default};function Dn(){const n=V.useContext(jE);if(n===void 0)throw new Error("useAuth must be used within an AuthProvider");return n}const rN=!1;function sN({children:n}){const[e,t]=V.useState(null),[s,o]=V.useState(null),[l,c]=V.useState(!0);V.useEffect(()=>(localStorage.getItem("devUser"),XC(kt,async N=>{if(N){t(N);try{let j=await Ht.getUser(N.uid);j?await Ht.updateUser(N.uid,{lastLogin:new Date().toISOString()}):j=await Ht.createUser({uid:N.uid,email:N.email,displayName:N.displayName||N.email.split("@")[0],photoURL:N.photoURL||`https://ui-avatars.com/api/?name=${encodeURIComponent(N.displayName||N.email)}&background=0D8ABC&color=fff`,lastLogin:new Date().toISOString(),createdAt:new Date().toISOString()}),o(j)}catch(j){console.error("Error managing user profile:",j)}}else t(null),o(null);c(!1)})),[]);const T={user:e,userProfile:s,loading:l,signUpWithEmail:async(P,N,j)=>{try{const W=(await GC(kt,P,N)).user;return await Ht.updateUser(W.uid,{displayName:j||P.split("@")[0],photoURL:`https://ui-avatars.com/api/?name=${encodeURIComponent(j||P)}&background=0D8ABC&color=fff`}),W}catch(L){throw console.error("Signup Error:",L),new Error(Af(L.code))}},signInWithEmail:async(P,N)=>{try{return(await KC(kt,P,N)).user}catch(j){throw console.error("Login Error:",j),new Error(Af(j.code))}},signInWithGoogle:async()=>{const P=new Wr;P.setCustomParameters({prompt:"select_account"});try{const N=await vk(kt,P);return console.log("Google sign in successful"),N.user}catch(N){throw console.error("Google Auth Error:",N),new Error(Af(N.code))}},logout:async()=>JC(kt),isDevelopmentMode:rN,devLogin:({email:P,name:N})=>(console.error("Development login can only be used in development mode"),Promise.reject(new Error("Development login can only be used in development mode"))),createPledge:Ht.createPledge,getUserPledges:Ht.getUserPledges,updatePledge:Ht.updatePledge,deletePledge:Ht.deletePledge,createCertificate:Ht.createCertificate,getUserCertificates:Ht.getUserCertificates,saveAIInteraction:Ht.saveAIInteraction,getUserAIHistory:Ht.getUserAIHistory,updateUserProgress:Ht.updateUserProgress,getUserProgress:Ht.getUserProgress};return y.jsx(jE.Provider,{value:T,children:!l&&n})}function al({children:n}){const{user:e,loading:t}=Dn(),s=Yn();return t?y.jsx("div",{className:"min-h-screen flex items-center justify-center",children:y.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-eco-primary"})}):e?n:y.jsx(XT,{to:"/login",state:{from:s,formData:s.state?.formData},replace:!0})}function iN(){const{user:n,userProfile:e,logout:t}=Dn(),s=qi(),[o,l]=V.useState(!1),[c,d]=V.useState(!1),[f,m]=V.useState(!1),_=e?.displayName||n?.displayName||n?.email?.split("@")[0]||"User",x=e?.photoURL||n?.photoURL||`https://ui-avatars.com/api/?name=${encodeURIComponent(_)}&background=0D8ABC&color=fff`,T=async()=>{m(!0);try{await t(),l(!1),s("/")}catch(P){console.error("Logout error:",P)}finally{m(!1)}};return y.jsx("nav",{className:"bg-white shadow-sm w-full",children:y.jsxs("div",{className:"w-full mx-auto px-4 sm:px-6 lg:px-8",children:[y.jsxs("div",{className:"flex justify-between h-16",children:[y.jsx("div",{className:"flex items-center",children:y.jsx(rt,{to:"/",className:"flex items-center",children:y.jsx("span",{className:"text-xl font-bold text-green-600",children:"EcoPledge Portal"})})}),y.jsxs("div",{className:"hidden sm:ml-6 sm:flex sm:items-center sm:space-x-8",children:[y.jsx(rt,{to:"/",className:"inline-flex items-center px-1 pt-1 text-sm font-medium text-gray-900 hover:text-green-600 transition-colors",children:"Home"}),n&&y.jsx(rt,{to:"/dashboard",className:"inline-flex items-center px-1 pt-1 text-sm font-medium text-gray-500 hover:text-gray-900 transition-colors",children:"Dashboard"}),y.jsx(rt,{to:"/feedback",className:"inline-flex items-center px-1 pt-1 text-sm font-medium text-gray-500 hover:text-gray-900 transition-colors",children:"Feedback"}),y.jsx(rt,{to:"/certificate",className:"inline-flex items-center px-1 pt-1 text-sm font-medium text-gray-500 hover:text-gray-900 transition-colors",children:"Certificate"})]}),y.jsx("div",{className:"hidden sm:flex sm:items-center space-x-4",children:n?y.jsxs("div",{className:"relative group",children:[y.jsxs("button",{className:"flex items-center space-x-2 focus:outline-none hover:bg-gray-50 px-3 py-2 rounded-md transition-colors",onClick:()=>l(!o),children:[y.jsx("img",{className:"h-8 w-8 rounded-full border-2 border-green-200",src:x,alt:_}),y.jsx("span",{className:"text-sm font-medium text-gray-700 hidden sm:block",children:_}),y.jsx("svg",{className:"h-4 w-4 text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:y.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})]}),o&&y.jsxs("div",{className:"absolute right-0 mt-2 w-56 bg-white rounded-md shadow-lg ring-1 ring-black ring-opacity-5 py-1 z-50",children:[y.jsxs("div",{className:"px-4 py-2 border-b border-gray-100",children:[y.jsx("p",{className:"text-sm font-medium text-gray-900",children:_}),y.jsx("p",{className:"text-xs text-gray-500 truncate",children:n.email})]}),y.jsx(rt,{to:"/dashboard",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors",onClick:()=>l(!1),children:y.jsxs("div",{className:"flex items-center",children:[y.jsx("svg",{className:"h-4 w-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),"Dashboard"]})}),y.jsx(rt,{to:"/pledge",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors",onClick:()=>l(!1),children:y.jsxs("div",{className:"flex items-center",children:[y.jsx("svg",{className:"h-4 w-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"My Pledges"]})}),y.jsx("button",{onClick:T,disabled:f,className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors disabled:opacity-50",children:y.jsxs("div",{className:"flex items-center",children:[f?y.jsxs("svg",{className:"animate-spin h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",children:[y.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),y.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):y.jsx("svg",{className:"h-4 w-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),f?"Signing out...":"Sign Out"]})})]})]}):y.jsxs("div",{className:"flex items-center space-x-3",children:[y.jsx(rt,{to:"/login",className:"text-gray-500 hover:text-gray-700 px-3 py-2 text-sm font-medium transition-colors",children:"Sign In"}),y.jsx(rt,{to:"/login?signup=true",className:"bg-green-600 text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition-colors shadow-sm",children:"Get Started"})]})}),y.jsx("div",{className:"sm:hidden flex items-center",children:y.jsx("button",{onClick:()=>d(!c),className:"inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-green-500",children:y.jsx("svg",{className:"h-6 w-6",stroke:"currentColor",fill:"none",viewBox:"0 0 24 24",children:c?y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}):y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})})]}),c&&y.jsxs("div",{className:"sm:hidden",children:[y.jsxs("div",{className:"pt-2 pb-3 space-y-1",children:[y.jsx(rt,{to:"/",className:"block pl-3 pr-4 py-2 border-l-4 border-transparent text-base font-medium text-gray-700 hover:text-gray-900 hover:bg-gray-50 hover:border-gray-300",onClick:()=>d(!1),children:"Home"}),n&&y.jsx(rt,{to:"/dashboard",className:"block pl-3 pr-4 py-2 border-l-4 border-transparent text-base font-medium text-gray-700 hover:text-gray-900 hover:bg-gray-50 hover:border-gray-300",onClick:()=>d(!1),children:"Dashboard"}),y.jsx(rt,{to:"/feedback",className:"block pl-3 pr-4 py-2 border-l-4 border-transparent text-base font-medium text-gray-700 hover:text-gray-900 hover:bg-gray-50 hover:border-gray-300",onClick:()=>d(!1),children:"Feedback"}),y.jsx(rt,{to:"/certificate",className:"block pl-3 pr-4 py-2 border-l-4 border-transparent text-base font-medium text-gray-700 hover:text-gray-900 hover:bg-gray-50 hover:border-gray-300",onClick:()=>d(!1),children:"Certificate"})]}),y.jsx("div",{className:"pt-4 pb-3 border-t border-gray-200",children:n?y.jsxs("div",{className:"space-y-1",children:[y.jsxs("div",{className:"flex items-center px-4",children:[y.jsx("img",{className:"h-10 w-10 rounded-full",src:n.photoURL||`https://ui-avatars.com/api/?name=${encodeURIComponent(n.displayName||"User")}&background=10B981&color=fff`,alt:n.displayName||"User"}),y.jsxs("div",{className:"ml-3",children:[y.jsx("div",{className:"text-base font-medium text-gray-800",children:n.displayName||"User"}),y.jsx("div",{className:"text-sm font-medium text-gray-500",children:n.email})]})]}),y.jsx(rt,{to:"/pledge",className:"block px-4 py-2 text-base font-medium text-gray-500 hover:text-gray-800 hover:bg-gray-100",onClick:()=>d(!1),children:"My Pledges"}),y.jsx("button",{onClick:()=>{T(),d(!1)},disabled:f,className:"block w-full text-left px-4 py-2 text-base font-medium text-gray-500 hover:text-gray-800 hover:bg-gray-100 disabled:opacity-50",children:f?"Signing out...":"Sign Out"})]}):y.jsxs("div",{className:"space-y-1",children:[y.jsx(rt,{to:"/login",className:"block px-4 py-2 text-base font-medium text-gray-500 hover:text-gray-800 hover:bg-gray-100",onClick:()=>d(!1),children:"Sign In"}),y.jsx(rt,{to:"/login?signup=true",className:"block mx-4 py-2 px-4 text-base font-medium text-white bg-green-600 hover:bg-green-700 rounded-md text-center",onClick:()=>d(!1),children:"Get Started"})]})})]})]})})}/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oN=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),aN=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),V_=n=>{const e=aN(n);return e.charAt(0).toUpperCase()+e.slice(1)},FE=(...n)=>n.filter((e,t,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===t).join(" ").trim(),lN=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var uN={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cN=V.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:o="",children:l,iconNode:c,...d},f)=>V.createElement("svg",{ref:f,...uN,width:e,height:e,stroke:n,strokeWidth:s?Number(t)*24/Number(e):t,className:FE("lucide",o),...!l&&!lN(d)&&{"aria-hidden":"true"},...d},[...c.map(([m,_])=>V.createElement(m,_)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jt=(n,e)=>{const t=V.forwardRef(({className:s,...o},l)=>V.createElement(cN,{ref:l,iconNode:e,className:FE(`lucide-${oN(V_(n))}`,`lucide-${n}`,s),...o}));return t.displayName=V_(n),t};/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hN=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],Vl=jt("award",hN);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dN=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],ch=jt("brain",dN);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fN=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],xm=jt("calendar",fN);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pN=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],ml=jt("circle-check-big",pN);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mN=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],gN=jt("circle-x",mN);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yN=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],UE=jt("download",yN);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vN=[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4",key:"1slcih"}]],_N=jt("flame",vN);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wN=[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]],Tm=jt("leaf",wN);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EN=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],$E=jt("lightbulb",EN);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xN=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],M_=jt("message-square",xN);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TN=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],BE=jt("refresh-cw",TN);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IN=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],j_=jt("sparkles",IN);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SN=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],zE=jt("target",SN);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CN=[["path",{d:"m17 14 3 3.3a1 1 0 0 1-.7 1.7H4.7a1 1 0 0 1-.7-1.7L7 14h-.3a1 1 0 0 1-.7-1.7L9 9h-.2A1 1 0 0 1 8 7.3L12 3l4 4.3a1 1 0 0 1-.8 1.7H15l3 3.3a1 1 0 0 1-.7 1.7H17Z",key:"cpyugq"}],["path",{d:"M12 22v-3",key:"kmzjlo"}]],kN=jt("tree-pine",CN);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RN=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Ml=jt("trending-up",RN);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AN=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],PN=jt("trophy",AN);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bN=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],F_=jt("users",bN);function NN(){const n=localStorage.getItem("lastPledgeCount"),e=n?parseInt(n,10):0,[t,s]=V.useState(e),[o,l]=V.useState(null),[c,d]=V.useState(!1);return V.useEffect(()=>{let f=null,m=null;const _=()=>{fetch("http://localhost:5000/api/pledges/count").then(P=>{if(!P.ok)throw new Error(`HTTP error! Status: ${P.status}`);return P.json()}).then(P=>{if(P&&P.count!==void 0){s(P.count),l(null);try{localStorage.setItem("lastPledgeCount",P.count)}catch(N){console.warn("Failed to cache pledge count",N)}}}).catch(P=>{console.error("Error fetching pledge count:",P),l("Failed to load real-time data");try{const N=localStorage.getItem("lastPledgeCount");N&&s(parseInt(N,10))}catch(N){console.warn("Failed to retrieve cached count",N)}})};_();const x=setInterval(_,3e4),T=()=>{try{f&&f.close();try{f=new WebSocket("ws://localhost:5000")}catch(P){console.error("Failed to create WebSocket connection:",P);return}f.onopen=()=>{console.log("WebSocket connected"),d(!0),l(null)},f.onmessage=P=>{try{const N=JSON.parse(P.data);N.type==="pledgeCount"&&N.count!==void 0&&s(N.count)}catch(N){console.error("WebSocket message parsing error:",N)}},f.onerror=P=>{console.error("WebSocket error:",P),l("WebSocket connection error"),d(!1)},f.onclose=()=>{console.log("WebSocket disconnected"),d(!1),m=setTimeout(T,5e3)}}catch(P){console.error("WebSocket setup error:",P)}};return T(),()=>{clearInterval(x),clearTimeout(m),f&&f.close()}},[]),{count:t,error:o,isConnected:c}}function qE(){const{count:n,error:e}=NN();return y.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg text-center max-w-4xl mx-auto w-full",children:[y.jsx("h2",{className:"text-3xl font-bold text-eco-secondary mb-2",children:"Pledges Taken"}),y.jsx("div",{className:"text-6xl font-bold text-eco-primary",children:n!=null?Number(n).toLocaleString():"0"}),y.jsx("p",{className:"mt-2 text-gray-600",children:"People committed to making a difference"}),e&&y.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"(Using cached data - real-time updates unavailable)"})]})}function DN(){const[n,e]=V.useState(1234),[t,s]=V.useState({totalUsers:5678,co2Saved:12345,treesPlanted:890}),o=qi(),{user:l,isDevelopmentMode:c}=Dn(),d=[{title:"AI Pledge Assistant",description:"Get personalized environmental recommendations powered by AI",icon:ch,action:()=>{l?o("/dashboard"):o("/login?signup=true",{state:{from:{pathname:"/dashboard"}}})},buttonText:l?"Try AI Assistant":"Sign Up for AI Help"},{title:"Track Your Impact",description:"Monitor your environmental contributions and see real results",icon:Ml,action:()=>{l?o("/dashboard"):o("/login?signup=true",{state:{from:{pathname:"/dashboard"}}})},buttonText:l?"View Dashboard":"Start Tracking"},{title:"Get Certificates",description:"Earn certificates for your environmental achievements",icon:Vl,action:()=>{l?o("/certificate"):o("/login?signup=true",{state:{from:{pathname:"/certificate"}}})},buttonText:l?"My Certificates":"Earn Certificates"},{title:"Join Community",description:"Connect with like-minded environmental advocates",icon:F_,action:()=>{l?o("/feedback"):o("/login?signup=true",{state:{from:{pathname:"/feedback"}}})},buttonText:l?"Community":"Join Now"},{title:"Share Feedback",description:"Help us improve and share your environmental journey",icon:M_,action:()=>{l?o("/feedback"):o("/login?signup=true",{state:{from:{pathname:"/feedback"}}})},buttonText:l?"Give Feedback":"Share Experience"},{title:"Make Pledges",description:"Commit to sustainable practices and track your progress",icon:zE,action:()=>{l?o("/pledge"):o("/login?signup=true",{state:{from:{pathname:"/pledge"}}})},buttonText:l?"My Pledges":"Make First Pledge"}];return y.jsx("div",{className:"min-h-screen w-full bg-gray-50",children:y.jsxs("main",{className:"w-full mx-auto py-12 px-4 sm:px-6 lg:px-8",children:[y.jsxs("div",{className:"text-center",children:[y.jsxs("h1",{className:"text-4xl tracking-tight font-extrabold text-gray-900 sm:text-5xl md:text-6xl",children:[y.jsx("span",{className:"block",children:"Take the Pledge for a"}),y.jsx("span",{className:"block text-green-600",children:"Greener Tomorrow"})]}),y.jsx("p",{className:"mt-3 max-w-md mx-auto text-base text-gray-500 sm:text-lg md:mt-5 md:text-xl md:max-w-3xl",children:"Join thousands of others in committing to sustainable practices and making a positive impact on our environment."}),y.jsx("div",{className:"mt-5 max-w-lg mx-auto sm:flex sm:justify-center md:mt-8 gap-4",children:l?y.jsx("div",{className:"rounded-md shadow",children:y.jsx("button",{className:"w-full flex items-center justify-center px-8 py-3 border border-transparent text-base font-medium rounded-md text-white bg-green-600 hover:bg-green-700 md:py-4 md:text-lg md:px-10 transition-colors shadow-lg",onClick:()=>o("/pledge"),children:"Create New Pledge"})}):y.jsxs(y.Fragment,{children:[y.jsx("div",{className:"rounded-md shadow",children:y.jsx(rt,{to:"/login?signup=true",className:"w-full flex items-center justify-center px-8 py-3 border border-transparent text-base font-medium rounded-md text-white bg-green-600 hover:bg-green-700 md:py-4 md:text-lg md:px-10 transition-colors shadow-lg",children:"Sign Up"})}),y.jsx("div",{className:"mt-3 sm:mt-0 rounded-md shadow",children:y.jsx(rt,{to:"/login",className:"w-full flex items-center justify-center px-8 py-3 border border-green-600 text-base font-medium rounded-md text-green-600 bg-white hover:bg-green-50 md:py-4 md:text-lg md:px-10 transition-colors",children:"Login"})})]})})]}),y.jsx("div",{className:"mt-16",children:y.jsx(qE,{count:n})}),y.jsxs("div",{className:"mt-16 bg-white rounded-lg shadow-sm p-8",children:[y.jsxs("div",{className:"text-center mb-8",children:[y.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"Our Impact So Far"}),y.jsx("p",{className:"mt-2 text-lg text-gray-600",children:"Together, we're making a real difference"})]}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[y.jsxs("div",{className:"text-center",children:[y.jsx("div",{className:"flex items-center justify-center w-16 h-16 bg-green-100 rounded-full mx-auto mb-4",children:y.jsx(F_,{className:"h-8 w-8 text-green-600"})}),y.jsx("div",{className:"text-3xl font-bold text-gray-900",children:t.totalUsers.toLocaleString()}),y.jsx("div",{className:"text-sm text-gray-600",children:"Active Members"})]}),y.jsxs("div",{className:"text-center",children:[y.jsx("div",{className:"flex items-center justify-center w-16 h-16 bg-blue-100 rounded-full mx-auto mb-4",children:y.jsx(Tm,{className:"h-8 w-8 text-blue-600"})}),y.jsx("div",{className:"text-3xl font-bold text-gray-900",children:t.co2Saved.toLocaleString()}),y.jsx("div",{className:"text-sm text-gray-600",children:"kg CO₂ Saved"})]}),y.jsxs("div",{className:"text-center",children:[y.jsx("div",{className:"flex items-center justify-center w-16 h-16 bg-yellow-100 rounded-full mx-auto mb-4",children:y.jsx(Vl,{className:"h-8 w-8 text-yellow-600"})}),y.jsx("div",{className:"text-3xl font-bold text-gray-900",children:t.treesPlanted.toLocaleString()}),y.jsx("div",{className:"text-sm text-gray-600",children:"Trees Planted"})]})]})]}),y.jsxs("div",{className:"mt-16",children:[y.jsxs("div",{className:"text-center mb-12",children:[y.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"Everything You Need"}),y.jsx("p",{className:"mt-4 text-lg text-gray-600",children:"Powerful tools to help you make a lasting environmental impact"})]}),y.jsx("div",{className:"grid grid-cols-1 gap-8 sm:grid-cols-2 lg:grid-cols-3",children:d.map((f,m)=>{const _=f.icon;return y.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 hover:shadow-md transition-shadow",children:[y.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-green-100 rounded-lg mb-4",children:y.jsx(_,{className:"h-6 w-6 text-green-600"})}),y.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:f.title}),y.jsx("p",{className:"text-gray-600 mb-4",children:f.description}),y.jsx("button",{onClick:f.action,className:"w-full bg-green-600 text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-green-700 transition-colors",children:f.buttonText})]},m)})})]}),y.jsxs("div",{className:"mt-20 bg-green-600 rounded-lg p-8 text-center",children:[y.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:"Ready to Make a Difference?"}),y.jsx("p",{className:"text-xl text-green-100 mb-8",children:"Join our community and start your environmental journey today"}),y.jsx("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:l?y.jsxs(y.Fragment,{children:[y.jsx("button",{onClick:()=>o("/pledge"),className:"bg-white text-green-600 px-8 py-3 rounded-md text-lg font-semibold hover:bg-gray-100 transition-colors",children:"Make a Pledge"}),y.jsx("button",{onClick:()=>o("/dashboard"),className:"border-2 border-white text-white px-8 py-3 rounded-md text-lg font-semibold hover:bg-green-700 transition-colors",children:"View Dashboard"})]}):y.jsxs(y.Fragment,{children:[y.jsx(rt,{to:"/login?signup=true",className:"bg-white text-green-600 px-8 py-3 rounded-md text-lg font-semibold hover:bg-gray-100 transition-colors",children:"Sign Up Free"}),y.jsx(rt,{to:"/login",className:"border-2 border-white text-white px-8 py-3 rounded-md text-lg font-semibold hover:bg-green-700 transition-colors",children:"Login"})]})})]}),y.jsxs("div",{className:"mt-16 grid grid-cols-2 md:grid-cols-4 gap-4",children:[y.jsxs("button",{onClick:()=>{l?o("/certificate"):o("/login?signup=true",{state:{from:{pathname:"/certificate"}}})},className:"flex flex-col items-center p-6 bg-white rounded-lg shadow-sm hover:shadow-md transition-shadow",children:[y.jsx(UE,{className:"h-8 w-8 text-green-600 mb-2"}),y.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Certificates"})]}),y.jsxs("button",{onClick:()=>{l?o("/feedback"):o("/login?signup=true",{state:{from:{pathname:"/feedback"}}})},className:"flex flex-col items-center p-6 bg-white rounded-lg shadow-sm hover:shadow-md transition-shadow",children:[y.jsx(M_,{className:"h-8 w-8 text-blue-600 mb-2"}),y.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Feedback"})]}),y.jsxs("button",{onClick:()=>{l?o("/dashboard"):o("/login?signup=true",{state:{from:{pathname:"/dashboard"}}})},className:"flex flex-col items-center p-6 bg-white rounded-lg shadow-sm hover:shadow-md transition-shadow",children:[y.jsx(ch,{className:"h-8 w-8 text-purple-600 mb-2"}),y.jsx("span",{className:"text-sm font-medium text-gray-900",children:"AI Assistant"})]}),y.jsxs("button",{onClick:()=>{l?o("/dashboard"):o("/login?signup=true",{state:{from:{pathname:"/dashboard"}}})},className:"flex flex-col items-center p-6 bg-white rounded-lg shadow-sm hover:shadow-md transition-shadow",children:[y.jsx(Ml,{className:"h-8 w-8 text-yellow-600 mb-2"}),y.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Track Progress"})]})]})]})})}function ON(){const{user:n,signInWithGoogle:e,signUpWithEmail:t,signInWithEmail:s}=Dn(),o=qi(),l=Yn(),[c,d]=V.useState(!1),[f,m]=V.useState(""),[_,x]=V.useState(!1),[T,P]=V.useState({email:"",password:"",confirmPassword:"",displayName:"",phoneNumber:"",organization:""});V.useEffect(()=>{n&&(d(!1),o(l.state?.from?.pathname||"/dashboard"))},[n,o,l]);const N=W=>{const{name:G,value:Z}=W.target;P(ne=>({...ne,[G]:Z}))},j=async W=>{if(W.preventDefault(),!c){d(!0),m("");try{if(_){if(T.password!==T.confirmPassword){m("Passwords do not match"),d(!1);return}if(!T.displayName?.trim()){m("Please enter your name"),d(!1);return}await t(T.email,T.password,T.displayName)}else await s(T.email,T.password)}catch(G){m(G.message),d(!1)}}},L=async()=>{if(!c){d(!0),m("");try{await e()}catch(W){m(W.message),d(!1)}}};return y.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:y.jsxs("div",{className:"max-w-md w-full space-y-8",children:[y.jsxs("div",{children:[y.jsx("div",{className:"flex justify-center",children:y.jsx("div",{className:"w-16 h-16 bg-green-500 rounded-full flex items-center justify-center",children:y.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})})})}),y.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:_?"Create your account":"Welcome back"}),y.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:_?"Join EcoPledge and start making a difference today":"Sign in to continue your environmental journey"})]}),f&&y.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-md",children:y.jsx("p",{className:"text-sm",children:f})}),y.jsxs("div",{className:"mt-8 space-y-6",children:[y.jsxs("form",{onSubmit:j,className:"space-y-6",children:[_&&y.jsxs("div",{children:[y.jsx("label",{htmlFor:"displayName",className:"block text-sm font-medium text-gray-700",children:"Full Name"}),y.jsx("input",{type:"text",id:"displayName",name:"displayName",autoComplete:"name",required:_,value:T.displayName,onChange:N,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500",placeholder:"Enter your full name"})]}),y.jsxs("div",{children:[y.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email Address"}),y.jsx("input",{type:"email",id:"email",name:"email",autoComplete:"email",required:!0,value:T.email,onChange:N,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500",placeholder:"you@example.com"})]}),y.jsxs("div",{children:[y.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),y.jsx("input",{type:"password",id:"password",name:"password",autoComplete:_?"new-password":"current-password",required:!0,value:T.password,onChange:N,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500",placeholder:_?"Create a strong password":"Enter your password"})]}),_&&y.jsxs(y.Fragment,{children:[y.jsxs("div",{children:[y.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700",children:"Confirm Password"}),y.jsx("input",{type:"password",id:"confirmPassword",name:"confirmPassword",autoComplete:"new-password",required:_,value:T.confirmPassword,onChange:N,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500",placeholder:"Confirm your password"})]}),y.jsxs("div",{children:[y.jsx("label",{htmlFor:"phoneNumber",className:"block text-sm font-medium text-gray-700",children:"Phone Number"}),y.jsx("input",{type:"tel",id:"phoneNumber",name:"phoneNumber",autoComplete:"tel",value:T.phoneNumber,onChange:N,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500",placeholder:"Optional"})]}),y.jsxs("div",{children:[y.jsx("label",{htmlFor:"organization",className:"block text-sm font-medium text-gray-700",children:"Organization"}),y.jsx("input",{type:"text",id:"organization",name:"organization",autoComplete:"organization",value:T.organization,onChange:N,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500",placeholder:"Optional"})]})]}),y.jsx("div",{children:y.jsx("button",{type:"submit",disabled:c,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:c?_?"Creating account...":"Signing in...":_?"Create Account":"Sign In"})})]}),y.jsxs("div",{className:"mt-6",children:[y.jsxs("div",{className:"relative",children:[y.jsx("div",{className:"absolute inset-0 flex items-center",children:y.jsx("div",{className:"w-full border-t border-gray-300"})}),y.jsx("div",{className:"relative flex justify-center text-sm",children:y.jsx("span",{className:"px-2 bg-gray-50 text-gray-500",children:"Or continue with"})})]}),y.jsx("div",{className:"mt-6",children:y.jsxs("button",{onClick:L,disabled:c,className:"w-full flex items-center justify-center gap-3 px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[y.jsxs("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",children:[y.jsx("path",{fill:"#FFC107",d:"M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z"}),y.jsx("path",{fill:"#FF3D00",d:"M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z"}),y.jsx("path",{fill:"#4CAF50",d:"M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z"}),y.jsx("path",{fill:"#1976D2",d:"M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z"})]}),c?"Signing in...":"Continue with Google"]})})]}),y.jsxs("div",{className:"mt-6 text-center text-sm",children:[y.jsx("span",{className:"text-gray-600",children:_?"Already have an account?":"Don't have an account?"}),y.jsx("button",{type:"button",onClick:()=>x(!_),className:"ml-1 font-medium text-green-600 hover:text-green-500 focus:outline-none focus:underline transition-colors",children:_?"Sign In":"Sign Up"})]})]})]})})}function LN(){const n=qi(),e=Yn(),{user:t,devLogin:s}=Dn(),[o,l]=V.useState(""),[c,d]=V.useState("Development User"),[f,m]=V.useState(!1),[_,x]=V.useState(null);if(t){const P=e.state?.from?.pathname||"/";n(P)}const T=async P=>{if(P.preventDefault(),!o){x("Please enter an email address");return}try{m(!0),x(null),await s({email:o,name:c}),n("/pledge")}catch(N){console.error("Dev login error:",N),x(N.message||"Failed to log in")}finally{m(!1)}};return y.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:y.jsxs("div",{className:"max-w-md w-full space-y-8",children:[y.jsxs("div",{children:[y.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Development Login"}),y.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"This is for development purposes only"})]}),_&&y.jsx("div",{className:"p-3 bg-red-100 text-red-700 border border-red-300 rounded-md mb-4",children:_}),y.jsxs("form",{className:"mt-8 space-y-6",onSubmit:T,children:[y.jsxs("div",{className:"rounded-md shadow-sm space-y-4",children:[y.jsxs("div",{children:[y.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),y.jsx("input",{id:"name",name:"name",type:"text",className:"appearance-none rounded-md relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-eco-primary focus:border-eco-primary sm:text-sm",placeholder:"Your name",value:c,onChange:P=>d(P.target.value)})]}),y.jsxs("div",{children:[y.jsx("label",{htmlFor:"email-address",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email address"}),y.jsx("input",{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,className:"appearance-none rounded-md relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-eco-primary focus:border-eco-primary sm:text-sm",placeholder:"Email address",value:o,onChange:P=>l(P.target.value)})]})]}),y.jsx("div",{children:y.jsx("button",{type:"submit",disabled:f,className:`group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-eco-secondary hover:bg-eco-primary focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-eco-primary ${f?"opacity-70 cursor-not-allowed":""}`,children:f?"Logging in...":"Log in (Development Mode)"})})]}),y.jsx("div",{className:"text-center mt-4",children:y.jsx(rt,{to:"/login",className:"text-sm text-eco-secondary hover:text-eco-primary",children:"Back to Regular Login"})})]})})}const VN=()=>{const[n,e]=V.useState(null),[t,s]=V.useState(!1),o=async()=>{s(!0);try{const l=await fetch("http://localhost:5000/api/ai/quickTips");if(l.ok){const c=await l.json();e(c.data.tip)}}catch(l){console.error("Error fetching tip:",l),e({title:"Start Small",tip:"Begin with one sustainable transport choice per week - consistency beats perfection!",impact:"Even one day per week can save 2-3 kg CO₂ monthly"})}finally{s(!1)}};return V.useEffect(()=>{o()},[]),y.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 rounded-lg p-6 border border-green-200",children:[y.jsxs("div",{className:"flex items-center justify-between mb-4",children:[y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx($E,{className:"w-5 h-5 text-yellow-500"}),y.jsx("h3",{className:"font-semibold text-green-800",children:"💡 AI Sustainability Tip"})]}),y.jsx("button",{onClick:o,disabled:t,className:"p-2 text-green-600 hover:bg-green-100 rounded-full transition-colors",children:y.jsx(BE,{className:`w-4 h-4 ${t?"animate-spin":""}`})})]}),n&&y.jsxs("div",{className:"space-y-3",children:[y.jsxs("div",{children:[y.jsx("h4",{className:"font-medium text-green-900",children:n.title}),y.jsx("p",{className:"text-green-700 text-sm leading-relaxed",children:n.tip})]}),y.jsx("div",{className:"bg-green-100 rounded-md p-3",children:y.jsxs("p",{className:"text-xs font-medium text-green-800",children:[y.jsx(Tm,{className:"w-3 h-3 inline mr-1"}),"Impact: ",n.impact]})})]})]})},MN=()=>{const{user:n}=Dn(),[e,t]=V.useState({totalPledges:0,totalDistanceSaved:0,totalCO2Reduced:0,thisMonthPledges:0}),[s,o]=V.useState(null),[l,c]=V.useState(!1),[d,f]=V.useState(null),[m,_]=V.useState(null),x=async()=>{try{console.log("Fetching user stats for:",n?.uid);const j=await fetch(`http://localhost:5000/api/pledges/user/${n?.uid}`);if(!j.ok)throw new Error(`Failed to fetch pledges: ${j.status}`);const L=await j.json();console.log("Pledges fetched from backend:",L);let W=[];L.success&&L.data&&(W=Array.isArray(L.data)?L.data:[L.data]),console.log("Processed pledges:",W);const G=new Date,Z=G.getMonth(),ne=G.getFullYear(),ee=W.filter(C=>{let b;return C.createdAt?.toDate?b=new Date(C.createdAt.toDate()):typeof C.createdAt=="string"?b=new Date(C.createdAt):C.createdAt instanceof Date?b=C.createdAt:b=new Date,b.getMonth()===Z&&b.getFullYear()===ne}),se=C=>{let b=0,D=0;return C.forEach(F=>{const R=F.pledgeText?.toLowerCase()||"",Oe=R.match(/(\d+)\s*km/i);let wt=(Oe?parseInt(Oe[1]):5)*20,Be=.12;R.includes("bicycle")||R.includes("bike")?Be=.15:R.includes("public transport")||R.includes("bus")?Be=.08:R.includes("walk")&&(Be=.15),b+=wt,D+=wt*Be}),{totalDistance:b,totalCO2:D}},k=se(W),S=se(ee);t({totalPledges:W.length,totalDistanceSaved:Math.round(k.totalDistance),totalCO2Reduced:Math.round(k.totalCO2*10)/10,thisMonthPledges:ee.length,monthlyDistance:Math.round(S.totalDistance),monthlyCO2:Math.round(S.totalCO2*10)/10})}catch(N){console.error("Error fetching user stats:",N)}},T=async()=>{if(n?.uid){c(!0),f(null);try{console.log("Generating AI insights with stats:",e);const N=await fetch("http://localhost:5000/api/ai/ecoInsights",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:n.uid,timeframe:"month"})});if(!N.ok)throw new Error(`HTTP error! status: ${N.status}`);const j=await N.json();if(console.log("AI insights response:",j),j.success)o(j.data.insights),_(new Date);else throw new Error(j.message||"Failed to generate insights")}catch(N){console.error("Error generating AI insights:",N),f(N.message),o({summary:`Great progress! You've made ${e.thisMonthPledges} eco-pledges this month.`,comparison:"You're contributing more to sustainability than the average person!",improvements:["Consider expanding to other eco-friendly areas","Share your journey with friends to inspire others","Set monthly carbon reduction goals"],milestone:"🌱 Keep up the excellent work! Every small step counts!"}),_(new Date)}finally{c(!1)}}};V.useEffect(()=>{n?.uid&&x()},[n]),V.useEffect(()=>{e.totalPledges>0&&!s&&T()},[e]);const P=({icon:N,title:j,value:L,subtitle:W,color:G="green"})=>y.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 border-l-4 border-green-500",children:y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs("div",{children:[y.jsx("p",{className:"text-sm font-medium text-gray-600",children:j}),y.jsx("p",{className:"text-2xl font-bold text-gray-900",children:L}),W&&y.jsx("p",{className:"text-xs text-gray-500 mt-1",children:W})]}),y.jsx("div",{className:`p-3 rounded-full bg-${G}-100`,children:y.jsx(N,{className:`w-6 h-6 text-${G}-600`})})]})});return y.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:y.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[y.jsxs("div",{className:"mb-8",children:[y.jsxs("h1",{className:"text-3xl font-bold text-gray-900",children:["Welcome back, ",n?.displayName||n?.email,"! 🌿"]}),y.jsx("p",{className:"text-gray-600 mt-2",children:"Track your environmental impact and get personalized sustainability insights."})]}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[y.jsx(P,{icon:zE,title:"Total Pledges",value:e.totalPledges,subtitle:"Lifetime commitments",color:"blue"}),y.jsx(P,{icon:Ml,title:"Distance Saved",value:`${e.totalDistanceSaved} km`,subtitle:"Sustainable transport",color:"green"}),y.jsx(P,{icon:kN,title:"CO₂ Reduced",value:`${e.totalCO2Reduced} kg`,subtitle:"Carbon footprint saved",color:"emerald"}),y.jsx(P,{icon:xm,title:"This Month",value:e.thisMonthPledges,subtitle:"New pledges made",color:"purple"})]}),y.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[y.jsxs("div",{className:"flex items-center justify-between mb-6",children:[y.jsxs("div",{className:"flex items-center space-x-3",children:[y.jsx("div",{className:"p-2 bg-gradient-to-r from-green-400 to-blue-500 rounded-lg",children:y.jsx(ch,{className:"w-6 h-6 text-white"})}),y.jsxs("div",{children:[y.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"AI-Generated Eco Insights"}),y.jsx("p",{className:"text-sm text-gray-600",children:"Personalized sustainability analysis"})]})]}),y.jsxs("button",{onClick:T,disabled:l,className:"flex items-center space-x-2 px-4 py-2 bg-green-500 hover:bg-green-600 disabled:bg-gray-300 text-white rounded-lg transition-colors",children:[y.jsx(BE,{className:`w-4 h-4 ${l?"animate-spin":""}`}),y.jsx("span",{children:l?"Generating...":"Regenerate Insight"})]})]}),l?y.jsx("div",{className:"flex items-center justify-center py-12",children:y.jsxs("div",{className:"animate-pulse flex items-center space-x-4",children:[y.jsx("div",{className:"w-8 h-8 bg-green-200 rounded-full"}),y.jsxs("div",{className:"space-y-2",children:[y.jsx("div",{className:"h-4 bg-green-200 rounded w-64"}),y.jsx("div",{className:"h-4 bg-green-200 rounded w-48"})]})]})}):s?y.jsxs("div",{className:"space-y-6",children:[y.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 rounded-lg p-4",children:[y.jsx("h3",{className:"font-semibold text-green-800 mb-2",children:"📊 Your Impact Summary"}),y.jsx("p",{className:"text-green-700 leading-relaxed",children:s.summary})]}),y.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[y.jsx("h3",{className:"font-semibold text-blue-800 mb-2",children:"🏆 How You Compare"}),y.jsx("p",{className:"text-blue-700 leading-relaxed",children:s.comparison})]}),s.improvements&&s.improvements.length>0&&y.jsxs("div",{className:"bg-purple-50 rounded-lg p-4",children:[y.jsx("h3",{className:"font-semibold text-purple-800 mb-2",children:"💡 Suggestions for Growth"}),y.jsx("ul",{className:"space-y-2",children:s.improvements.map((N,j)=>y.jsxs("li",{className:"flex items-start text-purple-700",children:[y.jsx("span",{className:"text-purple-500 mr-2",children:"•"}),N]},j))})]}),s.milestone&&y.jsxs("div",{className:"bg-yellow-50 rounded-lg p-4",children:[y.jsx("h3",{className:"font-semibold text-yellow-800 mb-2",children:"🎉 Celebration"}),y.jsx("p",{className:"text-yellow-700 leading-relaxed",children:s.milestone})]}),m&&y.jsxs("p",{className:"text-xs text-gray-500 text-center",children:["Last updated: ",m.toLocaleString()]})]}):y.jsxs("div",{className:"text-center py-12 text-gray-500",children:[y.jsx(ch,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),y.jsx("p",{children:"Make some eco-pledges to see your personalized insights!"})]}),d&&y.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:y.jsxs("p",{className:"text-red-700",children:[y.jsx("strong",{children:"Note:"})," AI insights are currently using fallback mode. Your sustainability data is still being tracked accurately!"]})})]}),y.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 mb-8",children:[y.jsx("div",{className:"lg:col-span-1",children:y.jsx(VN,{})}),y.jsxs("div",{className:"lg:col-span-3 grid grid-cols-1 md:grid-cols-3 gap-6",children:[y.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 text-center",children:[y.jsx(Tm,{className:"w-8 h-8 text-green-500 mx-auto mb-4"}),y.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Make a New Pledge"}),y.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Commit to a new sustainable transportation habit"}),y.jsx("button",{onClick:()=>window.location.href="/pledge",className:"w-full bg-green-500 hover:bg-green-600 text-white font-medium py-2 px-4 rounded-lg transition-colors",children:"Create Pledge"})]}),y.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 text-center",children:[y.jsx(Vl,{className:"w-8 h-8 text-blue-500 mx-auto mb-4"}),y.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Get Certificate"}),y.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Download certificates for your eco-achievements"}),y.jsx("button",{onClick:()=>window.location.href="/certificate",className:"w-full bg-blue-500 hover:bg-blue-600 text-white font-medium py-2 px-4 rounded-lg transition-colors",children:"View Certificates"})]}),y.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 text-center",children:[y.jsx(Ml,{className:"w-8 h-8 text-purple-500 mx-auto mb-4"}),y.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Share Feedback"}),y.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Help us improve the EcoPledge platform"}),y.jsx("button",{onClick:()=>window.location.href="/feedback",className:"w-full bg-purple-500 hover:bg-purple-600 text-white font-medium py-2 px-4 rounded-lg transition-colors",children:"Give Feedback"})]})]})]})]})})},jN=["Public Transport","Bicycle","Walking","Carpooling","Electric Vehicle"];function FN({onSubmitSuccess:n}){const{user:e,loading:t}=Dn(),[s,o]=V.useState({name:"",rollNo:"",modeOfTransport:"",pledgeDate:new Date().toISOString().split("T")[0]}),[l,c]=V.useState(!1),[d,f]=V.useState(""),[m,_]=V.useState(!1),[x,T]=V.useState(""),[P,N]=V.useState(null),[j,L]=V.useState(!1);if(t)return y.jsx("div",{className:"max-w-md mx-auto bg-white p-8 rounded-lg shadow-md flex items-center justify-center",children:y.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-green-500"})});if(!e)return y.jsxs("div",{className:"max-w-md mx-auto bg-white p-8 rounded-lg shadow-md",children:[y.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Authentication Required"}),y.jsx("p",{className:"text-gray-600 mb-6",children:"Please log in to take the eco pledge and make a difference."}),y.jsxs("div",{className:"flex gap-4",children:[y.jsx("a",{href:"/login",className:"flex-1 inline-flex justify-center items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:"Login"}),y.jsx("a",{href:"/login?signup=true",className:"flex-1 inline-flex justify-center items-center px-4 py-2 border border-green-600 text-sm font-medium rounded-md text-green-600 bg-white hover:bg-green-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:"Sign Up"})]})]});const W=ee=>{const{name:se,value:k}=ee.target;o(S=>({...S,[se]:k}))},G=async()=>{if(!x.trim()){f("Please describe your daily routine to get AI suggestions");return}L(!0),f("");try{const se=await fetch("http://localhost:5000/api/ai/pledgeAssistant",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userRoutine:x,userId:e?.uid})});if(!se.ok)throw new Error("Failed to get AI suggestion");const k=await se.json();if(console.log("AI suggestion response:",k),k.success)N(k.data);else throw new Error(k.message||"Failed to generate suggestion")}catch(ee){console.error("Error getting AI suggestion:",ee),f("Failed to get AI suggestion. Please try again.")}finally{L(!1)}},Z=()=>{if(!P)return;const ee=P.suggestion.toLowerCase();let se="";ee.includes("bicycle")||ee.includes("bike")||ee.includes("cycling")?se="Bicycle":ee.includes("walk")?se="Walking":ee.includes("carpool")?se="Carpooling":ee.includes("public transport")||ee.includes("bus")||ee.includes("train")?se="Public Transport":ee.includes("electric")&&(se="Electric Vehicle"),se&&o(k=>({...k,modeOfTransport:se})),_(!1)},ne=async ee=>{if(ee.preventDefault(),!e){f("Please log in to submit a pledge");return}c(!0),f("");try{const se={name:s.name||e.displayName||"Anonymous User",email:e.email||"dev@example.com",pledgeText:`I pledge to use ${s.modeOfTransport} for my daily commute to reduce carbon emissions. ${s.rollNo?`(Roll Number: ${s.rollNo})`:""}`,actions:[s.modeOfTransport],rollNo:s.rollNo,modeOfTransport:s.modeOfTransport,pledgeDate:s.pledgeDate,userId:e.uid,location:{city:"Unknown",country:"Unknown"}};console.log("Current user:",e),console.log("Submitting pledge data to Firebase:",se);const k=await Ht.createPledge(se,e);console.log("Pledge saved to Firebase:",k);try{const C=await(await fetch("http://localhost:5000/api/pledges",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(se)})).json();console.log("Pledge saved to backend API:",C)}catch(S){console.error("Failed to save pledge to backend API:",S)}n?.(k),o({name:"",rollNo:"",modeOfTransport:"",pledgeDate:new Date().toISOString().split("T")[0]})}catch(se){console.error("Firebase pledge submission error:",se),se.message?.toLowerCase().includes("not authenticated")||se.code==="auth/not-authenticated"?f("Your session has expired. Please log in again to submit your pledge."):f(se.message||"Failed to submit pledge. Please try again.")}finally{c(!1)}};return y.jsxs("div",{className:"max-w-md mx-auto bg-white p-8 rounded-lg shadow-md",children:[y.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Take the Eco Pledge"}),y.jsxs("button",{type:"button",onClick:()=>_(!m),className:"w-full mb-4 flex items-center justify-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-500 to-indigo-600 text-white rounded-md hover:from-purple-600 hover:to-indigo-700 transition-all shadow-md",children:[y.jsx(j_,{className:"w-5 h-5"}),y.jsx("span",{className:"font-medium",children:m?"Hide AI Assistant":"Get AI-Powered Suggestions ✨"})]}),m&&y.jsxs("div",{className:"mb-6 p-4 bg-gradient-to-br from-purple-50 to-indigo-50 rounded-lg border-2 border-purple-200",children:[y.jsxs("div",{className:"flex items-start gap-2 mb-3",children:[y.jsx($E,{className:"w-5 h-5 text-purple-600 mt-1"}),y.jsxs("div",{children:[y.jsx("h3",{className:"font-semibold text-gray-900",children:"AI Pledge Assistant"}),y.jsx("p",{className:"text-sm text-gray-600",children:"Describe your daily routine and get personalized eco-friendly suggestions!"})]})]}),y.jsx("textarea",{value:x,onChange:ee=>T(ee.target.value),placeholder:"e.g., I drive 10km to work every day, sometimes take the bus...",className:"w-full p-3 border border-purple-200 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent mb-3 min-h-[100px]"}),y.jsx("button",{type:"button",onClick:G,disabled:j||!x.trim(),className:"w-full px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:j?y.jsxs(y.Fragment,{children:[y.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}),y.jsx("span",{children:"Generating Suggestions..."})]}):y.jsxs(y.Fragment,{children:[y.jsx(j_,{className:"w-4 h-4"}),y.jsx("span",{children:"Get AI Suggestion"})]})}),P&&y.jsxs("div",{className:"mt-4 p-4 bg-white rounded-lg border border-purple-200 shadow-sm",children:[y.jsxs("div",{className:"flex items-start gap-2 mb-2",children:[y.jsx(Ml,{className:"w-5 h-5 text-green-600 mt-1"}),y.jsxs("div",{children:[y.jsx("h4",{className:"font-semibold text-gray-900",children:"AI Recommendation"}),y.jsx("p",{className:"text-sm text-gray-700 mt-1",children:P.suggestion})]})]}),y.jsxs("div",{className:"mt-3 space-y-2",children:[y.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[y.jsx("span",{className:"font-medium text-gray-700",children:"💚 CO₂ Savings:"}),y.jsxs("span",{className:"text-green-600 font-semibold",children:[P.co2Reduction," kg/month"]})]}),y.jsxs("div",{className:"mt-2",children:[y.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"Action Steps:"}),y.jsx("ul",{className:"text-sm text-gray-600 space-y-1",children:P.actionSteps?.map((ee,se)=>y.jsxs("li",{className:"flex items-start gap-2",children:[y.jsx("span",{className:"text-purple-600",children:"•"}),y.jsx("span",{children:ee})]},se))})]}),y.jsx("div",{className:"mt-2 p-2 bg-purple-50 rounded text-sm text-purple-700 italic",children:P.encouragement})]}),y.jsx("button",{type:"button",onClick:Z,className:"mt-3 w-full px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 text-sm font-medium",children:"Apply This Suggestion to Form"})]})]}),d&&y.jsx("div",{className:"bg-red-50 text-red-700 p-4 rounded-md mb-4",children:d}),y.jsxs("form",{onSubmit:ne,className:"space-y-6",children:[y.jsxs("div",{children:[y.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Full Name"}),y.jsx("input",{type:"text",id:"name",name:"name",required:!0,value:s.name,onChange:W,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-eco-primary focus:ring-eco-primary"})]}),y.jsxs("div",{children:[y.jsx("label",{htmlFor:"rollNo",className:"block text-sm font-medium text-gray-700",children:"Roll Number"}),y.jsx("input",{type:"text",id:"rollNo",name:"rollNo",required:!0,value:s.rollNo,onChange:W,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-eco-primary focus:ring-eco-primary"})]}),y.jsxs("div",{children:[y.jsx("label",{htmlFor:"modeOfTransport",className:"block text-sm font-medium text-gray-700",children:"Mode of Transport"}),y.jsxs("select",{id:"modeOfTransport",name:"modeOfTransport",required:!0,value:s.modeOfTransport,onChange:W,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-eco-primary focus:ring-eco-primary",children:[y.jsx("option",{value:"",children:"Select a mode of transport"}),jN.map(ee=>y.jsx("option",{value:ee,children:ee},ee))]})]}),y.jsxs("div",{children:[y.jsx("label",{htmlFor:"pledgeDate",className:"block text-sm font-medium text-gray-700",children:"Pledge Date"}),y.jsx("input",{type:"date",id:"pledgeDate",name:"pledgeDate",required:!0,value:s.pledgeDate,onChange:W,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-eco-primary focus:ring-eco-primary"})]}),y.jsx("button",{type:"submit",disabled:l,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-eco-primary hover:bg-eco-secondary focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-eco-primary disabled:opacity-50",children:l?"Submitting...":"Submit Pledge"})]})]})}function UN(){qi();const n=()=>{alert("Thank you for taking the pledge!"),window.location.href="/"};return y.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 items-start",children:[y.jsx(FN,{onSubmitSuccess:n}),y.jsx("div",{className:"md:sticky md:top-24",children:y.jsx(qE,{})})]})})}function $N({title:n,titleId:e,...t},s){return V.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},t),n?V.createElement("title",{id:e},n):null,V.createElement("path",{fillRule:"evenodd",d:"M10.868 2.884c-.321-.772-1.415-.772-1.736 0l-1.83 4.401-4.753.381c-.833.067-1.171 1.107-.536 1.651l3.62 3.102-1.106 4.637c-.194.813.691 1.456 1.405 1.02L10 15.591l4.069 2.485c.713.436 1.598-.207 1.404-1.02l-1.106-4.637 3.62-3.102c.635-.544.297-1.584-.536-1.65l-4.752-.382-1.831-4.401Z",clipRule:"evenodd"}))}const HE=V.forwardRef($N);function BN({onSubmitSuccess:n}){const{user:e}=Dn(),[t,s]=V.useState(0),[o,l]=V.useState(""),[c,d]=V.useState(!1),[f,m]=V.useState(""),_=async x=>{if(x.preventDefault(),!t){m("Please select a rating");return}d(!0),m("");try{let T="dev-token";try{e&&typeof e.getIdToken=="function"?T=await e.getIdToken():e&&e.uid&&e.uid.startsWith("dev-")&&(T=`dev-token-${e.uid}`)}catch(L){console.error("Error getting token:",L)}const P={userId:e.uid,name:e.displayName||"Anonymous User",email:e.email,rating:t,comment:o,category:"general"};console.log("Submitting feedback:",P);const N=await fetch("http://localhost:5000/api/feedback",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${T}`},body:JSON.stringify(P)});if(!N.ok){const L=await N.json().catch(()=>null);throw console.error("Feedback submission error:",L),new Error(L?.message||"Failed to submit feedback")}const j=await N.json();s(0),l(""),n?.(j)}catch(T){m(T.message)}finally{d(!1)}};return y.jsxs("div",{className:"max-w-xl mx-auto bg-white p-6 rounded-lg shadow-md",children:[y.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Share Your Feedback"}),y.jsxs("form",{onSubmit:_,className:"space-y-6",children:[f&&y.jsx("div",{className:"bg-red-50 text-red-700 p-4 rounded-md",children:f}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Rating"}),y.jsx("div",{className:"flex items-center gap-2",children:[1,2,3,4,5].map(x=>y.jsx("button",{type:"button",onClick:()=>s(x),className:"p-1 rounded-full focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-eco-primary hover:scale-110 transition-transform",children:y.jsx(HE,{className:`h-8 w-8 ${x<=t?"text-yellow-400":"text-gray-300"}`})},x))})]}),y.jsxs("div",{children:[y.jsx("label",{htmlFor:"comment",className:"block text-sm font-medium text-gray-700 mb-2",children:"Comment"}),y.jsx("textarea",{id:"comment",rows:4,value:o,onChange:x=>l(x.target.value),placeholder:"Share your thoughts...",className:"w-full rounded-md border-gray-300 shadow-sm focus:border-eco-primary focus:ring-eco-primary",required:!0})]}),y.jsx("button",{type:"submit",disabled:c||!t,className:"w-full py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-eco-primary hover:bg-eco-secondary focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-eco-primary disabled:opacity-50 disabled:cursor-not-allowed",children:c?"Submitting...":"Submit Feedback"})]})]})}function zN({title:n,titleId:e,...t},s){return V.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},t),n?V.createElement("title",{id:e},n):null,V.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))}const qN=V.forwardRef(zN);function HN(){const{user:n}=Dn(),[e,t]=V.useState(!1);V.useEffect(()=>{(async()=>{const _=await n?.getIdTokenResult();t(_?.claims?.admin===!0)})()},[n]);const{data:s,isLoading:o,isError:l,error:c,refetch:d}=Tp({queryKey:["feedback"],queryFn:async()=>{let m="dev-token";try{n&&typeof n.getIdToken=="function"?m=await n.getIdToken():n&&n.uid&&n.uid.startsWith("dev-")&&(m=`dev-token-${n.uid}`)}catch(x){console.error("Error getting token:",x)}const _=await fetch("http://localhost:5000/api/feedback",{headers:{Authorization:`Bearer ${m}`}});if(!_.ok){const x=await _.json().catch(()=>null);throw console.error("Feedback fetch error:",x),new Error(x?.message||"Failed to fetch feedback")}return _.json()},enabled:!!n}),f=async m=>{if(window.confirm("Are you sure you want to delete this feedback?"))try{if(!(await fetch(`http://localhost:5000/api/feedback/${m}`,{method:"DELETE",headers:{Authorization:`Bearer ${await n.getIdToken()}`}})).ok)throw new Error("Failed to delete feedback");queryClient.invalidateQueries(["feedback"])}catch(_){console.error("Delete error:",_),alert("Failed to delete feedback")}};return o?y.jsx("div",{className:"text-center py-4",children:"Loading..."}):l?y.jsxs("div",{className:"text-center text-red-600 py-4",children:["Error: ",c.message]}):y.jsxs("div",{className:"space-y-6",children:[s?.data?.length===0?y.jsx("div",{className:"text-center py-8 text-gray-500",children:"No feedback yet"}):s?.data?.map(m=>y.jsxs("div",{className:"bg-white rounded-lg shadow p-4 relative",children:[y.jsxs("div",{className:"flex items-start justify-between",children:[y.jsxs("div",{children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("span",{className:"font-medium text-gray-900",children:m.name||"Anonymous"}),y.jsx("span",{className:"text-sm text-gray-500",children:new Date(m.createdAt).toLocaleDateString()})]}),y.jsx("div",{className:"flex items-center mt-1",children:[...Array(5)].map((_,x)=>y.jsx(HE,{className:`h-5 w-5 ${x<m.rating?"text-yellow-400":"text-gray-300"}`},x))})]}),e&&y.jsx("button",{onClick:()=>f(m._id),className:"text-gray-400 hover:text-red-600 p-1 rounded-full hover:bg-gray-100",children:y.jsx(qN,{className:"h-5 w-5"})})]}),y.jsx("p",{className:"mt-2 text-gray-600",children:m.comment})]},m._id)),y.jsx("div",{className:"text-center py-4",children:y.jsx("button",{onClick:()=>d(),className:"px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-eco-primary hover:bg-eco-secondary focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-eco-primary disabled:opacity-50",children:"Refresh Feedback"})})]})}function WN(){const{user:n}=Dn(),e=l0(),t=()=>{e.invalidateQueries(["feedback"])};return n?y.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:y.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[y.jsx("div",{children:y.jsx(BN,{onSubmitSuccess:t})}),y.jsxs("div",{children:[y.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Recent Feedback"}),y.jsx(HN,{})]})]})}):y.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:y.jsx("div",{className:"text-center",children:y.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Please sign in to leave feedback"})})})}function GN(){const{user:n}=Dn(),[e,t]=V.useState(null),[s,o]=V.useState(!1),[l,c]=V.useState(null),[d,f]=V.useState(null),[m,_]=V.useState(null),[x,T]=V.useState(null),P="http://localhost:5000",{data:N,isLoading:j,error:L,refetch:W}=Tp({queryKey:["userPledges",n?.uid],queryFn:async()=>{if(!n?.uid)throw new Error("User not authenticated");console.log("Fetching pledges for user:",n.uid),console.log("API URL:",P);try{const k=await fetch(`${P}/api/pledges/user/${n.uid}`);if(console.log("Pledge fetch response status:",k.status),!k.ok){const b=await k.text();throw console.error("Error response:",b),new Error(`Failed to fetch pledges: ${k.status} ${k.statusText}`)}const S=await k.json();if(console.log("Fetched pledges data:",S),!S.success)throw new Error(S.message||"Failed to fetch pledges");let C=[];return Array.isArray(S.data)?C=S.data:S.data&&typeof S.data=="object"&&(C=Object.values(S.data)),console.log("Processed pledges array:",C),C}catch(k){return console.error("Error fetching pledges:",k),console.log("Creating demo pledges for testing..."),[{_id:"demo-1",name:"Demo Pledge",pledgeText:"I pledge to use sustainable transportation daily",userId:n?.uid,createdAt:new Date,status:"active"}]}},enabled:!!n?.uid,retry:1}),G=async k=>{if(!(!k||!n?.uid))try{console.log("Checking eligibility for:",{pledgeId:k,userId:n.uid});const C=await(await fetch(`${P}/api/certificates/eligibility/${n.uid}/${k}`)).json();console.log("Eligibility result:",C),C.success&&_(C.eligibility)}catch(S){console.error("Error checking eligibility:",S)}},Z=async k=>{if(!(!k||!n?.uid))try{console.log("Fetching weekly progress for:",{userId:n.uid,pledgeId:k});const C=await(await fetch(`${P}/api/certificates/progress/${n.uid}/${k}`)).json();if(console.log("Weekly progress response:",C),C.success)T(C.progress);else{console.log("Creating demo weekly progress for testing");const b=new Date,D=Array(7).fill().map((F,R)=>{const Oe=new Date(b);return Oe.setDate(b.getDate()-R),{date:Oe.toISOString().split("T")[0],dayName:Oe.toLocaleDateString("en-US",{weekday:"short"}),dayNumber:Oe.getDate(),completed:R<5,tasks:R<5?["Daily pledge completed"]:[]}});T(D)}}catch(S){console.error("Error getting weekly progress:",S),console.log("Creating fallback demo weekly progress");const C=new Date,b=Array(7).fill().map((D,F)=>{const R=new Date(C);return R.setDate(C.getDate()-F),{date:R.toISOString().split("T")[0],dayName:R.toLocaleDateString("en-US",{weekday:"short"}),dayNumber:R.getDate(),completed:F<5,tasks:F<5?["Daily pledge completed"]:[]}});T(b)}},ne=async k=>{if(!(!k||!n?.uid))try{c(null),console.log("Marking today complete for:",{userId:n.uid,pledgeId:k});const C=await(await fetch(`${P}/api/certificates/checkin`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:n.uid,pledgeId:k,tasks:["Daily pledge completed"],notes:"Completed daily check-in"})})).json();if(console.log("Check-in result:",C),C.success){if(await G(k),await Z(k),alert("Daily check-in recorded successfully! ✅"),x){const b=new Date().toISOString().split("T")[0];T(D=>D.map(F=>F.date===b?{...F,completed:!0,tasks:["Daily pledge completed"]}:F))}}else c(C.message||"Failed to record check-in")}catch(S){console.error("Error marking today complete:",S),c("Failed to record daily check-in: "+S.message)}},ee=async k=>{if(!k){c("No pledge ID provided");return}c(null),o(!0),t(null);try{console.log("Generating certificate for pledge:",k),console.log("Checking eligibility before certificate generation...");try{const D=await(await fetch(`${P}/api/certificates/eligibility/${n?.uid}/${k}`)).json();if(console.log("Eligibility check result:",D),!D.eligibility?.eligible){c(D.eligibility?.message||"You are not eligible for a certificate yet. You need 7 consecutive days of check-ins."),o(!1);return}}catch(b){console.error("Error checking eligibility:",b),c("Failed to check eligibility. Please try again."),o(!1);return}const S=await fetch(`${P}/api/certificates/generate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({pledgeId:k,userId:n?.uid})});console.log("Certificate generation response status:",S.status);const C=await S.json();if(console.log("Certificate generation response:",C),!S.ok){S.status===403?c(C.message||"You are not eligible for a certificate yet. Complete 7 consecutive daily check-ins first!"):c(C.message||`Failed to generate certificate: ${S.statusText}`);return}C.success&&C.downloadUrl?(t(C.downloadUrl),alert("Certificate generated successfully! Click the download button to save it.")):c(C.message||"Failed to generate certificate")}catch(S){console.error("Error generating certificate:",S),c(`An error occurred: ${S.message}`)}finally{o(!1)}},se=async k=>{f(k),_(null),T(null),t(null),c(null),await G(k._id),await Z(k._id)};return n?y.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-blue-50 py-12 px-4 sm:px-6 lg:px-8",children:y.jsx("div",{className:"max-w-4xl mx-auto",children:y.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-8",children:[y.jsxs("div",{className:"flex items-center mb-8",children:[y.jsx(Vl,{className:"w-12 h-12 text-green-600 mr-4"}),y.jsxs("div",{children:[y.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"My Certificates"}),y.jsx("p",{className:"text-gray-600 mt-1",children:"Generate certificates for your completed pledges"})]})]}),y.jsxs("div",{className:"mb-8",children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select a Pledge"}),j?y.jsx("div",{className:"animate-pulse",children:y.jsx("div",{className:"h-12 bg-gray-200 rounded"})}):L?y.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 text-red-700",children:["Error loading pledges: ",L.message]}):!N||N.length===0?y.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 text-yellow-700",children:[y.jsx("p",{children:"You haven't made any pledges yet."}),y.jsx("a",{href:"/pledge",className:"text-green-600 hover:text-green-700 font-medium mt-2 inline-block",children:"Create Your First Pledge →"})]}):y.jsxs("select",{className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",value:d?._id||"",onChange:k=>{const S=N.find(C=>C._id===k.target.value);S&&se(S)},children:[y.jsx("option",{value:"",children:"Choose a pledge..."}),N.map(k=>y.jsxs("option",{value:k._id,children:[k.name," - ",k.pledgeText?.substring(0,60),"..."]},k._id))]})]}),d&&y.jsxs("div",{className:"space-y-6",children:[y.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[y.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Pledge Details"}),y.jsxs("p",{className:"text-gray-700 mb-2",children:[y.jsx("strong",{children:"Name:"})," ",d.name]}),y.jsxs("p",{className:"text-gray-700 mb-2",children:[y.jsx("strong",{children:"Email:"})," ",d.email]}),y.jsxs("p",{className:"text-gray-700",children:[y.jsx("strong",{children:"Pledge:"})," ",d.pledgeText]})]}),m&&y.jsx("div",{className:`p-6 rounded-lg border-2 ${m.eligible?"bg-green-50 border-green-200":"bg-yellow-50 border-yellow-200"}`,children:y.jsxs("div",{className:"flex items-start",children:[m.eligible?y.jsx(ml,{className:"w-6 h-6 text-green-600 mr-3 flex-shrink-0 mt-1"}):y.jsx(gN,{className:"w-6 h-6 text-yellow-600 mr-3 flex-shrink-0 mt-1"}),y.jsxs("div",{className:"flex-1",children:[y.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:m.eligible?"Eligible for Certificate! 🎉":"Keep Going! 💪"}),y.jsx("p",{className:"text-gray-700 mb-3",children:m.message}),y.jsxs("div",{className:"flex gap-4 text-sm",children:[y.jsxs("span",{className:"font-medium",children:["Days Completed: ",m.daysCompleted]}),y.jsxs("span",{className:"font-medium",children:["Consecutive Days: ",m.consecutiveDays,"/",m.daysRequired]})]})]})]})}),x&&x.length>0&&y.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[y.jsxs("h3",{className:"font-semibold text-gray-900 mb-4 flex items-center",children:[y.jsx(xm,{className:"w-5 h-5 mr-2"}),"Weekly Progress"]}),y.jsx("div",{className:"grid grid-cols-7 gap-2",children:x.map((k,S)=>y.jsxs("div",{className:`text-center p-3 rounded-lg ${k.completed?"bg-green-100 border-2 border-green-500":"bg-gray-100 border-2 border-gray-300"}`,children:[y.jsx("div",{className:"text-xs font-medium text-gray-600 mb-1",children:k.dayName}),y.jsx("div",{className:"text-lg font-bold text-gray-900",children:k.dayNumber}),k.completed?y.jsx(ml,{className:"w-4 h-4 text-green-600 mx-auto mt-1"}):y.jsx("div",{className:"w-4 h-4 rounded-full border-2 border-gray-400 mx-auto mt-1"})]},S))})]}),y.jsxs("div",{className:"flex gap-4",children:[y.jsxs("button",{onClick:()=>ne(d._id),className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white font-medium py-3 px-6 rounded-lg transition-colors flex items-center justify-center gap-2",children:[y.jsx(ml,{className:"w-5 h-5"}),"Mark Today Complete"]}),y.jsxs("button",{onClick:()=>ee(d._id),disabled:s||m&&!m.eligible,className:`flex-1 font-medium py-3 px-6 rounded-lg transition-colors flex items-center justify-center gap-2 ${s||m&&!m.eligible?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-green-600 hover:bg-green-700 text-white"}`,children:[y.jsx(Vl,{className:"w-5 h-5"}),s?"Generating...":"Generate Certificate"]})]}),l&&y.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 text-red-700",children:l}),e&&y.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-6",children:[y.jsxs("h3",{className:"font-semibold text-gray-900 mb-3 flex items-center",children:[y.jsx(ml,{className:"w-5 h-5 text-green-600 mr-2"}),"Certificate Ready!"]}),y.jsxs("a",{href:e,download:!0,className:"inline-flex items-center gap-2 bg-green-600 hover:bg-green-700 text-white font-medium py-3 px-6 rounded-lg transition-colors",children:[y.jsx(UE,{className:"w-5 h-5"}),"Download Certificate"]})]})]})]})})}):y.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-blue-50 flex items-center justify-center p-4",children:y.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-8 max-w-md w-full text-center",children:[y.jsx("p",{className:"text-gray-600 mb-4",children:"Please log in to view your certificates"}),y.jsx("a",{href:"/login",className:"text-green-600 hover:text-green-700 font-medium",children:"Go to Login →"})]})})}function KN(){const{user:n}=Dn(),[e,t]=V.useState(null),[s,o]=V.useState([""]),[l,c]=V.useState(""),[d,f]=V.useState(!1),[m,_]=V.useState(null),[x,T]=V.useState(!1),P="http://localhost:5000",{data:N,isLoading:j}=Tp({queryKey:["userPledges",n?.uid],queryFn:async()=>{if(!n?.uid)throw new Error("User not authenticated");const ne=await fetch(`${P}/api/pledges/user/${n.uid}`);if(!ne.ok)throw new Error("Failed to fetch pledges");const ee=await ne.json();return Array.isArray(ee.data)?ee.data:[]},enabled:!!n?.uid}),L=()=>{o([...s,""])},W=(ne,ee)=>{const se=[...s];se[ne]=ee,o(se)},G=ne=>{const ee=s.filter((se,k)=>k!==ne);o(ee.length>0?ee:[""])},Z=async ne=>{if(ne.preventDefault(),!e){_("Please select a pledge");return}const ee=s.filter(se=>se.trim()!=="");if(ee.length===0){_("Please add at least one task");return}T(!0),_(null);try{await Ht.recordDailyCheckIn(e,{tasks:ee,notes:l.trim()}),f(!0),o([""]),c(""),setTimeout(()=>f(!1),3e3)}catch(se){console.error("Error recording check-in:",se),_(se.message||"Failed to record check-in")}finally{T(!1)}};return j?y.jsx("div",{className:"container mx-auto px-4 py-8",children:y.jsxs("div",{className:"max-w-2xl mx-auto text-center",children:[y.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600 mx-auto"}),y.jsx("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})}):y.jsx("div",{className:"container mx-auto px-4 py-8",children:y.jsxs("div",{className:"max-w-2xl mx-auto",children:[y.jsxs("div",{className:"text-center mb-8",children:[y.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-green-100 rounded-full mb-4",children:y.jsx(_N,{className:"h-8 w-8 text-green-600"})}),y.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Daily Check-In"}),y.jsx("p",{className:"text-gray-600",children:"Track your progress and build a 7-day streak to earn your certificate"})]}),d&&y.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-6",children:y.jsxs("div",{className:"flex items-center",children:[y.jsx(ml,{className:"h-5 w-5 text-green-600 mr-3"}),y.jsxs("div",{children:[y.jsx("p",{className:"font-semibold text-green-800",children:"Check-in recorded!"}),y.jsx("p",{className:"text-sm text-green-600",children:"Keep up the great work!"})]})]})}),m&&y.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:y.jsx("p",{className:"text-sm text-red-700",children:m})}),!N||N.length===0?y.jsxs("div",{className:"bg-gray-50 rounded-lg p-8 text-center",children:[y.jsx(xm,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),y.jsx("h2",{className:"text-xl font-medium text-gray-800 mb-2",children:"No Pledges Yet"}),y.jsx("p",{className:"text-gray-600 mb-4",children:"Create a pledge first to start your daily check-ins."}),y.jsx("a",{href:"/pledge",className:"inline-flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Create Pledge"})]}):y.jsxs("form",{onSubmit:Z,className:"bg-white rounded-lg shadow-md p-6 space-y-6",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Your Pledge"}),y.jsxs("select",{value:e||"",onChange:ne=>t(ne.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",required:!0,children:[y.jsx("option",{value:"",children:"Choose a pledge..."}),N.map(ne=>y.jsxs("option",{value:ne._id,children:[ne.name,"'s Pledge - ",new Date(ne.pledgeDate).toLocaleDateString()]},ne._id))]})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Today's Tasks Completed"}),y.jsxs("div",{className:"space-y-2",children:[s.map((ne,ee)=>y.jsxs("div",{className:"flex gap-2",children:[y.jsx("input",{type:"text",value:ne,onChange:se=>W(ee,se.target.value),placeholder:"e.g., Used reusable water bottle",className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"}),s.length>1&&y.jsx("button",{type:"button",onClick:()=>G(ee),className:"px-3 py-2 text-red-600 hover:bg-red-50 rounded-lg",children:"Remove"})]},ee)),y.jsx("button",{type:"button",onClick:L,className:"text-sm text-green-600 hover:text-green-700 font-medium",children:"+ Add Another Task"})]})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes (Optional)"}),y.jsx("textarea",{value:l,onChange:ne=>c(ne.target.value),placeholder:"Any reflections or observations about today?",rows:4,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"})]}),y.jsx("button",{type:"submit",disabled:x,className:"w-full px-6 py-3 bg-green-600 text-white font-medium rounded-lg hover:bg-green-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:x?y.jsxs("div",{className:"flex items-center justify-center",children:[y.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Recording..."]}):"Record Check-In"})]}),y.jsx("div",{className:"mt-8 bg-blue-50 border border-blue-200 rounded-lg p-6",children:y.jsxs("div",{className:"flex items-start",children:[y.jsx(PN,{className:"h-6 w-6 text-blue-600 mr-3 flex-shrink-0 mt-1"}),y.jsxs("div",{children:[y.jsx("h3",{className:"font-semibold text-blue-800 mb-1",children:"Earn Your Certificate"}),y.jsx("p",{className:"text-sm text-blue-600",children:"Complete your daily check-in for 7 consecutive days to unlock your eco-certificate! Each check-in counts toward your streak."})]})]})})]})})}function QN(){const[n,e]=V.useState({auth:"Testing...",firestore:"Testing...",write:"Not tested",read:"Not tested"}),[t,s]=V.useState([]),o=(f,m="info")=>{const _=new Date().toLocaleTimeString();s(x=>[...x,{timestamp:_,message:f,type:m}]),console.log(`[${_}] ${f}`)};V.useEffect(()=>{l()},[]);const l=async()=>{try{kt?(e(f=>({...f,auth:"✅ Connected"})),o("Firebase Auth initialized successfully","success")):(e(f=>({...f,auth:"❌ Failed"})),o("Firebase Auth not initialized","error"))}catch(f){e(m=>({...m,auth:"❌ Error"})),o(`Auth Error: ${f.message}`,"error")}try{Ze?(e(f=>({...f,firestore:"✅ Connected"})),o("Firestore initialized successfully","success")):(e(f=>({...f,firestore:"❌ Failed"})),o("Firestore not initialized","error"))}catch(f){e(m=>({...m,firestore:"❌ Error"})),o(`Firestore Error: ${f.message}`,"error")}},c=async()=>{o("Starting write test..."),e(f=>({...f,write:"Testing..."}));try{const f=Jt(Ze,"test","connectivity-test"),m={message:"Hello from EcoPledge!",timestamp:Dt(),testId:Date.now()};o("Attempting to write to Firestore..."),await pl(f,m),e(_=>({..._,write:"✅ Success"})),o("Write test successful!","success"),setTimeout(d,500)}catch(f){e(m=>({...m,write:"❌ Failed"})),o(`Write Error: ${f.code} - ${f.message}`,"error"),f.code==="permission-denied"&&o("⚠️ Permission denied! Check Firestore security rules.","warning")}},d=async()=>{o("Starting read test..."),e(f=>({...f,read:"Testing..."}));try{const f=Jt(Ze,"test","connectivity-test");o("Attempting to read from Firestore...");const m=await Ni(f);m.exists()?(e(_=>({..._,read:"✅ Success"})),o("Read test successful!","success"),o(`Data retrieved: ${JSON.stringify(m.data())}`,"info")):(e(_=>({..._,read:"⚠️ No data"})),o("Document does not exist yet","warning"))}catch(f){e(m=>({...m,read:"❌ Failed"})),o(`Read Error: ${f.code} - ${f.message}`,"error"),f.code==="permission-denied"&&o("⚠️ Permission denied! Check Firestore security rules.","warning")}};return y.jsx("div",{className:"min-h-screen bg-gray-50 py-12 px-4",children:y.jsx("div",{className:"max-w-4xl mx-auto",children:y.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[y.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-6",children:"🔥 Firebase Connectivity Test"}),y.jsxs("div",{className:"space-y-4 mb-8",children:[y.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded",children:[y.jsx("span",{className:"font-medium",children:"Firebase Authentication:"}),y.jsx("span",{className:"font-mono",children:n.auth})]}),y.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded",children:[y.jsx("span",{className:"font-medium",children:"Firestore Database:"}),y.jsx("span",{className:"font-mono",children:n.firestore})]}),y.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded",children:[y.jsx("span",{className:"font-medium",children:"Write Test:"}),y.jsx("span",{className:"font-mono",children:n.write})]}),y.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded",children:[y.jsx("span",{className:"font-medium",children:"Read Test:"}),y.jsx("span",{className:"font-mono",children:n.read})]})]}),y.jsxs("div",{className:"space-x-4 mb-8",children:[y.jsx("button",{onClick:c,className:"px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Test Write"}),y.jsx("button",{onClick:d,className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Test Read"})]}),y.jsx("div",{className:"bg-gray-900 text-gray-100 rounded-lg p-4 h-96 overflow-y-auto",children:y.jsxs("div",{className:"font-mono text-sm space-y-2",children:[y.jsx("div",{className:"text-green-400",children:"📋 Firebase Test Console"}),y.jsx("div",{className:"border-b border-gray-700 mb-2"}),t.length===0&&y.jsx("div",{className:"text-gray-500",children:'No logs yet. Click "Test Write" to start.'}),t.map((f,m)=>y.jsxs("div",{className:`
                    ${f.type==="error"?"text-red-400":""}
                    ${f.type==="success"?"text-green-400":""}
                    ${f.type==="warning"?"text-yellow-400":""}
                    ${f.type==="info"?"text-gray-300":""}
                  `,children:[y.jsxs("span",{className:"text-gray-500",children:["[",f.timestamp,"]"]})," ",f.message]},m))]})}),y.jsxs("div",{className:"mt-8 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[y.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"💡 Troubleshooting Tips:"}),y.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[y.jsx("li",{children:'• If you see "permission-denied", check Firestore security rules in Firebase Console'}),y.jsx("li",{children:"• Make sure Firestore database is created (not just Authentication)"}),y.jsx("li",{children:"• Verify your .env file has correct Firebase credentials"}),y.jsx("li",{children:"• Check browser console (F12) for detailed error messages"}),y.jsx("li",{children:"• For testing, you can set Firestore rules to test mode (see FIRESTORE_SECURITY_RULES.md)"})]})]}),y.jsx("div",{className:"mt-4",children:y.jsx("a",{href:"/",className:"text-green-600 hover:text-green-700 font-medium",children:"← Back to Home"})})]})})})}const YN=new tI;function XN(){return y.jsx(nI,{client:YN,children:y.jsx(sN,{children:y.jsx(x1,{children:y.jsxs("div",{className:"min-h-screen w-full bg-gray-50",children:[y.jsx(iN,{}),y.jsxs(ZT,{children:[y.jsx(mr,{path:"/",element:y.jsx(DN,{})}),y.jsx(mr,{path:"/login",element:y.jsx(ON,{})}),y.jsx(mr,{path:"/dev-login",element:y.jsx(LN,{})}),y.jsx(mr,{path:"/dashboard",element:y.jsx(al,{children:y.jsx(MN,{})})}),y.jsx(mr,{path:"/pledge",element:y.jsx(al,{children:y.jsx(UN,{})})}),y.jsx(mr,{path:"/feedback",element:y.jsx(al,{children:y.jsx(WN,{})})}),y.jsx(mr,{path:"/certificate",element:y.jsx(al,{children:y.jsx(GN,{})})}),y.jsx(mr,{path:"/checkin",element:y.jsx(al,{children:y.jsx(KN,{})})}),y.jsx(mr,{path:"/firebase-test",element:y.jsx(QN,{})})]})]})})})})}lT.createRoot(document.getElementById("root")).render(y.jsx(nT.StrictMode,{children:y.jsx(XN,{})}));
